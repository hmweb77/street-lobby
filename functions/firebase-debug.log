[debug] [2025-02-21T05:54:09.187Z] ----------------------------------------------------------------------
[debug] [2025-02-21T05:54:09.189Z] Command:       C:\Program Files\nodejs\node.exe C:\Program Files\nodejs\node_modules\firebase-tools\lib\bin\firebase.js emulators:start --only functions
[debug] [2025-02-21T05:54:09.189Z] CLI Version:   13.31.2
[debug] [2025-02-21T05:54:09.189Z] Platform:      win32
[debug] [2025-02-21T05:54:09.189Z] Node Version:  v22.0.0
[debug] [2025-02-21T05:54:09.190Z] Time:          Fri Feb 21 2025 11:54:09 GMT+0600 (Bangladesh Standard Time)
[debug] [2025-02-21T05:54:09.190Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-02-21T05:54:09.375Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-02-21T05:54:09.375Z] > authorizing via signed-in user (eliasemon0025@gmail.com)
[info] i  emulators: Starting emulators: functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions"}}
[debug] [2025-02-21T05:54:09.383Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-02-21T05:54:09.383Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-02-21T05:54:09.387Z] [hub] writing locator at C:\Users\ELIASE~1\AppData\Local\Temp\hub-street-lobby.json
[debug] [2025-02-21T05:54:09.406Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-02-21T05:54:09.407Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-02-21T05:54:09.407Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-02-21T05:54:09.407Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2025-02-21T05:54:09.410Z] defaultcredentials: writing to file C:\Users\Elias Emon\AppData\Roaming\firebase\eliasemon0025_gmail_com_application_default_credentials.json
[debug] [2025-02-21T05:54:09.411Z] Setting GAC to C:\Users\Elias Emon\AppData\Roaming\firebase\eliasemon0025_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Elias Emon\\AppData\\Roaming\\firebase\\eliasemon0025_gmail_com_application_default_credentials.json"}}
[debug] [2025-02-21T05:54:09.412Z] Checked if tokens are valid: false, expires at: 1740085103755
[debug] [2025-02-21T05:54:09.412Z] Checked if tokens are valid: false, expires at: 1740085103755
[debug] [2025-02-21T05:54:09.412Z] > refreshing access token with scopes: []
[debug] [2025-02-21T05:54:09.414Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-02-21T05:54:09.414Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-02-21T05:54:09.623Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-02-21T05:54:09.623Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-02-21T05:54:09.637Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/street-lobby/adminSdkConfig [none]
[debug] [2025-02-21T05:54:10.111Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/street-lobby/adminSdkConfig 200
[debug] [2025-02-21T05:54:10.111Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/street-lobby/adminSdkConfig {"projectId":"street-lobby","storageBucket":"street-lobby.firebasestorage.app"}
[info] i  functions: Watching "D:\Freelance-Project\ossama\street-lobby\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"D:\\Freelance-Project\\ossama\\street-lobby\\functions\" for Cloud Functions..."}}
[debug] [2025-02-21T05:54:10.135Z] Validating nodejs source
[debug] [2025-02-21T05:54:10.969Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T05:54:10.969Z] Building nodejs source
[debug] [2025-02-21T05:54:10.969Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T05:54:10.972Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T05:54:10.978Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8947

[debug] [2025-02-21T05:54:11.646Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[info] +  functions[us-central1-sanityWebhook]: http function initialized (http://127.0.0.1:5001/street-lobby/us-central1/sanityWebhook). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/street-lobby/us-central1/sanityWebhook)."}}
[info] +  functions[us-central1-handleBookingUpdate]: http function initialized (http://127.0.0.1:5001/street-lobby/us-central1/handleBookingUpdate). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/street-lobby/us-central1/handleBookingUpdate)."}}
[debug] [2025-02-21T05:54:16.684Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-02-21T05:59:51.451Z] File D:\Freelance-Project\ossama\street-lobby\functions\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js changed, reloading triggers"}}
[debug] [2025-02-21T05:59:52.454Z] Validating nodejs source
[debug] [2025-02-21T05:59:53.876Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T05:59:53.877Z] Building nodejs source
[debug] [2025-02-21T05:59:53.877Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T05:59:53.878Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T05:59:53.883Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8828

[debug] [2025-02-21T05:59:54.516Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[debug] [2025-02-21T06:04:34.234Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:34.234Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:34.234Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:34.234Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:34.234Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:04:34.236Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:34.237Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:04:34.246Z] [worker-pool] addWorker(us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T06:04:34.246Z] [worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1"}}
[debug] [2025-02-21T06:04:34.313Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:34.234Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:34.314Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:34.234Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"workRunningCount":2}
[debug] [2025-02-21T06:04:34.314Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:04:34.316Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:34.316Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:04:34.322Z] [worker-pool] addWorker(us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sanityWebhook)"}}
[debug] [2025-02-21T06:04:34.323Z] [worker-pool] Adding worker with key us-central1-sanityWebhook, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sanityWebhook, total=1"}}
[info] >  (node:26244) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:26244) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:26244) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T06:04:35.534Z] [runtime-status] [26244] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.535Z] [runtime-status] [26244] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.535Z] [runtime-status] [26244] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T06:04:35.536Z] [runtime-status] [26244] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[info] >  (node:24776) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:24776) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:24776) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T06:04:35.545Z] [runtime-status] [24776] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.546Z] [runtime-status] [24776] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.547Z] [runtime-status] [24776] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T06:04:35.548Z] [runtime-status] [24776] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.842Z] [runtime-status] [26244] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T06:04:35.842Z] [runtime-status] [26244] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T06:04:35.843Z] [runtime-status] [26244] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.847Z] [runtime-status] [24776] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T06:04:35.847Z] [runtime-status] [24776] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T06:04:35.848Z] [runtime-status] [24776] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.899Z] [runtime-status] [24776] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.899Z] [runtime-status] [26244] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.901Z] [runtime-status] [26244] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.901Z] [runtime-status] [26244] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T06:04:35.901Z] [runtime-status] [24776] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:04:35.901Z] [runtime-status] [24776] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T06:04:36.107Z] [runtime-status] [24776] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T06:04:36.107Z] [runtime-status] [26244] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[warn] !  functions: The Cloud Firestore emulator is not running, so calls to Firestore will affect production. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"The Cloud Firestore emulator is not running, so calls to Firestore will affect production."}}
[debug] [2025-02-21T06:04:36.115Z] [runtime-status] [24776] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T06:04:36.116Z] [runtime-status] [26244] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T06:04:36.116Z] [runtime-status] [24776] Listening to port: \\?\pipe\fire_emu_045c61b12ab79053 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [24776] Listening to port: \\\\?\\pipe\\fire_emu_045c61b12ab79053"}}
[debug] [2025-02-21T06:04:36.116Z] [runtime-status] [26244] Listening to port: \\?\pipe\fire_emu_7917774ddecffc46 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26244] Listening to port: \\\\?\\pipe\\fire_emu_7917774ddecffc46"}}
[debug] [2025-02-21T06:04:36.180Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:04:36.181Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:04:36.181Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[debug] [2025-02-21T06:04:36.187Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:36.187Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:04:36.187Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"totalPrice":3000,"_id":"drafts.gbwTgqOq53YDSh8fvmSYOl","status":"pending","permanentAddress":"asfasfas","age":"15","_rev":"dfd21866-ad24-4967-aaf9-1c43e3651300","currentLocation":"","notes":"","name":"dfasfasd","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","_key":"5b175e76473241936eb88113ea71741e"},{"year":"2025/2026","price":750,"semester":"2nd Semester","_key":"a341b589ab6dc2f5390646e6483e5bbd"},{"year":"2026/2027","price":1500,"semester":"Both Semesters","_key":"7f9926f8c6f367f892bf1b68cee0e8f6"}],"_updatedAt":"2025-02-21T03:59:44Z","nationality":"fasas","currentProfession":"sadsadfsdfa","idNumber":"fassafadsfasdf","_type":"booking","room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"genre":"fas","bookingDate":"2025-02-21T03:59:42.709Z","_createdAt":"2025-02-21T03:59:44Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"totalPrice":3000,"_id":"drafts.gbwTgqOq53YDSh8fvmSYOl","status":"pending","permanentAddress":"asfasfas","age":"15","_rev":"dfd21866-ad24-4967-aaf9-1c43e3651300","currentLocation":"","notes":"","name":"dfasfasd","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","_key":"5b175e76473241936eb88113ea71741e"},{"year":"2025/2026","price":750,"semester":"2nd Semester","_key":"a341b589ab6dc2f5390646e6483e5bbd"},{"year":"2026/2027","price":1500,"semester":"Both Semesters","_key":"7f9926f8c6f367f892bf1b68cee0e8f6"}],"_updatedAt":"2025-02-21T03:59:44Z","nationality":"fasas","currentProfession":"sadsadfsdfa","idNumber":"fassafadsfasdf","_type":"booking","room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"genre":"fas","bookingDate":"2025-02-21T03:59:42.709Z","_createdAt":"2025-02-21T03:59:44Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"totalPrice\":3000,\"_id\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"status\":\"pending\",\"permanentAddress\":\"asfasfas\",\"age\":\"15\",\"_rev\":\"dfd21866-ad24-4967-aaf9-1c43e3651300\",\"currentLocation\":\"\",\"notes\":\"\",\"name\":\"dfasfasd\",\"bookedPeriod\":[{\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\",\"_key\":\"5b175e76473241936eb88113ea71741e\"},{\"year\":\"2025/2026\",\"price\":750,\"semester\":\"2nd Semester\",\"_key\":\"a341b589ab6dc2f5390646e6483e5bbd\"},{\"year\":\"2026/2027\",\"price\":1500,\"semester\":\"Both Semesters\",\"_key\":\"7f9926f8c6f367f892bf1b68cee0e8f6\"}],\"_updatedAt\":\"2025-02-21T03:59:44Z\",\"nationality\":\"fasas\",\"currentProfession\":\"sadsadfsdfa\",\"idNumber\":\"fassafadsfasdf\",\"_type\":\"booking\",\"room\":{\"_type\":\"reference\",\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\"},\"genre\":\"fas\",\"bookingDate\":\"2025-02-21T03:59:42.709Z\",\"_createdAt\":\"2025-02-21T03:59:44Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"840","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"lquOgQARenLj97TVxkyDiw\"","sanity-dataset":"production","sanity-document-id":"drafts.gbwTgqOq53YDSh8fvmSYOl","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"dfd21866-ad24-4967-aaf9-1c43e3651300","sanity-transaction-time":"2025-02-21T06:04:34Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"840","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"lquOgQARenLj97TVxkyDiw\"","sanity-dataset":"production","sanity-document-id":"drafts.gbwTgqOq53YDSh8fvmSYOl","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"dfd21866-ad24-4967-aaf9-1c43e3651300","sanity-transaction-time":"2025-02-21T06:04:34Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"840\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"lquOgQARenLj97TVxkyDiw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"dfd21866-ad24-4967-aaf9-1c43e3651300\",\"sanity-transaction-time\":\"2025-02-21T06:04:34Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/221e3097-7d28-45b3-b2b3-3bb55c123ba6"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/221e3097-7d28-45b3-b2b3-3bb55c123ba6\"\n - Be careful, this may be a production service."}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:04:36.689Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 502.193ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 502.193ms"}}
[debug] [2025-02-21T06:04:36.690Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:36.690Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:36.690Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:36.691Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:37.369Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:37.369Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:37.369Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:37.369Z"],"workRunningCount":2}
[debug] [2025-02-21T06:04:37.369Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:04:37.370Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:37.370Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:04:37.370Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:04:37.370Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:04:37.593Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 222.386ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 222.386ms"}}
[debug] [2025-02-21T06:04:37.593Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:37.593Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:37.593Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:37.593Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:38.904Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:38.904Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:38.904Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:38.904Z"],"workRunningCount":2}
[debug] [2025-02-21T06:04:38.904Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:04:38.905Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:38.905Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:04:38.905Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:04:38.905Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:04:39.134Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 228.3522ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 228.3522ms"}}
[debug] [2025-02-21T06:04:39.134Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:39.134Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:39.134Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:39.134Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"workRunningCount":1}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[debug] [2025-02-21T06:04:40.701Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:40.701Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:40.701Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:40.701Z"],"workRunningCount":2}
[debug] [2025-02-21T06:04:40.701Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:04:40.702Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:40.702Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:04:40.702Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:04:40.702Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:04:40.916Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 213.2905ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 213.2905ms"}}
[debug] [2025-02-21T06:04:40.916Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:40.916Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:40.916Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:40.916Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:34.313Z"],"workRunningCount":1}
[info] >  Document drafts.gbwTgqOq53YDSh8fvmSYOl updated in booking {"user":"Document drafts.gbwTgqOq53YDSh8fvmSYOl updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.gbwTgqOq53YDSh8fvmSYOl updated in booking"}}
[debug] [2025-02-21T06:04:42.888Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 6706.2762ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 6706.2762ms"}}
[debug] [2025-02-21T06:04:42.888Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:04:42.888Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:42.888Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:42.888Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:42.917Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:42.917Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:42.917Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:42.917Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:42.917Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:04:42.917Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:42.917Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:04:42.918Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:04:42.918Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:04:43.126Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 207.8822ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 207.8822ms"}}
[debug] [2025-02-21T06:04:43.126Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:43.126Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:43.126Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:43.126Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:45.252Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:45.251Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:45.252Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:45.251Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:45.252Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:04:45.252Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:45.252Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:04:45.252Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:04:45.253Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:04:45.467Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 214.6716ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 214.6716ms"}}
[debug] [2025-02-21T06:04:45.468Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:45.468Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:45.468Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:45.468Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:48.812Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:48.812Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:48.812Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:48.812Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:48.812Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:04:48.813Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:48.813Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:04:48.813Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:04:48.813Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:04:49.028Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 215.4778ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 215.4778ms"}}
[debug] [2025-02-21T06:04:49.029Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:49.029Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:49.029Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:49.029Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:54.528Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:54.528Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:54.528Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:04:54.528Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:54.528Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:04:54.529Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:54.529Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:04:54.529Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:04:54.530Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:04:54.741Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 211.3499ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 211.3499ms"}}
[debug] [2025-02-21T06:04:54.741Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:04:54.741Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:54.741Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:54.742Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:54.984Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:54.984Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:54.985Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:54.984Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:54.985Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:04:54.985Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:54.985Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:04:54.985Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:04:54.986Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_type":"booking","status":"pending","_createdAt":"2025-02-21T03:59:44Z","bookingDate":"2025-02-21T03:59:42.709Z","nationality":"fasas","permanentAddress":"asfasfas","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_rev":"gbwTgqOq53YDSh8fvmSYNE","name":"dfasfasd","genre":"fas","_updatedAt":"2025-02-21T03:59:44Z","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester"},{"year":"2025/2026","price":750,"semester":"2nd Semester"},{"year":"2026/2027","price":1500,"semester":"Both Semesters"}],"_id":"gbwTgqOq53YDSh8fvmSYOl","currentProfession":"sadsadfsdfa","notes":"","idNumber":"fassafadsfasdf","totalPrice":3000,"currentLocation":"","age":"15"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_type":"booking","status":"pending","_createdAt":"2025-02-21T03:59:44Z","bookingDate":"2025-02-21T03:59:42.709Z","nationality":"fasas","permanentAddress":"asfasfas","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_rev":"gbwTgqOq53YDSh8fvmSYNE","name":"dfasfasd","genre":"fas","_updatedAt":"2025-02-21T03:59:44Z","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester"},{"year":"2025/2026","price":750,"semester":"2nd Semester"},{"year":"2026/2027","price":1500,"semester":"Both Semesters"}],"_id":"gbwTgqOq53YDSh8fvmSYOl","currentProfession":"sadsadfsdfa","notes":"","idNumber":"fassafadsfasdf","totalPrice":3000,"currentLocation":"","age":"15"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_type\":\"booking\",\"status\":\"pending\",\"_createdAt\":\"2025-02-21T03:59:44Z\",\"bookingDate\":\"2025-02-21T03:59:42.709Z\",\"nationality\":\"fasas\",\"permanentAddress\":\"asfasfas\",\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"_rev\":\"gbwTgqOq53YDSh8fvmSYNE\",\"name\":\"dfasfasd\",\"genre\":\"fas\",\"_updatedAt\":\"2025-02-21T03:59:44Z\",\"bookedPeriod\":[{\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\"},{\"year\":\"2025/2026\",\"price\":750,\"semester\":\"2nd Semester\"},{\"year\":\"2026/2027\",\"price\":1500,\"semester\":\"Both Semesters\"}],\"_id\":\"gbwTgqOq53YDSh8fvmSYOl\",\"currentProfession\":\"sadsadfsdfa\",\"notes\":\"\",\"idNumber\":\"fassafadsfasdf\",\"totalPrice\":3000,\"currentLocation\":\"\",\"age\":\"15\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"693","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"rtHui0Mw57R+QRzvi1Eo0A\"","sanity-dataset":"production","sanity-document-id":"gbwTgqOq53YDSh8fvmSYOl","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAsyTz","sanity-transaction-time":"2025-02-21T06:04:56Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"693","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"rtHui0Mw57R+QRzvi1Eo0A\"","sanity-dataset":"production","sanity-document-id":"gbwTgqOq53YDSh8fvmSYOl","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAsyTz","sanity-transaction-time":"2025-02-21T06:04:56Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"693\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"rtHui0Mw57R+QRzvi1Eo0A\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"gbwTgqOq53YDSh8fvmSYOl\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAsyTz\",\"sanity-transaction-time\":\"2025-02-21T06:04:56Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document gbwTgqOq53YDSh8fvmSYOl deleted from booking {"user":"Document gbwTgqOq53YDSh8fvmSYOl deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document gbwTgqOq53YDSh8fvmSYOl deleted from booking"}}
[debug] [2025-02-21T06:04:55.402Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 416.3794ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 416.3794ms"}}
[debug] [2025-02-21T06:04:55.403Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:04:55.403Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:55.403Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:55.403Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:55.604Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:55.604Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:04:55.605Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:04:55.604Z"],"workRunningCount":1}
[debug] [2025-02-21T06:04:55.605Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:04:55.605Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:04:55.605Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:04:55.605Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:04:55.606Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"genre":"fas","_createdAt":"2025-02-21T03:59:44Z","nationality":"fasas","currentProfession":"sadsadfsdfa","_id":"drafts.gbwTgqOq53YDSh8fvmSYOl","age":"15","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_type":"booking","currentLocation":"","_rev":"dfd21866-ad24-4967-aaf9-1c43e3651300","idNumber":"fassafadsfasdf","bookingDate":"2025-02-21T03:59:42.709Z","name":"dfasfasd","notes":"","status":"pending","_updatedAt":"2025-02-21T03:59:44Z","totalPrice":3000,"bookedPeriod":[{"_key":"5b175e76473241936eb88113ea71741e","year":"2024/2025","price":750,"semester":"2nd Semester"},{"price":750,"semester":"2nd Semester","_key":"a341b589ab6dc2f5390646e6483e5bbd","year":"2025/2026"},{"year":"2026/2027","price":1500,"semester":"Both Semesters","_key":"7f9926f8c6f367f892bf1b68cee0e8f6"}],"permanentAddress":"asfasfas"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"genre":"fas","_createdAt":"2025-02-21T03:59:44Z","nationality":"fasas","currentProfession":"sadsadfsdfa","_id":"drafts.gbwTgqOq53YDSh8fvmSYOl","age":"15","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_type":"booking","currentLocation":"","_rev":"dfd21866-ad24-4967-aaf9-1c43e3651300","idNumber":"fassafadsfasdf","bookingDate":"2025-02-21T03:59:42.709Z","name":"dfasfasd","notes":"","status":"pending","_updatedAt":"2025-02-21T03:59:44Z","totalPrice":3000,"bookedPeriod":[{"_key":"5b175e76473241936eb88113ea71741e","year":"2024/2025","price":750,"semester":"2nd Semester"},{"price":750,"semester":"2nd Semester","_key":"a341b589ab6dc2f5390646e6483e5bbd","year":"2025/2026"},{"year":"2026/2027","price":1500,"semester":"Both Semesters","_key":"7f9926f8c6f367f892bf1b68cee0e8f6"}],"permanentAddress":"asfasfas"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"genre\":\"fas\",\"_createdAt\":\"2025-02-21T03:59:44Z\",\"nationality\":\"fasas\",\"currentProfession\":\"sadsadfsdfa\",\"_id\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"age\":\"15\",\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"_type\":\"booking\",\"currentLocation\":\"\",\"_rev\":\"dfd21866-ad24-4967-aaf9-1c43e3651300\",\"idNumber\":\"fassafadsfasdf\",\"bookingDate\":\"2025-02-21T03:59:42.709Z\",\"name\":\"dfasfasd\",\"notes\":\"\",\"status\":\"pending\",\"_updatedAt\":\"2025-02-21T03:59:44Z\",\"totalPrice\":3000,\"bookedPeriod\":[{\"_key\":\"5b175e76473241936eb88113ea71741e\",\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\"},{\"price\":750,\"semester\":\"2nd Semester\",\"_key\":\"a341b589ab6dc2f5390646e6483e5bbd\",\"year\":\"2025/2026\"},{\"year\":\"2026/2027\",\"price\":1500,\"semester\":\"Both Semesters\",\"_key\":\"7f9926f8c6f367f892bf1b68cee0e8f6\"}],\"permanentAddress\":\"asfasfas\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"840","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"p/x/3wMmebvPCd4Um4LIVA\"","sanity-dataset":"production","sanity-document-id":"drafts.gbwTgqOq53YDSh8fvmSYOl","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAsyTz","sanity-transaction-time":"2025-02-21T06:04:56Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"840","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"p/x/3wMmebvPCd4Um4LIVA\"","sanity-dataset":"production","sanity-document-id":"drafts.gbwTgqOq53YDSh8fvmSYOl","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAsyTz","sanity-transaction-time":"2025-02-21T06:04:56Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"840\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"p/x/3wMmebvPCd4Um4LIVA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAsyTz\",\"sanity-transaction-time\":\"2025-02-21T06:04:56Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.gbwTgqOq53YDSh8fvmSYOl deleted from booking {"user":"Document drafts.gbwTgqOq53YDSh8fvmSYOl deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.gbwTgqOq53YDSh8fvmSYOl deleted from booking"}}
[debug] [2025-02-21T06:04:57.057Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1450.8991ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1450.8991ms"}}
[debug] [2025-02-21T06:04:57.057Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:04:57.057Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:04:57.057Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:04:57.057Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:05:00.107Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:05:00.107Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:05:00.107Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:05:00.107Z"],"workRunningCount":1}
[debug] [2025-02-21T06:05:00.107Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:05:00.107Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:05:00.107Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:05:00.107Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:05:00.108Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:05:00.324Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 216.3835ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 216.3835ms"}}
[debug] [2025-02-21T06:05:00.324Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:05:00.324Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:05:00.324Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:05:00.324Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:05:05.078Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:05:05.078Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:05:05.078Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:05:05.078Z"],"workRunningCount":1}
[debug] [2025-02-21T06:05:05.078Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:05:05.079Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:05:05.079Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:05:05.079Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:05:05.079Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_type":"booking","status":"pending","_createdAt":"2025-02-19T22:09:41Z","_rev":"PgZg2Utec8qie2PjJXwnsL","name":"webHook-For-firebase","bookedPeriod":{"year":"2024/2025","semester":"1st Semester","services":"tst"},"currentLocation":"sdfsfs","age":20,"nationality":"bd","permanentAddress":"tes","_id":"d5cf59db-3e42-4731-ae36-29fad8a49b35","_updatedAt":"2025-02-19T22:10:38Z","bookingDate":"2025-02-19T22:09:16.867Z","currentProfession":"sdfsfsadf","genre":"Male","idNumber":"2515"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_type":"booking","status":"pending","_createdAt":"2025-02-19T22:09:41Z","_rev":"PgZg2Utec8qie2PjJXwnsL","name":"webHook-For-firebase","bookedPeriod":{"year":"2024/2025","semester":"1st Semester","services":"tst"},"currentLocation":"sdfsfs","age":20,"nationality":"bd","permanentAddress":"tes","_id":"d5cf59db-3e42-4731-ae36-29fad8a49b35","_updatedAt":"2025-02-19T22:10:38Z","bookingDate":"2025-02-19T22:09:16.867Z","currentProfession":"sdfsfsadf","genre":"Male","idNumber":"2515"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"_type\":\"booking\",\"status\":\"pending\",\"_createdAt\":\"2025-02-19T22:09:41Z\",\"_rev\":\"PgZg2Utec8qie2PjJXwnsL\",\"name\":\"webHook-For-firebase\",\"bookedPeriod\":{\"year\":\"2024/2025\",\"semester\":\"1st Semester\",\"services\":\"tst\"},\"currentLocation\":\"sdfsfs\",\"age\":20,\"nationality\":\"bd\",\"permanentAddress\":\"tes\",\"_id\":\"d5cf59db-3e42-4731-ae36-29fad8a49b35\",\"_updatedAt\":\"2025-02-19T22:10:38Z\",\"bookingDate\":\"2025-02-19T22:09:16.867Z\",\"currentProfession\":\"sdfsfsadf\",\"genre\":\"Male\",\"idNumber\":\"2515\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"557","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"YyagioK74pYvFAGpsF5mpw\"","sanity-dataset":"production","sanity-document-id":"d5cf59db-3e42-4731-ae36-29fad8a49b35","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmswFz","sanity-transaction-time":"2025-02-21T06:05:05Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"557","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"YyagioK74pYvFAGpsF5mpw\"","sanity-dataset":"production","sanity-document-id":"d5cf59db-3e42-4731-ae36-29fad8a49b35","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmswFz","sanity-transaction-time":"2025-02-21T06:05:05Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"557\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"YyagioK74pYvFAGpsF5mpw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"d5cf59db-3e42-4731-ae36-29fad8a49b35\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvmswFz\",\"sanity-transaction-time\":\"2025-02-21T06:05:05Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document d5cf59db-3e42-4731-ae36-29fad8a49b35 deleted from booking {"user":"Document d5cf59db-3e42-4731-ae36-29fad8a49b35 deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document d5cf59db-3e42-4731-ae36-29fad8a49b35 deleted from booking"}}
[debug] [2025-02-21T06:05:05.483Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 403.6918ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 403.6918ms"}}
[debug] [2025-02-21T06:05:05.483Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:05:05.483Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:05:05.483Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:05:05.483Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:05:07.593Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:05:07.593Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:05:07.594Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:05:07.593Z"],"workRunningCount":1}
[debug] [2025-02-21T06:05:07.594Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:05:07.594Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:05:07.594Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:05:07.594Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:05:07.594Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:05:07.802Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 207.3503ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 207.3503ms"}}
[debug] [2025-02-21T06:05:07.802Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:05:07.802Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:05:07.802Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:05:07.802Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:05:36.122Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:05:36.122Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:05:36.122Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:05:36.122Z"],"workRunningCount":1}
[debug] [2025-02-21T06:05:36.122Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:05:36.124Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:05:36.124Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:05:36.124Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:05:36.124Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:05:36.338Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 213.817ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 213.817ms"}}
[debug] [2025-02-21T06:05:36.338Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:05:36.338Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:05:36.338Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:05:36.338Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:06:04.689Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:06:04.689Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:06:04.689Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:06:04.689Z"],"workRunningCount":1}
[debug] [2025-02-21T06:06:04.689Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:06:04.690Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:06:04.690Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:06:04.690Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:06:04.691Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:06:04.902Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 211.8294ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 211.8294ms"}}
[debug] [2025-02-21T06:06:04.903Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:06:04.903Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:06:04.903Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:06:04.903Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:06:58.367Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:06:58.367Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:06:58.367Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:06:58.367Z"],"workRunningCount":1}
[debug] [2025-02-21T06:06:58.367Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:06:58.369Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:06:58.369Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:06:58.369Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:06:58.369Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:06:58.589Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 219.6284ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 219.6284ms"}}
[debug] [2025-02-21T06:06:58.589Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:06:58.589Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:06:58.589Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:06:58.589Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:07:32.888Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:07:32.888Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:07:32.888Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:07:32.888Z"],"workRunningCount":1}
[debug] [2025-02-21T06:07:32.888Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:07:32.889Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:07:32.889Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:07:32.889Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:07:32.890Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:07:33.101Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 211.169ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 211.169ms"}}
[debug] [2025-02-21T06:07:33.101Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:07:33.101Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:07:33.101Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:07:33.101Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:08:09.824Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:08:09.824Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:08:09.824Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:08:09.824Z"],"workRunningCount":1}
[debug] [2025-02-21T06:08:09.824Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:08:09.825Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:08:09.825Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:08:09.826Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:08:09.826Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:08:10.050Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 223.8563ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 223.8563ms"}}
[debug] [2025-02-21T06:08:10.050Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:08:10.050Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:08:10.050Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:08:10.050Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:08:11.178Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:08:11.178Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:08:11.178Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:08:11.178Z"],"workRunningCount":1}
[debug] [2025-02-21T06:08:11.178Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:08:11.179Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:08:11.179Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:08:11.179Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:08:11.179Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"name":"Elias Emon","bookingDate":"2025-02-21T06:08:09.235Z","_type":"booking","_id":"gbwTgqOq53YDSh8fvmt7Wh","room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"status":"pending","currentProfession":"Studying.........","_createdAt":"2025-02-21T06:08:11Z","notes":"","currentLocation":"","_updatedAt":"2025-02-21T06:08:11Z","permanentAddress":"Dhaka, Bangladesh","genre":"Male","idNumber":"a104ai89","age":"15","bookedPeriod":[{"services":"Weekly room cleaning","semester":"2nd Semester","price":750,"year":"2024/2025"}],"totalPrice":750,"_rev":"gbwTgqOq53YDSh8fvmt7VA","nationality":"Bangladeshi"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"name":"Elias Emon","bookingDate":"2025-02-21T06:08:09.235Z","_type":"booking","_id":"gbwTgqOq53YDSh8fvmt7Wh","room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"status":"pending","currentProfession":"Studying.........","_createdAt":"2025-02-21T06:08:11Z","notes":"","currentLocation":"","_updatedAt":"2025-02-21T06:08:11Z","permanentAddress":"Dhaka, Bangladesh","genre":"Male","idNumber":"a104ai89","age":"15","bookedPeriod":[{"services":"Weekly room cleaning","semester":"2nd Semester","price":750,"year":"2024/2025"}],"totalPrice":750,"_rev":"gbwTgqOq53YDSh8fvmt7VA","nationality":"Bangladeshi"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"name\":\"Elias Emon\",\"bookingDate\":\"2025-02-21T06:08:09.235Z\",\"_type\":\"booking\",\"_id\":\"gbwTgqOq53YDSh8fvmt7Wh\",\"room\":{\"_type\":\"reference\",\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\"},\"status\":\"pending\",\"currentProfession\":\"Studying.........\",\"_createdAt\":\"2025-02-21T06:08:11Z\",\"notes\":\"\",\"currentLocation\":\"\",\"_updatedAt\":\"2025-02-21T06:08:11Z\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"genre\":\"Male\",\"idNumber\":\"a104ai89\",\"age\":\"15\",\"bookedPeriod\":[{\"services\":\"Weekly room cleaning\",\"semester\":\"2nd Semester\",\"price\":750,\"year\":\"2024/2025\"}],\"totalPrice\":750,\"_rev\":\"gbwTgqOq53YDSh8fvmt7VA\",\"nationality\":\"Bangladeshi\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"623","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"0S/sjbOQ0oY3DQ7USJViGA\"","sanity-dataset":"production","sanity-document-id":"gbwTgqOq53YDSh8fvmt7Wh","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmt7VA","sanity-transaction-time":"2025-02-21T06:08:11Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"623","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"0S/sjbOQ0oY3DQ7USJViGA\"","sanity-dataset":"production","sanity-document-id":"gbwTgqOq53YDSh8fvmt7Wh","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmt7VA","sanity-transaction-time":"2025-02-21T06:08:11Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"623\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"0S/sjbOQ0oY3DQ7USJViGA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"gbwTgqOq53YDSh8fvmt7Wh\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvmt7VA\",\"sanity-transaction-time\":\"2025-02-21T06:08:11Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document gbwTgqOq53YDSh8fvmt7Wh updated in booking {"user":"Document gbwTgqOq53YDSh8fvmt7Wh updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document gbwTgqOq53YDSh8fvmt7Wh updated in booking"}}
[debug] [2025-02-21T06:08:11.612Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 433.5189ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 433.5189ms"}}
[debug] [2025-02-21T06:08:11.613Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:08:11.613Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:08:11.613Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:08:11.613Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:09:12.254Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:09:12.254Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:09:12.254Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:09:12.254Z"],"workRunningCount":1}
[debug] [2025-02-21T06:09:12.254Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:09:12.256Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:09:12.256Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:09:12.256Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:09:12.256Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:09:12.475Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 219.2893ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 219.2893ms"}}
[debug] [2025-02-21T06:09:12.476Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:09:12.476Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:09:12.476Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:09:12.476Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:09:44.585Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:09:44.585Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:09:44.586Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:09:44.585Z"],"workRunningCount":1}
[debug] [2025-02-21T06:09:44.586Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:09:44.587Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:09:44.587Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:09:44.587Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:09:44.588Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"currentLocation":"","_id":"drafts.gbwTgqOq53YDSh8fvmt7Wh","notes":"","_rev":"d7ca3aa1-54fb-4511-a688-84c772986064","genre":"Male","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning","_key":"4e5babd946f4ffe7d172130842249129"}],"name":"Elias Emon","idNumber":"a104ai89","age":"15","bookingDate":"2025-02-21T06:08:09.235Z","_updatedAt":"2025-02-21T06:08:11Z","_type":"booking","nationality":"Bangladeshi","_createdAt":"2025-02-21T06:08:11Z","permanentAddress":"Dhaka, Bangladesh","currentProfession":"Studying.........","totalPrice":750,"status":"pending"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"currentLocation":"","_id":"drafts.gbwTgqOq53YDSh8fvmt7Wh","notes":"","_rev":"d7ca3aa1-54fb-4511-a688-84c772986064","genre":"Male","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning","_key":"4e5babd946f4ffe7d172130842249129"}],"name":"Elias Emon","idNumber":"a104ai89","age":"15","bookingDate":"2025-02-21T06:08:09.235Z","_updatedAt":"2025-02-21T06:08:11Z","_type":"booking","nationality":"Bangladeshi","_createdAt":"2025-02-21T06:08:11Z","permanentAddress":"Dhaka, Bangladesh","currentProfession":"Studying.........","totalPrice":750,"status":"pending"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"room\":{\"_type\":\"reference\",\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\"},\"currentLocation\":\"\",\"_id\":\"drafts.gbwTgqOq53YDSh8fvmt7Wh\",\"notes\":\"\",\"_rev\":\"d7ca3aa1-54fb-4511-a688-84c772986064\",\"genre\":\"Male\",\"bookedPeriod\":[{\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\",\"_key\":\"4e5babd946f4ffe7d172130842249129\"}],\"name\":\"Elias Emon\",\"idNumber\":\"a104ai89\",\"age\":\"15\",\"bookingDate\":\"2025-02-21T06:08:09.235Z\",\"_updatedAt\":\"2025-02-21T06:08:11Z\",\"_type\":\"booking\",\"nationality\":\"Bangladeshi\",\"_createdAt\":\"2025-02-21T06:08:11Z\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"currentProfession\":\"Studying.........\",\"totalPrice\":750,\"status\":\"pending\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"686","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"jwezXXqM5hK7FH4iFqqVfQ\"","sanity-dataset":"production","sanity-document-id":"drafts.gbwTgqOq53YDSh8fvmt7Wh","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"d7ca3aa1-54fb-4511-a688-84c772986064","sanity-transaction-time":"2025-02-21T06:09:45Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"686","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"jwezXXqM5hK7FH4iFqqVfQ\"","sanity-dataset":"production","sanity-document-id":"drafts.gbwTgqOq53YDSh8fvmt7Wh","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"d7ca3aa1-54fb-4511-a688-84c772986064","sanity-transaction-time":"2025-02-21T06:09:45Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"686\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"jwezXXqM5hK7FH4iFqqVfQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.gbwTgqOq53YDSh8fvmt7Wh\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"d7ca3aa1-54fb-4511-a688-84c772986064\",\"sanity-transaction-time\":\"2025-02-21T06:09:45Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.gbwTgqOq53YDSh8fvmt7Wh updated in booking {"user":"Document drafts.gbwTgqOq53YDSh8fvmt7Wh updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.gbwTgqOq53YDSh8fvmt7Wh updated in booking"}}
[debug] [2025-02-21T06:09:45.055Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 467.0856ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 467.0856ms"}}
[debug] [2025-02-21T06:09:45.055Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:09:45.055Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:09:45.055Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:09:45.055Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:11.251Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:10:11.251Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:11.251Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:10:11.251Z"],"workRunningCount":1}
[debug] [2025-02-21T06:10:11.251Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:10:11.253Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:10:11.253Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:10:11.253Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:10:11.253Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:10:11.465Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 211.4795ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 211.4795ms"}}
[debug] [2025-02-21T06:10:11.465Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:10:11.465Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:10:11.465Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:10:11.465Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:11.684Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:10:11.683Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:11.684Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:10:11.683Z"],"workRunningCount":1}
[debug] [2025-02-21T06:10:11.684Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:10:11.684Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:10:11.684Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:10:11.684Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:10:11.685Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"bookedPeriods":[{"_key":"a0a62a54d58f","year":"2025/2026","semester":"1st Semester"}],"priceWinter":1500,"priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"_updatedAt":"2025-02-20T23:21:05Z","slug":{"_type":"slug","current":"arroios-room-1"},"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","title":"arroios-room-1","availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_rev":"3fc8863b-628b-4bb4-9ca7-64fb31bdf960","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"roomNumber":1,"roomType":"Single bed","_type":"room"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"bookedPeriods":[{"_key":"a0a62a54d58f","year":"2025/2026","semester":"1st Semester"}],"priceWinter":1500,"priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"_updatedAt":"2025-02-20T23:21:05Z","slug":{"_type":"slug","current":"arroios-room-1"},"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","title":"arroios-room-1","availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_rev":"3fc8863b-628b-4bb4-9ca7-64fb31bdf960","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"roomNumber":1,"roomType":"Single bed","_type":"room"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"bookedPeriods\":[{\"_key\":\"a0a62a54d58f\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"}],\"priceWinter\":1500,\"priceSummer\":399,\"_createdAt\":\"2025-02-19T14:46:30Z\",\"isAvailable\":true,\"_updatedAt\":\"2025-02-20T23:21:05Z\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"title\":\"arroios-room-1\",\"availableSemesters\":[{\"year\":\"2024/2025\",\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\"},{\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_rev\":\"3fc8863b-628b-4bb4-9ca7-64fb31bdf960\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"roomNumber\":1,\"roomType\":\"Single bed\",\"_type\":\"room\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1860","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"J7kYCB5JiFvZg/IOW195fQ\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"3fc8863b-628b-4bb4-9ca7-64fb31bdf960","sanity-transaction-time":"2025-02-21T06:10:12Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1860","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"J7kYCB5JiFvZg/IOW195fQ\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"3fc8863b-628b-4bb4-9ca7-64fb31bdf960","sanity-transaction-time":"2025-02-21T06:10:12Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1860\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"J7kYCB5JiFvZg/IOW195fQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"3fc8863b-628b-4bb4-9ca7-64fb31bdf960\",\"sanity-transaction-time\":\"2025-02-21T06:10:12Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:10:12.143Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 458.1399ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 458.1399ms"}}
[debug] [2025-02-21T06:10:12.143Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:10:12.143Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:10:12.143Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:10:12.143Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:15.527Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:10:15.527Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:15.527Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:10:15.527Z"],"workRunningCount":1}
[debug] [2025-02-21T06:10:15.527Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:10:15.528Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:10:15.528Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:10:15.528Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:10:15.528Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_createdAt":"2025-02-19T14:46:30Z","_updatedAt":"2025-02-21T06:10:13Z","slug":{"_type":"slug","current":"arroios-room-1"},"isAvailable":true,"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"priceWinter":1500,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"semester":"Both Semesters","_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","_rev":"df39c1c1-f62d-47e8-af48-d535df79c90f","roomType":"Single bed","roomNumber":1,"_type":"room","priceSummer":399,"title":"arroios-room-1"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_createdAt":"2025-02-19T14:46:30Z","_updatedAt":"2025-02-21T06:10:13Z","slug":{"_type":"slug","current":"arroios-room-1"},"isAvailable":true,"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"priceWinter":1500,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"semester":"Both Semesters","_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","_rev":"df39c1c1-f62d-47e8-af48-d535df79c90f","roomType":"Single bed","roomNumber":1,"_type":"room","priceSummer":399,"title":"arroios-room-1"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_createdAt\":\"2025-02-19T14:46:30Z\",\"_updatedAt\":\"2025-02-21T06:10:13Z\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"isAvailable\":true,\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"priceWinter\":1500,\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\"},{\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\"},{\"semester\":\"Both Semesters\",\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_rev\":\"df39c1c1-f62d-47e8-af48-d535df79c90f\",\"roomType\":\"Single bed\",\"roomNumber\":1,\"_type\":\"room\",\"priceSummer\":399,\"title\":\"arroios-room-1\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1773","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"/gRmZxFJ1Tkbj/aw8oNjZg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"df39c1c1-f62d-47e8-af48-d535df79c90f","sanity-transaction-time":"2025-02-21T06:10:13Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1773","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"/gRmZxFJ1Tkbj/aw8oNjZg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"df39c1c1-f62d-47e8-af48-d535df79c90f","sanity-transaction-time":"2025-02-21T06:10:13Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1773\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"/gRmZxFJ1Tkbj/aw8oNjZg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"df39c1c1-f62d-47e8-af48-d535df79c90f\",\"sanity-transaction-time\":\"2025-02-21T06:10:13Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:10:15.977Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 448.804ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 448.804ms"}}
[debug] [2025-02-21T06:10:15.977Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:10:15.977Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:10:15.977Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:10:15.977Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:40.536Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:10:40.536Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:40.536Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:10:40.536Z"],"workRunningCount":1}
[debug] [2025-02-21T06:10:40.536Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:10:40.537Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:10:40.537Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:10:40.537Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:10:40.537Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_id":"gbwTgqOq53YDSh8fvmt7Wh","name":"Elias Emon","_type":"booking","genre":"Male","_createdAt":"2025-02-21T06:08:11Z","_updatedAt":"2025-02-21T06:08:11Z","permanentAddress":"Dhaka, Bangladesh","_rev":"gbwTgqOq53YDSh8fvmt7VA","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"notes":"","idNumber":"a104ai89","bookingDate":"2025-02-21T06:08:09.235Z","nationality":"Bangladeshi","currentLocation":"","totalPrice":750,"bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning"}],"currentProfession":"Studying.........","age":"15","status":"pending"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_id":"gbwTgqOq53YDSh8fvmt7Wh","name":"Elias Emon","_type":"booking","genre":"Male","_createdAt":"2025-02-21T06:08:11Z","_updatedAt":"2025-02-21T06:08:11Z","permanentAddress":"Dhaka, Bangladesh","_rev":"gbwTgqOq53YDSh8fvmt7VA","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"notes":"","idNumber":"a104ai89","bookingDate":"2025-02-21T06:08:09.235Z","nationality":"Bangladeshi","currentLocation":"","totalPrice":750,"bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning"}],"currentProfession":"Studying.........","age":"15","status":"pending"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_id\":\"gbwTgqOq53YDSh8fvmt7Wh\",\"name\":\"Elias Emon\",\"_type\":\"booking\",\"genre\":\"Male\",\"_createdAt\":\"2025-02-21T06:08:11Z\",\"_updatedAt\":\"2025-02-21T06:08:11Z\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"_rev\":\"gbwTgqOq53YDSh8fvmt7VA\",\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"notes\":\"\",\"idNumber\":\"a104ai89\",\"bookingDate\":\"2025-02-21T06:08:09.235Z\",\"nationality\":\"Bangladeshi\",\"currentLocation\":\"\",\"totalPrice\":750,\"bookedPeriod\":[{\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\"}],\"currentProfession\":\"Studying.........\",\"age\":\"15\",\"status\":\"pending\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"623","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Sr3LGkEiCuikxJjh/fIhlw\"","sanity-dataset":"production","sanity-document-id":"gbwTgqOq53YDSh8fvmt7Wh","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5WHe","sanity-transaction-time":"2025-02-21T06:10:32Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"623","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Sr3LGkEiCuikxJjh/fIhlw\"","sanity-dataset":"production","sanity-document-id":"gbwTgqOq53YDSh8fvmt7Wh","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5WHe","sanity-transaction-time":"2025-02-21T06:10:32Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"623\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"Sr3LGkEiCuikxJjh/fIhlw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"gbwTgqOq53YDSh8fvmt7Wh\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWj5WHe\",\"sanity-transaction-time\":\"2025-02-21T06:10:32Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document gbwTgqOq53YDSh8fvmt7Wh deleted from booking {"user":"Document gbwTgqOq53YDSh8fvmt7Wh deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document gbwTgqOq53YDSh8fvmt7Wh deleted from booking"}}
[debug] [2025-02-21T06:10:40.967Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 429.5737ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 429.5737ms"}}
[debug] [2025-02-21T06:10:40.967Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:10:40.967Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:10:40.967Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:10:40.967Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:41.209Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:10:41.208Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:10:41.209Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:10:41.208Z"],"workRunningCount":1}
[debug] [2025-02-21T06:10:41.209Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:10:41.209Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:10:41.209Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:10:41.209Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:10:41.210Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"notes":"","_createdAt":"2025-02-21T06:08:11Z","totalPrice":750,"name":"Elias Emon","genre":"Male","status":"pending","nationality":"Bangladeshi","bookedPeriod":[{"_key":"4e5babd946f4ffe7d172130842249129","year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning"}],"permanentAddress":"Dhaka, Bangladesh","currentProfession":"Studying.........","_id":"drafts.gbwTgqOq53YDSh8fvmt7Wh","idNumber":"a104ai89","_updatedAt":"2025-02-21T06:08:11Z","bookingDate":"2025-02-21T06:08:09.235Z","age":"15","_type":"booking","currentLocation":"","_rev":"d7ca3aa1-54fb-4511-a688-84c772986064"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"notes":"","_createdAt":"2025-02-21T06:08:11Z","totalPrice":750,"name":"Elias Emon","genre":"Male","status":"pending","nationality":"Bangladeshi","bookedPeriod":[{"_key":"4e5babd946f4ffe7d172130842249129","year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning"}],"permanentAddress":"Dhaka, Bangladesh","currentProfession":"Studying.........","_id":"drafts.gbwTgqOq53YDSh8fvmt7Wh","idNumber":"a104ai89","_updatedAt":"2025-02-21T06:08:11Z","bookingDate":"2025-02-21T06:08:09.235Z","age":"15","_type":"booking","currentLocation":"","_rev":"d7ca3aa1-54fb-4511-a688-84c772986064"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"notes\":\"\",\"_createdAt\":\"2025-02-21T06:08:11Z\",\"totalPrice\":750,\"name\":\"Elias Emon\",\"genre\":\"Male\",\"status\":\"pending\",\"nationality\":\"Bangladeshi\",\"bookedPeriod\":[{\"_key\":\"4e5babd946f4ffe7d172130842249129\",\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\"}],\"permanentAddress\":\"Dhaka, Bangladesh\",\"currentProfession\":\"Studying.........\",\"_id\":\"drafts.gbwTgqOq53YDSh8fvmt7Wh\",\"idNumber\":\"a104ai89\",\"_updatedAt\":\"2025-02-21T06:08:11Z\",\"bookingDate\":\"2025-02-21T06:08:09.235Z\",\"age\":\"15\",\"_type\":\"booking\",\"currentLocation\":\"\",\"_rev\":\"d7ca3aa1-54fb-4511-a688-84c772986064\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"686","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"ush6qhkovPIT4Dfmom/ANA\"","sanity-dataset":"production","sanity-document-id":"drafts.gbwTgqOq53YDSh8fvmt7Wh","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5WHe","sanity-transaction-time":"2025-02-21T06:10:32Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"686","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"ush6qhkovPIT4Dfmom/ANA\"","sanity-dataset":"production","sanity-document-id":"drafts.gbwTgqOq53YDSh8fvmt7Wh","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5WHe","sanity-transaction-time":"2025-02-21T06:10:32Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"686\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"ush6qhkovPIT4Dfmom/ANA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.gbwTgqOq53YDSh8fvmt7Wh\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWj5WHe\",\"sanity-transaction-time\":\"2025-02-21T06:10:32Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.gbwTgqOq53YDSh8fvmt7Wh deleted from booking {"user":"Document drafts.gbwTgqOq53YDSh8fvmt7Wh deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.gbwTgqOq53YDSh8fvmt7Wh deleted from booking"}}
[debug] [2025-02-21T06:10:42.625Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1415.1743000000001ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1415.1743000000001ms"}}
[debug] [2025-02-21T06:10:42.625Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:10:42.625Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:10:42.625Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:10:42.625Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:11:09.281Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:11:09.281Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:11:09.281Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:11:09.281Z"],"workRunningCount":1}
[debug] [2025-02-21T06:11:09.281Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:11:09.283Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:11:09.283Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:11:09.283Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:11:09.283Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:11:09.497Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 214.4907ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 214.4907ms"}}
[debug] [2025-02-21T06:11:09.498Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:11:09.498Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:11:09.498Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:11:09.498Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:11:35.870Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:11:35.870Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:11:35.870Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:11:35.870Z"],"workRunningCount":1}
[debug] [2025-02-21T06:11:35.870Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:11:35.871Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:11:35.871Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:11:35.871Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:11:35.872Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"currentProfession":"Studying.........","name":"Elias Emon","nationality":"Bangladeshi","genre":"Male","idNumber":"a104ai89","_rev":"oVMkP0YmhyBGyJroWj5rzI","_id":"oVMkP0YmhyBGyJroWj5s0x","permanentAddress":"Dhaka, Bangladesh","_updatedAt":"2025-02-21T06:11:36Z","bookedPeriod":[{"semester":"Full Year","price":2299,"year":"2024/2025","services":""}],"currentLocation":"","totalPrice":2299,"age":"25","_type":"booking","notes":"","_createdAt":"2025-02-21T06:11:36Z","bookingDate":"2025-02-21T06:11:34.244Z","status":"pending","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"}},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"currentProfession":"Studying.........","name":"Elias Emon","nationality":"Bangladeshi","genre":"Male","idNumber":"a104ai89","_rev":"oVMkP0YmhyBGyJroWj5rzI","_id":"oVMkP0YmhyBGyJroWj5s0x","permanentAddress":"Dhaka, Bangladesh","_updatedAt":"2025-02-21T06:11:36Z","bookedPeriod":[{"semester":"Full Year","price":2299,"year":"2024/2025","services":""}],"currentLocation":"","totalPrice":2299,"age":"25","_type":"booking","notes":"","_createdAt":"2025-02-21T06:11:36Z","bookingDate":"2025-02-21T06:11:34.244Z","status":"pending","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"}},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"currentProfession\":\"Studying.........\",\"name\":\"Elias Emon\",\"nationality\":\"Bangladeshi\",\"genre\":\"Male\",\"idNumber\":\"a104ai89\",\"_rev\":\"oVMkP0YmhyBGyJroWj5rzI\",\"_id\":\"oVMkP0YmhyBGyJroWj5s0x\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"_updatedAt\":\"2025-02-21T06:11:36Z\",\"bookedPeriod\":[{\"semester\":\"Full Year\",\"price\":2299,\"year\":\"2024/2025\",\"services\":\"\"}],\"currentLocation\":\"\",\"totalPrice\":2299,\"age\":\"25\",\"_type\":\"booking\",\"notes\":\"\",\"_createdAt\":\"2025-02-21T06:11:36Z\",\"bookingDate\":\"2025-02-21T06:11:34.244Z\",\"status\":\"pending\",\"room\":{\"_ref\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"_type\":\"reference\"}},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"602","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"vPzrCr44V55VdSmSmLk4qg\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWj5s0x","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5rzI","sanity-transaction-time":"2025-02-21T06:11:36Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"602","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"vPzrCr44V55VdSmSmLk4qg\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWj5s0x","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5rzI","sanity-transaction-time":"2025-02-21T06:11:36Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"602\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"vPzrCr44V55VdSmSmLk4qg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"oVMkP0YmhyBGyJroWj5s0x\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWj5rzI\",\"sanity-transaction-time\":\"2025-02-21T06:11:36Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document oVMkP0YmhyBGyJroWj5s0x updated in booking {"user":"Document oVMkP0YmhyBGyJroWj5s0x updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document oVMkP0YmhyBGyJroWj5s0x updated in booking"}}
[debug] [2025-02-21T06:11:36.292Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 420.6273ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 420.6273ms"}}
[debug] [2025-02-21T06:11:36.292Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:11:36.293Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:11:36.293Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:11:36.293Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:12:38.921Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:12:38.921Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:12:38.922Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:12:38.921Z"],"workRunningCount":1}
[debug] [2025-02-21T06:12:38.922Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:12:38.923Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:12:38.923Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:12:38.923Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:12:38.923Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:12:39.147Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 223.7158ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 223.7158ms"}}
[debug] [2025-02-21T06:12:39.147Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:12:39.147Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:12:39.147Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:12:39.147Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:12:59.097Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:12:59.097Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:12:59.097Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:12:59.097Z"],"workRunningCount":1}
[debug] [2025-02-21T06:12:59.097Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:12:59.099Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:12:59.099Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:12:59.099Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:12:59.099Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"currentLocation":"","status":"pending","name":"Elias Emon","notes":"","bookedPeriod":[{"semester":"Full Year","services":"","year":"2024/2025","price":2299,"_key":"e13eab0b41c4a90b0521829ed6a4047f"}],"room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"nationality":"Bangladeshi","_rev":"581c37fa-0379-46ff-9211-fd05f077645c","genre":"Male","idNumber":"a104ai89","currentProfession":"Studying.........","_type":"booking","age":"25","totalPrice":2299,"_id":"drafts.oVMkP0YmhyBGyJroWj5s0x","_updatedAt":"2025-02-21T06:11:36Z","permanentAddress":"Dhaka, Bangladesh","bookingDate":"2025-02-21T06:11:34.244Z","_createdAt":"2025-02-21T06:11:36Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"currentLocation":"","status":"pending","name":"Elias Emon","notes":"","bookedPeriod":[{"semester":"Full Year","services":"","year":"2024/2025","price":2299,"_key":"e13eab0b41c4a90b0521829ed6a4047f"}],"room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"nationality":"Bangladeshi","_rev":"581c37fa-0379-46ff-9211-fd05f077645c","genre":"Male","idNumber":"a104ai89","currentProfession":"Studying.........","_type":"booking","age":"25","totalPrice":2299,"_id":"drafts.oVMkP0YmhyBGyJroWj5s0x","_updatedAt":"2025-02-21T06:11:36Z","permanentAddress":"Dhaka, Bangladesh","bookingDate":"2025-02-21T06:11:34.244Z","_createdAt":"2025-02-21T06:11:36Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"currentLocation\":\"\",\"status\":\"pending\",\"name\":\"Elias Emon\",\"notes\":\"\",\"bookedPeriod\":[{\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\",\"price\":2299,\"_key\":\"e13eab0b41c4a90b0521829ed6a4047f\"}],\"room\":{\"_ref\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"_type\":\"reference\"},\"nationality\":\"Bangladeshi\",\"_rev\":\"581c37fa-0379-46ff-9211-fd05f077645c\",\"genre\":\"Male\",\"idNumber\":\"a104ai89\",\"currentProfession\":\"Studying.........\",\"_type\":\"booking\",\"age\":\"25\",\"totalPrice\":2299,\"_id\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"_updatedAt\":\"2025-02-21T06:11:36Z\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"bookingDate\":\"2025-02-21T06:11:34.244Z\",\"_createdAt\":\"2025-02-21T06:11:36Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"665","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"/huAHC6ySsbavnO7l1bRVg\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWj5s0x","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"581c37fa-0379-46ff-9211-fd05f077645c","sanity-transaction-time":"2025-02-21T06:12:59Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"665","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"/huAHC6ySsbavnO7l1bRVg\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWj5s0x","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"581c37fa-0379-46ff-9211-fd05f077645c","sanity-transaction-time":"2025-02-21T06:12:59Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"665\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"/huAHC6ySsbavnO7l1bRVg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"581c37fa-0379-46ff-9211-fd05f077645c\",\"sanity-transaction-time\":\"2025-02-21T06:12:59Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.oVMkP0YmhyBGyJroWj5s0x updated in booking {"user":"Document drafts.oVMkP0YmhyBGyJroWj5s0x updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.oVMkP0YmhyBGyJroWj5s0x updated in booking"}}
[debug] [2025-02-21T06:12:59.546Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 447.052ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 447.052ms"}}
[debug] [2025-02-21T06:12:59.547Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:12:59.547Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:12:59.547Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:12:59.547Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:13:28.155Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:13:28.155Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:13:28.155Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:13:28.155Z"],"workRunningCount":1}
[debug] [2025-02-21T06:13:28.155Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:13:28.156Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:13:28.156Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:13:28.156Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:13:28.157Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[debug] [2025-02-21T06:13:28.157Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:13:28.157Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:13:28.155Z"],"workRunningCount":1}
[debug] [2025-02-21T06:13:28.158Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:13:28.155Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:13:28.157Z"],"workRunningCount":2}
[debug] [2025-02-21T06:13:28.158Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:13:28.159Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:13:28.159Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:13:28.159Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:13:28.159Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"year":"2024/2025","semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"_updatedAt":"2025-02-21T06:10:13Z","_rev":"df39c1c1-f62d-47e8-af48-d535df79c90f","_type":"room","title":"arroios-room-1","_createdAt":"2025-02-19T14:46:30Z","priceWinter":1500,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"roomType":"Single bed","roomNumber":1,"isAvailable":true,"priceSummer":399,"slug":{"_type":"slug","current":"arroios-room-1"}},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"year":"2024/2025","semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"_updatedAt":"2025-02-21T06:10:13Z","_rev":"df39c1c1-f62d-47e8-af48-d535df79c90f","_type":"room","title":"arroios-room-1","_createdAt":"2025-02-19T14:46:30Z","priceWinter":1500,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"roomType":"Single bed","roomNumber":1,"isAvailable":true,"priceSummer":399,"slug":{"_type":"slug","current":"arroios-room-1"}},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"availableSemesters\":[{\"year\":\"2024/2025\",\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"year\":\"2024/2025\",\"semester\":\"Full Year\",\"_key\":\"f007205a3d745514755eda33db5cfcca\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\"}],\"_updatedAt\":\"2025-02-21T06:10:13Z\",\"_rev\":\"df39c1c1-f62d-47e8-af48-d535df79c90f\",\"_type\":\"room\",\"title\":\"arroios-room-1\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"priceWinter\":1500,\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"roomType\":\"Single bed\",\"roomNumber\":1,\"isAvailable\":true,\"priceSummer\":399,\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"}},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1773","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"DnI2pvpngU7fo8Pvxi2pRg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5yMg","sanity-transaction-time":"2025-02-21T06:13:28Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1773","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"DnI2pvpngU7fo8Pvxi2pRg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5yMg","sanity-transaction-time":"2025-02-21T06:13:28Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1773\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"DnI2pvpngU7fo8Pvxi2pRg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWj5yMg\",\"sanity-transaction-time\":\"2025-02-21T06:13:28Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:13:28.366Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 206.6664ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 206.6664ms"}}
[debug] [2025-02-21T06:13:28.366Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:13:28.366Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:13:28.366Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:13:28.366Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:13:28.155Z"],"workRunningCount":1}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room"}}
[debug] [2025-02-21T06:13:28.590Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 433.7204ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 433.7204ms"}}
[debug] [2025-02-21T06:13:28.591Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:13:28.591Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:13:28.591Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:13:28.591Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:13:28.831Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:13:28.831Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:13:28.831Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:13:28.831Z"],"workRunningCount":1}
[debug] [2025-02-21T06:13:28.831Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:13:28.832Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:13:28.832Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:13:28.832Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:13:28.832Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"priceWinter":1500,"isAvailable":true,"roomType":"Single bed","slug":{"current":"arroios-room-1","_type":"slug"},"roomNumber":1,"_createdAt":"2025-02-19T14:46:30Z","availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025"},{"year":"2024/2025","semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","title":"arroios-room-1","_rev":"oVMkP0YmhyBGyJroWj5yMg","_type":"room","priceSummer":399,"_updatedAt":"2025-02-21T06:13:28Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"priceWinter":1500,"isAvailable":true,"roomType":"Single bed","slug":{"current":"arroios-room-1","_type":"slug"},"roomNumber":1,"_createdAt":"2025-02-19T14:46:30Z","availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025"},{"year":"2024/2025","semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","title":"arroios-room-1","_rev":"oVMkP0YmhyBGyJroWj5yMg","_type":"room","priceSummer":399,"_updatedAt":"2025-02-21T06:13:28Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"priceWinter\":1500,\"isAvailable\":true,\"roomType\":\"Single bed\",\"slug\":{\"current\":\"arroios-room-1\",\"_type\":\"slug\"},\"roomNumber\":1,\"_createdAt\":\"2025-02-19T14:46:30Z\",\"availableSemesters\":[{\"year\":\"2024/2025\",\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\"},{\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"semester\":\"Both Semesters\",\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\"},{\"year\":\"2024/2025\",\"semester\":\"Full Year\",\"_key\":\"f007205a3d745514755eda33db5cfcca\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"year\":\"2026/2027\",\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\"}],\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"title\":\"arroios-room-1\",\"_rev\":\"oVMkP0YmhyBGyJroWj5yMg\",\"_type\":\"room\",\"priceSummer\":399,\"_updatedAt\":\"2025-02-21T06:13:28Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1752","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"moDMq9lAbjOsxrg3mtuzpg\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5yMg","sanity-transaction-time":"2025-02-21T06:13:28Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1752","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"moDMq9lAbjOsxrg3mtuzpg\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj5yMg","sanity-transaction-time":"2025-02-21T06:13:28Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1752\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"moDMq9lAbjOsxrg3mtuzpg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWj5yMg\",\"sanity-transaction-time\":\"2025-02-21T06:13:28Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:13:30.220Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1387.4551999999999ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1387.4551999999999ms"}}
[debug] [2025-02-21T06:13:30.220Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:13:30.220Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:13:30.220Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:13:30.220Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:14:14.281Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:14:14.281Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:14:14.281Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:14:14.281Z"],"workRunningCount":1}
[debug] [2025-02-21T06:14:14.281Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:14:14.282Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:14:14.282Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:14:14.282Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:14:14.283Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"bookingDate":"2025-02-21T06:14:13.189Z","currentProfession":"","permanentAddress":"","name":"","age":0,"status":"pending","room":{"_type":"reference","_ref":"67fae916-4330-467c-9115-1e7f4fb0b368"},"_type":"booking","_createdAt":"2025-02-21T06:14:15Z","notes":"","totalPrice":850,"nationality":"","currentLocation":"","idNumber":"","_updatedAt":"2025-02-21T06:14:15Z","_rev":"se7euW5U96P9qJ0OGAtdiq","_id":"se7euW5U96P9qJ0OGAtdkD","bookedPeriod":[{"semester":"1st Semester","price":850,"year":"2025/2026","services":""}],"genre":""},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"bookingDate":"2025-02-21T06:14:13.189Z","currentProfession":"","permanentAddress":"","name":"","age":0,"status":"pending","room":{"_type":"reference","_ref":"67fae916-4330-467c-9115-1e7f4fb0b368"},"_type":"booking","_createdAt":"2025-02-21T06:14:15Z","notes":"","totalPrice":850,"nationality":"","currentLocation":"","idNumber":"","_updatedAt":"2025-02-21T06:14:15Z","_rev":"se7euW5U96P9qJ0OGAtdiq","_id":"se7euW5U96P9qJ0OGAtdkD","bookedPeriod":[{"semester":"1st Semester","price":850,"year":"2025/2026","services":""}],"genre":""},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"bookingDate\":\"2025-02-21T06:14:13.189Z\",\"currentProfession\":\"\",\"permanentAddress\":\"\",\"name\":\"\",\"age\":0,\"status\":\"pending\",\"room\":{\"_type\":\"reference\",\"_ref\":\"67fae916-4330-467c-9115-1e7f4fb0b368\"},\"_type\":\"booking\",\"_createdAt\":\"2025-02-21T06:14:15Z\",\"notes\":\"\",\"totalPrice\":850,\"nationality\":\"\",\"currentLocation\":\"\",\"idNumber\":\"\",\"_updatedAt\":\"2025-02-21T06:14:15Z\",\"_rev\":\"se7euW5U96P9qJ0OGAtdiq\",\"_id\":\"se7euW5U96P9qJ0OGAtdkD\",\"bookedPeriod\":[{\"semester\":\"1st Semester\",\"price\":850,\"year\":\"2025/2026\",\"services\":\"\"}],\"genre\":\"\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"533","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"59HJxCZOW11doEfDwPa+Ww\"","sanity-dataset":"production","sanity-document-id":"se7euW5U96P9qJ0OGAtdkD","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAtdiq","sanity-transaction-time":"2025-02-21T06:14:15Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"533","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"59HJxCZOW11doEfDwPa+Ww\"","sanity-dataset":"production","sanity-document-id":"se7euW5U96P9qJ0OGAtdkD","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAtdiq","sanity-transaction-time":"2025-02-21T06:14:15Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"533\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"59HJxCZOW11doEfDwPa+Ww\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"se7euW5U96P9qJ0OGAtdkD\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAtdiq\",\"sanity-transaction-time\":\"2025-02-21T06:14:15Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document se7euW5U96P9qJ0OGAtdkD updated in booking {"user":"Document se7euW5U96P9qJ0OGAtdkD updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document se7euW5U96P9qJ0OGAtdkD updated in booking"}}
[debug] [2025-02-21T06:14:14.715Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 432.5402ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 432.5402ms"}}
[debug] [2025-02-21T06:14:14.715Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: IDLE"}}
[debug] [2025-02-21T06:14:14.715Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:14:14.715Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:14:14.715Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:14:51.931Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:14:51.931Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:14:51.931Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:14:51.931Z"],"workRunningCount":1}
[debug] [2025-02-21T06:14:51.931Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:14:51.932Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:14:51.933Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:14:51.933Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:14:51.933Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:14:52.159Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 226.4762ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 226.4762ms"}}
[debug] [2025-02-21T06:14:52.160Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:14:52.160Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:14:52.160Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:14:52.160Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:16:01.297Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:16:01.297Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:16:01.297Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:16:01.297Z"],"workRunningCount":1}
[debug] [2025-02-21T06:16:01.297Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:16:01.298Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:16:01.298Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:16:01.298Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:16:01.299Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:16:01.512Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 213.5442ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 213.5442ms"}}
[debug] [2025-02-21T06:16:01.513Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:16:01.513Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:16:01.513Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:16:01.513Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:16:50.966Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:16:50.966Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:16:50.966Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:16:50.966Z"],"workRunningCount":1}
[debug] [2025-02-21T06:16:50.966Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:16:50.967Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:16:50.967Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:16:50.967Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:16:50.967Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:214:37\n    at Array.map (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'toString')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:214:37\\n    at Array.map (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:16:51.180Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 213.0661ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 213.0661ms"}}
[debug] [2025-02-21T06:16:51.181Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: IDLE"}}
[debug] [2025-02-21T06:16:51.181Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:16:51.181Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:16:51.181Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:17:54.153Z] File D:\Freelance-Project\ossama\street-lobby\functions\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js changed, reloading triggers"}}
[debug] [2025-02-21T06:17:55.166Z] Validating nodejs source
[debug] [2025-02-21T06:17:56.270Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T06:17:56.271Z] Building nodejs source
[debug] [2025-02-21T06:17:56.271Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:17:56.272Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T06:17:56.276Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8850

[debug] [2025-02-21T06:17:56.889Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[debug] [2025-02-21T06:18:01.909Z] [worker-pool] Shutting down IDLE worker (us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T06:18:01.909Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: FINISHING"}}
[debug] [2025-02-21T06:18:01.909Z] [worker-pool] Shutting down IDLE worker (us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-sanityWebhook)"}}
[debug] [2025-02-21T06:18:01.909Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: FINISHING"}}
[debug] [2025-02-21T06:18:01.917Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: exited"}}
[debug] [2025-02-21T06:18:01.917Z] [worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98ab78a8-a2f8-41ab-8169-47e6ec815fab]: FINISHED"}}
[debug] [2025-02-21T06:18:01.917Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: exited"}}
[debug] [2025-02-21T06:18:01.917Z] [worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-ae28f728-442d-4b9f-9a76-8d2021110455]: FINISHED"}}
[debug] [2025-02-21T06:18:11.408Z] File D:\Freelance-Project\ossama\street-lobby\functions\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js changed, reloading triggers"}}
[debug] [2025-02-21T06:18:12.423Z] Validating nodejs source
[debug] [2025-02-21T06:18:13.371Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T06:18:13.371Z] Building nodejs source
[debug] [2025-02-21T06:18:13.371Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:18:13.372Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T06:18:13.377Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8090

[debug] [2025-02-21T06:18:14.009Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[debug] [2025-02-21T06:18:18.532Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:18.531Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:18.532Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:18.531Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:18.532Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:18.533Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:18.533Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:18.533Z] [worker-pool] Cleaned up workers for us-central1-handleBookingUpdate: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-handleBookingUpdate: 1 --> 0"}}
[debug] [2025-02-21T06:18:18.533Z] [worker-pool] Cleaned up workers for us-central1-sanityWebhook: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sanityWebhook: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:18:18.538Z] [worker-pool] addWorker(us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T06:18:18.538Z] [worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1"}}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[info] >  (node:17532) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:17532) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:17532) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T06:18:19.683Z] [runtime-status] [17532] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:19.684Z] [runtime-status] [17532] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:19.684Z] [runtime-status] [17532] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T06:18:19.685Z] [runtime-status] [17532] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:19.943Z] [runtime-status] [17532] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T06:18:19.943Z] [runtime-status] [17532] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T06:18:19.944Z] [runtime-status] [17532] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:19.947Z] [runtime-status] [17532] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:19.949Z] [runtime-status] [17532] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:19.949Z] [runtime-status] [17532] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T06:18:20.121Z] [runtime-status] [17532] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T06:18:20.129Z] [runtime-status] [17532] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T06:18:20.130Z] [runtime-status] [17532] Listening to port: \\?\pipe\fire_emu_0d3a8236fe067811 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [17532] Listening to port: \\\\?\\pipe\\fire_emu_0d3a8236fe067811"}}
[debug] [2025-02-21T06:18:20.164Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:20.165Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:20.165Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/221e3097-7d28-45b3-b2b3-3bb55c123ba6"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/221e3097-7d28-45b3-b2b3-3bb55c123ba6\"\n - Be careful, this may be a production service."}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2024/2025","services":""},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2025/2026","services":""},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","year":"2026/2027","services":""}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2024/2025","services":""},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2025/2026","services":""},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","year":"2026/2027","services":""}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"year\":\"2024/2025\",\"services\":\"\"},{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\",\"services\":\"\"},{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"Both Semesters\",\"year\":\"2026/2027\",\"services\":\"\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/mutate/production?returnIds=true&returnDocuments=true&visibility=sync"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/mutate/production?returnIds=true&returnDocuments=true&visibility=sync\"\n - Be careful, this may be a production service."}}
[debug] [2025-02-21T06:18:22.193Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 2028.637ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 2028.637ms"}}
[debug] [2025-02-21T06:18:22.194Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:22.194Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:22.194Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:22.194Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:22.365Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:22.365Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:22.365Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:18:22.365Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:22.365Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:18:22.370Z] [worker-pool] addWorker(us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sanityWebhook)"}}
[debug] [2025-02-21T06:18:22.370Z] [worker-pool] Adding worker with key us-central1-sanityWebhook, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sanityWebhook, total=1"}}
[debug] [2025-02-21T06:18:22.407Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:22.407Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:22.407Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:22.407Z"],"workRunningCount":2}
[debug] [2025-02-21T06:18:22.407Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:22.408Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:22.408Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:22.408Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:22.408Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2025/2026"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","services":"","year":"2026/2027"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2024/2025","services":""},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2025/2026","services":""},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","year":"2026/2027","services":""}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2025/2026"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","services":"","year":"2026/2027"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2024/2025","services":""},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2025/2026","services":""},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","year":"2026/2027","services":""}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2025/2026\"},{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"Both Semesters\",\"services\":\"\",\"year\":\"2026/2027\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"year\":\"2024/2025\",\"services\":\"\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\",\"services\":\"\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"Both Semesters\",\"year\":\"2026/2027\",\"services\":\"\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[debug] [2025-02-21T06:18:23.301Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 892.9696ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 892.9696ms"}}
[debug] [2025-02-21T06:18:23.302Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:23.302Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:23.302Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:23.302Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[info] >  (node:10836) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:10836) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:10836) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T06:18:23.479Z] [runtime-status] [10836] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:23.480Z] [runtime-status] [10836] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:23.481Z] [runtime-status] [10836] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T06:18:23.481Z] [runtime-status] [10836] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:23.508Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:23.508Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:23.508Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:23.508Z"],"workRunningCount":2}
[debug] [2025-02-21T06:18:23.508Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:23.508Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:23.508Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:23.508Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:23.509Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2025/2026"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","services":"","year":"2026/2027"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2024/2025"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2025/2026"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","services":"","year":"2026/2027"}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2025/2026"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","services":"","year":"2026/2027"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2024/2025"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2025/2026"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","services":"","year":"2026/2027"}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2025/2026\"},{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"Both Semesters\",\"services\":\"\",\"year\":\"2026/2027\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2025/2026\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"Both Semesters\",\"services\":\"\",\"year\":\"2026/2027\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[debug] [2025-02-21T06:18:23.743Z] [runtime-status] [10836] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T06:18:23.743Z] [runtime-status] [10836] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T06:18:23.743Z] [runtime-status] [10836] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:23.747Z] [runtime-status] [10836] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:23.749Z] [runtime-status] [10836] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:18:23.749Z] [runtime-status] [10836] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T06:18:23.918Z] [runtime-status] [10836] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T06:18:23.925Z] [runtime-status] [10836] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T06:18:23.925Z] [runtime-status] [10836] Listening to port: \\?\pipe\fire_emu_6bf113b854618bd8 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [10836] Listening to port: \\\\?\\pipe\\fire_emu_6bf113b854618bd8"}}
[debug] [2025-02-21T06:18:24.018Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:18:24.018Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:18:24.019Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_createdAt":"2025-02-19T14:46:30Z","availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_updatedAt":"2025-02-21T06:18:22Z","priceSummer":399,"isAvailable":true,"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"priceWinter":1500,"_rev":"oVMkP0YmhyBGyJroWj6XHL","bookedPeriods":[{"services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2024/2025"},{"services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2025/2026"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","year":"2026/2027","services":""}],"slug":{"_type":"slug","current":"arroios-room-1"},"roomType":"Single bed","roomNumber":1,"title":"arroios-room-1","_type":"room","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_createdAt":"2025-02-19T14:46:30Z","availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_updatedAt":"2025-02-21T06:18:22Z","priceSummer":399,"isAvailable":true,"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"priceWinter":1500,"_rev":"oVMkP0YmhyBGyJroWj6XHL","bookedPeriods":[{"services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2024/2025"},{"services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2025/2026"},{"keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"Both Semesters","year":"2026/2027","services":""}],"slug":{"_type":"slug","current":"arroios-room-1"},"roomType":"Single bed","roomNumber":1,"title":"arroios-room-1","_type":"room","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_createdAt\":\"2025-02-19T14:46:30Z\",\"availableSemesters\":[{\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"semester\":\"1st Semester\",\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\"},{\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_updatedAt\":\"2025-02-21T06:18:22Z\",\"priceSummer\":399,\"isAvailable\":true,\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"priceWinter\":1500,\"_rev\":\"oVMkP0YmhyBGyJroWj6XHL\",\"bookedPeriods\":[{\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"year\":\"2024/2025\"},{\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\"},{\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"Both Semesters\",\"year\":\"2026/2027\",\"services\":\"\"}],\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"roomType\":\"Single bed\",\"roomNumber\":1,\"title\":\"arroios-room-1\",\"_type\":\"room\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2096","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"nMb5oiyXumFHyQA3Ld+EqQ\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj6XHL","sanity-transaction-time":"2025-02-21T06:18:22Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2096","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"nMb5oiyXumFHyQA3Ld+EqQ\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWj6XHL","sanity-transaction-time":"2025-02-21T06:18:22Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2096\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"nMb5oiyXumFHyQA3Ld+EqQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWj6XHL\",\"sanity-transaction-time\":\"2025-02-21T06:18:22Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[debug] [2025-02-21T06:18:25.028Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1519.2562ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1519.2562ms"}}
[debug] [2025-02-21T06:18:25.028Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:25.028Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:25.028Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:25.028Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:25.235Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:25.235Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:25.235Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:25.235Z"],"workRunningCount":2}
[debug] [2025-02-21T06:18:25.235Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:25.236Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:25.236Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:25.236Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:25.236Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:25.450Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 213.5911ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 213.5911ms"}}
[debug] [2025-02-21T06:18:25.450Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:25.450Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:25.450Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:25.450Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:26.211Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:26.211Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:26.211Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:26.211Z"],"workRunningCount":2}
[debug] [2025-02-21T06:18:26.211Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:26.211Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:26.211Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:26.211Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:26.212Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:26.444Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 232.885ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 232.885ms"}}
[debug] [2025-02-21T06:18:26.445Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:26.445Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:26.445Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:26.445Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:22.365Z"],"workRunningCount":1}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:18:26.747Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 2728.5366ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 2728.5366ms"}}
[debug] [2025-02-21T06:18:26.747Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:18:26.747Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:26.748Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:26.748Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:26.959Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:26.959Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:26.959Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:26.959Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:26.959Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:18:26.960Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:26.960Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:18:26.960Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:18:26.960Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"year":"2024/2025","semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","slug":{"_type":"slug","current":"arroios-room-1"},"_rev":"se7euW5U96P9qJ0OGAu5fk","title":"arroios-room-1","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_updatedAt":"2025-02-21T06:18:24Z","priceWinter":1500,"_type":"room","roomNumber":1,"bookedPeriods":[{"semester":"2nd Semester","services":"","year":"2024/2025","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"services":"","year":"2025/2026","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester"},{"semester":"Both Semesters","services":"","year":"2026/2027","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"semester":"2nd Semester","year":"2024/2025","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2025/2026","services":""},{"semester":"Both Semesters","year":"2026/2027","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"priceSummer":399,"roomType":"Single bed","isAvailable":true,"_createdAt":"2025-02-19T14:46:30Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"year":"2024/2025","semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","slug":{"_type":"slug","current":"arroios-room-1"},"_rev":"se7euW5U96P9qJ0OGAu5fk","title":"arroios-room-1","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_updatedAt":"2025-02-21T06:18:24Z","priceWinter":1500,"_type":"room","roomNumber":1,"bookedPeriods":[{"semester":"2nd Semester","services":"","year":"2024/2025","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"services":"","year":"2025/2026","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester"},{"semester":"Both Semesters","services":"","year":"2026/2027","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"semester":"2nd Semester","year":"2024/2025","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","year":"2025/2026","services":""},{"semester":"Both Semesters","year":"2026/2027","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"priceSummer":399,"roomType":"Single bed","isAvailable":true,"_createdAt":"2025-02-19T14:46:30Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"year\":\"2024/2025\",\"semester\":\"Full Year\",\"_key\":\"f007205a3d745514755eda33db5cfcca\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"year\":\"2026/2027\",\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\"}],\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_rev\":\"se7euW5U96P9qJ0OGAu5fk\",\"title\":\"arroios-room-1\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_updatedAt\":\"2025-02-21T06:18:24Z\",\"priceWinter\":1500,\"_type\":\"room\",\"roomNumber\":1,\"bookedPeriods\":[{\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2024/2025\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"services\":\"\",\"year\":\"2025/2026\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\"},{\"semester\":\"Both Semesters\",\"services\":\"\",\"year\":\"2026/2027\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"semester\":\"2nd Semester\",\"year\":\"2024/2025\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\",\"services\":\"\"},{\"semester\":\"Both Semesters\",\"year\":\"2026/2027\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"}],\"priceSummer\":399,\"roomType\":\"Single bed\",\"isAvailable\":true,\"_createdAt\":\"2025-02-19T14:46:30Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2401","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"jub7ZtR+sOx0lr/EgHiRvA\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAu5fk","sanity-transaction-time":"2025-02-21T06:18:24Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2401","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"jub7ZtR+sOx0lr/EgHiRvA\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAu5fk","sanity-transaction-time":"2025-02-21T06:18:24Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2401\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"jub7ZtR+sOx0lr/EgHiRvA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAu5fk\",\"sanity-transaction-time\":\"2025-02-21T06:18:24Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T06:18:27.030Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:27.030Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:26.959Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:27.030Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:26.959Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:27.030Z"],"workRunningCount":2}
[debug] [2025-02-21T06:18:27.030Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:27.030Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:27.030Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:27.030Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:27.031Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:27.258Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 227.6274ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 227.6274ms"}}
[debug] [2025-02-21T06:18:27.258Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:27.259Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:27.259Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:27.259Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:26.959Z"],"workRunningCount":1}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:18:27.422Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 461.5508ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 461.5508ms"}}
[debug] [2025-02-21T06:18:27.422Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:18:27.422Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:27.422Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:27.422Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:27.628Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:27.628Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:27.628Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:27.628Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:27.628Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:18:27.628Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:27.629Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:18:27.629Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:18:27.629Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_rev":"se7euW5U96P9qJ0OGAu5tS","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"priceSummer":399,"property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"},"slug":{"_type":"slug","current":"arroios-room-1"},"_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"_updatedAt":"2025-02-21T06:18:24Z","bookedPeriods":[{"semester":"2nd Semester","services":"","year":"2024/2025","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"semester":"2nd Semester","services":"","year":"2025/2026","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"semester":"Both Semesters","services":"","year":"2026/2027","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2024/2025"},{"semester":"2nd Semester","services":"","year":"2025/2026","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"semester":"Both Semesters","services":"","year":"2026/2027","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"title":"arroios-room-1","roomType":"Single bed","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomNumber":1,"priceWinter":1500,"_type":"room"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_rev":"se7euW5U96P9qJ0OGAu5tS","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"priceSummer":399,"property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"},"slug":{"_type":"slug","current":"arroios-room-1"},"_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"_updatedAt":"2025-02-21T06:18:24Z","bookedPeriods":[{"semester":"2nd Semester","services":"","year":"2024/2025","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"semester":"2nd Semester","services":"","year":"2025/2026","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"semester":"Both Semesters","services":"","year":"2026/2027","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","semester":"2nd Semester","services":"","year":"2024/2025"},{"semester":"2nd Semester","services":"","year":"2025/2026","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"semester":"Both Semesters","services":"","year":"2026/2027","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"title":"arroios-room-1","roomType":"Single bed","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomNumber":1,"priceWinter":1500,"_type":"room"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_rev\":\"se7euW5U96P9qJ0OGAu5tS\",\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"semester\":\"1st Semester\",\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\"},{\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\"},{\"year\":\"2026/2027\",\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\"}],\"priceSummer\":399,\"property\":{\"_type\":\"reference\",\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\"},\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_createdAt\":\"2025-02-19T14:46:30Z\",\"isAvailable\":true,\"_updatedAt\":\"2025-02-21T06:18:24Z\",\"bookedPeriods\":[{\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2024/2025\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2025/2026\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"semester\":\"Both Semesters\",\"services\":\"\",\"year\":\"2026/2027\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2024/2025\"},{\"semester\":\"2nd Semester\",\"services\":\"\",\"year\":\"2025/2026\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"},{\"semester\":\"Both Semesters\",\"services\":\"\",\"year\":\"2026/2027\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"}],\"title\":\"arroios-room-1\",\"roomType\":\"Single bed\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"roomNumber\":1,\"priceWinter\":1500,\"_type\":\"room\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2401","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"cO1wIGJy2Pqz8tLtTcy/2g\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAu5tS","sanity-transaction-time":"2025-02-21T06:18:25Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2401","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"cO1wIGJy2Pqz8tLtTcy/2g\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAu5tS","sanity-transaction-time":"2025-02-21T06:18:25Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2401\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"cO1wIGJy2Pqz8tLtTcy/2g\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAu5tS\",\"sanity-transaction-time\":\"2025-02-21T06:18:25Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:18:29.030Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1401.392ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1401.392ms"}}
[debug] [2025-02-21T06:18:29.030Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:18:29.031Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:29.031Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:29.031Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:29.132Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:29.132Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:29.132Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:29.132Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:29.132Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:29.133Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:29.133Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:29.133Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:29.133Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[debug] [2025-02-21T06:18:29.236Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:29.236Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:29.132Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:29.236Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:29.132Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:29.236Z"],"workRunningCount":2}
[debug] [2025-02-21T06:18:29.236Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:18:29.237Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:29.237Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:18:29.237Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:18:29.237Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_rev":"691f7705-dca4-4805-b9b9-1e565828d68a","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"_type":"room","priceWinter":1500,"title":"arroios-room-1","isAvailable":true,"priceSummer":399,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","_updatedAt":"2025-02-21T06:18:24Z","roomNumber":1,"bookedPeriods":[{"year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"2cd6f2ebde15791dbebd13cae2a20172"},{"semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"783403f48c82fd20743d5617146148d0","year":"2025/2026"},{"semester":"Both Semesters","_key":"b095af6b2ea62089b19d04747d22d0f4","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","year":"2026/2027"},{"services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","year":"2024/2025","semester":"2nd Semester","_key":"5014a1e4ae202bef507b295e42c123b5"},{"semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":""}],"roomType":"Single bed","slug":{"_type":"slug","current":"arroios-room-1"},"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_createdAt":"2025-02-19T14:46:30Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_rev":"691f7705-dca4-4805-b9b9-1e565828d68a","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"_type":"room","priceWinter":1500,"title":"arroios-room-1","isAvailable":true,"priceSummer":399,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","_updatedAt":"2025-02-21T06:18:24Z","roomNumber":1,"bookedPeriods":[{"year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"2cd6f2ebde15791dbebd13cae2a20172"},{"semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"783403f48c82fd20743d5617146148d0","year":"2025/2026"},{"semester":"Both Semesters","_key":"b095af6b2ea62089b19d04747d22d0f4","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","year":"2026/2027"},{"services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","year":"2024/2025","semester":"2nd Semester","_key":"5014a1e4ae202bef507b295e42c123b5"},{"semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":""}],"roomType":"Single bed","slug":{"_type":"slug","current":"arroios-room-1"},"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_createdAt":"2025-02-19T14:46:30Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_rev\":\"691f7705-dca4-4805-b9b9-1e565828d68a\",\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"semester\":\"1st Semester\",\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"year\":\"2026/2027\",\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\"}],\"_type\":\"room\",\"priceWinter\":1500,\"title\":\"arroios-room-1\",\"isAvailable\":true,\"priceSummer\":399,\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_updatedAt\":\"2025-02-21T06:18:24Z\",\"roomNumber\":1,\"bookedPeriods\":[{\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"2cd6f2ebde15791dbebd13cae2a20172\"},{\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"783403f48c82fd20743d5617146148d0\",\"year\":\"2025/2026\"},{\"semester\":\"Both Semesters\",\"_key\":\"b095af6b2ea62089b19d04747d22d0f4\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"year\":\"2026/2027\"},{\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"_key\":\"5014a1e4ae202bef507b295e42c123b5\"},{\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"7e429f7d87046bed1d9d2807fe72251c\",\"year\":\"2025/2026\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"2c55a7df999a0e5ca69fc57dc9dbf05b\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\"}],\"roomType\":\"Single bed\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_createdAt\":\"2025-02-19T14:46:30Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2674","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"5f4/afyZa6wk1pjML1x3hg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"691f7705-dca4-4805-b9b9-1e565828d68a","sanity-transaction-time":"2025-02-21T06:18:26Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2674","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"5f4/afyZa6wk1pjML1x3hg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"691f7705-dca4-4805-b9b9-1e565828d68a","sanity-transaction-time":"2025-02-21T06:18:26Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2674\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"5f4/afyZa6wk1pjML1x3hg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"691f7705-dca4-4805-b9b9-1e565828d68a\",\"sanity-transaction-time\":\"2025-02-21T06:18:26Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:29.444Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 310.8553ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 310.8553ms"}}
[debug] [2025-02-21T06:18:29.444Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:29.444Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:29.444Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:29.444Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:18:29.236Z"],"workRunningCount":1}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:18:29.698Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 461.1285ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 461.1285ms"}}
[debug] [2025-02-21T06:18:29.698Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:18:29.698Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:29.699Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:29.699Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:31.206Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:31.206Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:31.206Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:31.206Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:31.206Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:31.207Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:31.207Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:31.207Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:31.207Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:31.421Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 214.3844ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 214.3844ms"}}
[debug] [2025-02-21T06:18:31.422Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:31.422Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:31.422Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:31.422Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:34.329Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:34.329Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:34.329Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:34.329Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:34.329Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:34.329Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:34.330Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:34.330Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:34.330Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:34.542Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 212.2508ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 212.2508ms"}}
[debug] [2025-02-21T06:18:34.542Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:34.542Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:34.542Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:34.542Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:37.162Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:37.162Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:37.162Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:37.162Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:37.162Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:37.163Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:37.163Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:37.163Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:37.163Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:37.379Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 215.6838ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 215.6838ms"}}
[debug] [2025-02-21T06:18:37.379Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:37.379Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:37.379Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:37.379Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:40.780Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:40.780Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:40.780Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:40.780Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:40.780Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:40.780Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:40.781Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:40.781Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:40.781Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:40.997Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 215.7765ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 215.7765ms"}}
[debug] [2025-02-21T06:18:40.997Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:40.997Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:40.997Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:40.997Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:46.621Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:46.621Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:18:46.622Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:18:46.621Z"],"workRunningCount":1}
[debug] [2025-02-21T06:18:46.622Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:18:46.623Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:18:46.623Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:18:46.623Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:18:46.623Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:18:46.844Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 220.8266ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 220.8266ms"}}
[debug] [2025-02-21T06:18:46.844Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:18:46.844Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:18:46.844Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:18:46.844Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:19:03.758Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:19:03.758Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:19:03.758Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:19:03.758Z"],"workRunningCount":1}
[debug] [2025-02-21T06:19:03.758Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:19:03.759Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:19:03.759Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:19:03.759Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:19:03.760Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:19:04.037Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 277.8264ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 277.8264ms"}}
[debug] [2025-02-21T06:19:04.038Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:19:04.038Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:19:04.038Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:19:04.038Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:19:27.685Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:19:27.685Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:19:27.685Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:19:27.685Z"],"workRunningCount":1}
[debug] [2025-02-21T06:19:27.685Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:19:27.687Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:19:27.687Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:19:27.687Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:19:27.687Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:19:27.913Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 225.6713ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 225.6713ms"}}
[debug] [2025-02-21T06:19:27.913Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:19:27.913Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:19:27.913Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:19:27.913Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:19:51.263Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:19:51.263Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:19:51.263Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:19:51.263Z"],"workRunningCount":1}
[debug] [2025-02-21T06:19:51.263Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:19:51.264Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:19:51.264Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:19:51.264Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:19:51.264Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:19:51.483Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 218.4786ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 218.4786ms"}}
[debug] [2025-02-21T06:19:51.483Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:19:51.483Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:19:51.483Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:19:51.483Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:20:18.329Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:20:18.329Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:20:18.330Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:20:18.329Z"],"workRunningCount":1}
[debug] [2025-02-21T06:20:18.330Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:20:18.331Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:20:18.331Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:20:18.331Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:20:18.331Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:20:18.555Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 223.8923ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 223.8923ms"}}
[debug] [2025-02-21T06:20:18.555Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:20:18.555Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:20:18.555Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:20:18.555Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:21:00.829Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:21:00.829Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:21:00.829Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:21:00.829Z"],"workRunningCount":1}
[debug] [2025-02-21T06:21:00.829Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:21:00.830Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:21:00.830Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:21:00.830Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:21:00.831Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:21:01.066Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 235.4984ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 235.4984ms"}}
[debug] [2025-02-21T06:21:01.066Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:21:01.066Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:21:01.066Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:21:01.067Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:21:34.318Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:21:34.318Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:21:34.318Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:21:34.318Z"],"workRunningCount":1}
[debug] [2025-02-21T06:21:34.318Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:21:34.319Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:21:34.319Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:21:34.319Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:21:34.319Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:21:34.521Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 202.1482ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 202.1482ms"}}
[debug] [2025-02-21T06:21:34.522Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:21:34.522Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:21:34.522Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:21:34.522Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:22:05.780Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:22:05.780Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:22:05.780Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:22:05.780Z"],"workRunningCount":1}
[debug] [2025-02-21T06:22:05.780Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:22:05.781Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:22:05.782Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:22:05.782Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:22:05.782Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:22:06.424Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 641.7779ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 641.7779ms"}}
[debug] [2025-02-21T06:22:06.424Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:22:06.424Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:22:06.424Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:22:06.424Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:23:34.697Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:23:34.697Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:23:34.697Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:23:34.697Z"],"workRunningCount":1}
[debug] [2025-02-21T06:23:34.697Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:23:34.698Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:23:34.698Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:23:34.698Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:23:34.699Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:23:34.907Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 208.4281ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 208.4281ms"}}
[debug] [2025-02-21T06:23:34.907Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:23:34.907Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:23:34.907Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:23:34.907Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:24:06.615Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:24:06.615Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:24:06.615Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:24:06.615Z"],"workRunningCount":1}
[debug] [2025-02-21T06:24:06.615Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:24:06.616Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:24:06.616Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:24:06.616Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:24:06.617Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:24:06.833Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 216.0796ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 216.0796ms"}}
[debug] [2025-02-21T06:24:06.833Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:24:06.833Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:24:06.833Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:24:06.833Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:24:59.327Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:24:59.327Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:24:59.327Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:24:59.327Z"],"workRunningCount":1}
[debug] [2025-02-21T06:24:59.327Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:24:59.328Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:24:59.328Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:24:59.328Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:24:59.329Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:24:59.549Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 220.25ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 220.25ms"}}
[debug] [2025-02-21T06:24:59.549Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:24:59.549Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:24:59.549Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:24:59.549Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:26:11.769Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:26:11.769Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:26:11.769Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:26:11.769Z"],"workRunningCount":1}
[debug] [2025-02-21T06:26:11.770Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:26:11.771Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:26:11.771Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:26:11.771Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:26:11.771Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:26:11.980Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 208.5767ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 208.5767ms"}}
[debug] [2025-02-21T06:26:11.980Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:26:11.980Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:26:11.980Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:26:11.980Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:27:23.190Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:27:23.190Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:27:23.190Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:27:23.190Z"],"workRunningCount":1}
[debug] [2025-02-21T06:27:23.190Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:27:23.191Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:27:23.191Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:27:23.191Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:27:23.191Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:27:23.816Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 625.2968ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 625.2968ms"}}
[debug] [2025-02-21T06:27:23.817Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:27:23.817Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:27:23.817Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:27:23.817Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:28:39.742Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:28:39.742Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:28:39.742Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:28:39.742Z"],"workRunningCount":1}
[debug] [2025-02-21T06:28:39.742Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:28:39.744Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:28:39.744Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:28:39.744Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:28:39.744Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:28:39.950Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 205.6946ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 205.6946ms"}}
[debug] [2025-02-21T06:28:39.950Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:28:39.950Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:28:39.950Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:28:39.950Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:30:03.586Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:30:03.586Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:30:03.586Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:30:03.586Z"],"workRunningCount":1}
[debug] [2025-02-21T06:30:03.586Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:30:03.587Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:30:03.587Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:30:03.587Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:30:03.587Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:30:03.803Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 215.61ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 215.61ms"}}
[debug] [2025-02-21T06:30:03.803Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:30:03.803Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:30:03.803Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:30:03.803Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:31:20.574Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:31:20.574Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:31:20.574Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:31:20.574Z"],"workRunningCount":1}
[debug] [2025-02-21T06:31:20.574Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:31:20.575Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:31:20.575Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:31:20.575Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:31:20.575Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:31:20.780Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 205.161ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 205.161ms"}}
[debug] [2025-02-21T06:31:20.781Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:31:20.781Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:31:20.781Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:31:20.781Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:31:55.465Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:31:55.465Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:31:55.465Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:31:55.465Z"],"workRunningCount":1}
[debug] [2025-02-21T06:31:55.465Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:31:55.466Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:31:55.466Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:31:55.466Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:31:55.467Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:31:55.671Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 204.9681ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 204.9681ms"}}
[debug] [2025-02-21T06:31:55.672Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:31:55.672Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:31:55.672Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:31:55.672Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:32:29.937Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:32:29.937Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:32:29.937Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:32:29.937Z"],"workRunningCount":1}
[debug] [2025-02-21T06:32:29.937Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:32:29.938Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:32:29.938Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:32:29.938Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:32:29.939Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: bookedPeriod.filter is not a function\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:209:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: bookedPeriod.filter is not a function\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:209:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T06:32:30.151Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 212.1592ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 212.1592ms"}}
[debug] [2025-02-21T06:32:30.151Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:32:30.151Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:32:30.151Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:32:30.151Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:49:08.974Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:49:08.974Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:49:08.974Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:49:08.974Z"],"workRunningCount":1}
[debug] [2025-02-21T06:49:08.974Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:49:08.976Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:49:08.976Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:49:08.976Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:49:08.976Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_type":"room","slug":{"_type":"slug","current":"arroios-room-1"},"_createdAt":"2025-02-19T14:46:30Z","roomNumber":1,"roomType":"Single bed","title":"arroios-room-1","_updatedAt":"2025-02-21T06:49:08Z","priceWinter":1500,"priceSummer":399,"bookedPeriods":[{"_key":"2cd6f2ebde15791dbebd13cae2a20172","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"_key":"783403f48c82fd20743d5617146148d0","year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"b095af6b2ea62089b19d04747d22d0f4"},{"_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026","semester":"2nd Semester","services":""},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"isAvailable":false,"_rev":"1bd464f1-b3fd-4c35-a4eb-894246fe37a3","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"}},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_type":"room","slug":{"_type":"slug","current":"arroios-room-1"},"_createdAt":"2025-02-19T14:46:30Z","roomNumber":1,"roomType":"Single bed","title":"arroios-room-1","_updatedAt":"2025-02-21T06:49:08Z","priceWinter":1500,"priceSummer":399,"bookedPeriods":[{"_key":"2cd6f2ebde15791dbebd13cae2a20172","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"_key":"783403f48c82fd20743d5617146148d0","year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"b095af6b2ea62089b19d04747d22d0f4"},{"_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026","semester":"2nd Semester","services":""},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"isAvailable":false,"_rev":"1bd464f1-b3fd-4c35-a4eb-894246fe37a3","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"}},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_type\":\"room\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_createdAt\":\"2025-02-19T14:46:30Z\",\"roomNumber\":1,\"roomType\":\"Single bed\",\"title\":\"arroios-room-1\",\"_updatedAt\":\"2025-02-21T06:49:08Z\",\"priceWinter\":1500,\"priceSummer\":399,\"bookedPeriods\":[{\"_key\":\"2cd6f2ebde15791dbebd13cae2a20172\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"_key\":\"783403f48c82fd20743d5617146148d0\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"b095af6b2ea62089b19d04747d22d0f4\"},{\"_key\":\"5014a1e4ae202bef507b295e42c123b5\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"7e429f7d87046bed1d9d2807fe72251c\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"services\":\"\"},{\"_key\":\"2c55a7df999a0e5ca69fc57dc9dbf05b\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"}],\"isAvailable\":false,\"_rev\":\"1bd464f1-b3fd-4c35-a4eb-894246fe37a3\",\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\"},{\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\"}],\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"property\":{\"_type\":\"reference\",\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\"}},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2675","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Hlf9db3PjtkiNzAJzLBAEg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"1bd464f1-b3fd-4c35-a4eb-894246fe37a3","sanity-transaction-time":"2025-02-21T06:49:08Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2675","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Hlf9db3PjtkiNzAJzLBAEg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"1bd464f1-b3fd-4c35-a4eb-894246fe37a3","sanity-transaction-time":"2025-02-21T06:49:08Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2675\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"Hlf9db3PjtkiNzAJzLBAEg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"1bd464f1-b3fd-4c35-a4eb-894246fe37a3\",\"sanity-transaction-time\":\"2025-02-21T06:49:08Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:49:09.632Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 656.2789ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 656.2789ms"}}
[debug] [2025-02-21T06:49:09.633Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:49:09.633Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:49:09.633Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:49:09.633Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:49:11.855Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:49:11.855Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:49:11.855Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:49:11.855Z"],"workRunningCount":1}
[debug] [2025-02-21T06:49:11.855Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:49:11.856Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:49:11.856Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:49:11.856Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:49:11.856Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"year":"2024/2025","semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"semester":"Both Semesters","_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"bookedPeriods":[{"_key":"2cd6f2ebde15791dbebd13cae2a20172","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"783403f48c82fd20743d5617146148d0"},{"_key":"b095af6b2ea62089b19d04747d22d0f4","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026","semester":"2nd Semester","services":""},{"services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters"}],"_createdAt":"2025-02-19T14:46:30Z","priceWinter":1500,"priceSummer":399,"_type":"room","isAvailable":true,"roomNumber":1,"title":"arroios-room-1","_rev":"df23be06-35ea-48be-9e66-09cf032f78d9","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"roomType":"Single bed","_updatedAt":"2025-02-21T06:49:11Z","_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","slug":{"_type":"slug","current":"arroios-room-1"}},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"year":"2024/2025","semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"semester":"Both Semesters","_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"bookedPeriods":[{"_key":"2cd6f2ebde15791dbebd13cae2a20172","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"783403f48c82fd20743d5617146148d0"},{"_key":"b095af6b2ea62089b19d04747d22d0f4","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026","semester":"2nd Semester","services":""},{"services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters"}],"_createdAt":"2025-02-19T14:46:30Z","priceWinter":1500,"priceSummer":399,"_type":"room","isAvailable":true,"roomNumber":1,"title":"arroios-room-1","_rev":"df23be06-35ea-48be-9e66-09cf032f78d9","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"roomType":"Single bed","_updatedAt":"2025-02-21T06:49:11Z","_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","slug":{"_type":"slug","current":"arroios-room-1"}},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"availableSemesters\":[{\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"year\":\"2024/2025\",\"semester\":\"Full Year\",\"_key\":\"f007205a3d745514755eda33db5cfcca\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"semester\":\"Both Semesters\",\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\"}],\"bookedPeriods\":[{\"_key\":\"2cd6f2ebde15791dbebd13cae2a20172\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"783403f48c82fd20743d5617146148d0\"},{\"_key\":\"b095af6b2ea62089b19d04747d22d0f4\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"_key\":\"5014a1e4ae202bef507b295e42c123b5\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"},{\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"7e429f7d87046bed1d9d2807fe72251c\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"services\":\"\"},{\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"2c55a7df999a0e5ca69fc57dc9dbf05b\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"}],\"_createdAt\":\"2025-02-19T14:46:30Z\",\"priceWinter\":1500,\"priceSummer\":399,\"_type\":\"room\",\"isAvailable\":true,\"roomNumber\":1,\"title\":\"arroios-room-1\",\"_rev\":\"df23be06-35ea-48be-9e66-09cf032f78d9\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"roomType\":\"Single bed\",\"_updatedAt\":\"2025-02-21T06:49:11Z\",\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"}},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2674","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"vPzA4ktJTffw18OMLDiuTw\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"df23be06-35ea-48be-9e66-09cf032f78d9","sanity-transaction-time":"2025-02-21T06:49:11Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2674","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"vPzA4ktJTffw18OMLDiuTw\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"df23be06-35ea-48be-9e66-09cf032f78d9","sanity-transaction-time":"2025-02-21T06:49:11Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2674\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"vPzA4ktJTffw18OMLDiuTw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"df23be06-35ea-48be-9e66-09cf032f78d9\",\"sanity-transaction-time\":\"2025-02-21T06:49:11Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:49:12.295Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 439.3886ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 439.3886ms"}}
[debug] [2025-02-21T06:49:12.296Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:49:12.296Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:49:12.296Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:49:12.296Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:47.183Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:47.183Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:47.183Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:47.183Z"],"workRunningCount":1}
[debug] [2025-02-21T06:52:47.183Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:52:47.184Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:52:47.184Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:52:47.184Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:52:47.185Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"slug":{"_type":"slug","current":"arroios-room-1"},"_rev":"e2430e61-d533-4506-a869-d9d7d5418444","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","bookedPeriods":[{"semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"783403f48c82fd20743d5617146148d0","year":"2025/2026"},{"semester":"Both Semesters","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"b095af6b2ea62089b19d04747d22d0f4","year":"2026/2027"},{"_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c"},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"year":"2025/2026","semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"roomNumber":1,"_type":"room","_updatedAt":"2025-02-21T06:52:47Z","priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","title":"arroios-room-1","isAvailable":true,"priceWinter":1500,"roomType":"Single bed"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"slug":{"_type":"slug","current":"arroios-room-1"},"_rev":"e2430e61-d533-4506-a869-d9d7d5418444","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","bookedPeriods":[{"semester":"2nd Semester","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"783403f48c82fd20743d5617146148d0","year":"2025/2026"},{"semester":"Both Semesters","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl","_key":"b095af6b2ea62089b19d04747d22d0f4","year":"2026/2027"},{"_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c"},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"year":"2025/2026","semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"roomNumber":1,"_type":"room","_updatedAt":"2025-02-21T06:52:47Z","priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","title":"arroios-room-1","isAvailable":true,"priceWinter":1500,"roomType":"Single bed"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_rev\":\"e2430e61-d533-4506-a869-d9d7d5418444\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"bookedPeriods\":[{\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"783403f48c82fd20743d5617146148d0\",\"year\":\"2025/2026\"},{\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"b095af6b2ea62089b19d04747d22d0f4\",\"year\":\"2026/2027\"},{\"_key\":\"5014a1e4ae202bef507b295e42c123b5\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"},{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"7e429f7d87046bed1d9d2807fe72251c\"},{\"_key\":\"2c55a7df999a0e5ca69fc57dc9dbf05b\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"}],\"availableSemesters\":[{\"year\":\"2024/2025\",\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\"},{\"semester\":\"Both Semesters\",\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"year\":\"2025/2026\",\"semester\":\"1st Semester\",\"_key\":\"381749933c8c8cebc0a690a887cf16d4\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\"},{\"semester\":\"1st Semester\",\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"year\":\"2026/2027\",\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\"},{\"year\":\"2026/2027\",\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\"}],\"roomNumber\":1,\"_type\":\"room\",\"_updatedAt\":\"2025-02-21T06:52:47Z\",\"priceSummer\":399,\"_createdAt\":\"2025-02-19T14:46:30Z\",\"title\":\"arroios-room-1\",\"isAvailable\":true,\"priceWinter\":1500,\"roomType\":\"Single bed\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2524","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"LsjxbxP03l6Od3Vwn98OnA\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"e2430e61-d533-4506-a869-d9d7d5418444","sanity-transaction-time":"2025-02-21T06:52:47Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2524","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"LsjxbxP03l6Od3Vwn98OnA\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"e2430e61-d533-4506-a869-d9d7d5418444","sanity-transaction-time":"2025-02-21T06:52:47Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2524\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"LsjxbxP03l6Od3Vwn98OnA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"e2430e61-d533-4506-a869-d9d7d5418444\",\"sanity-transaction-time\":\"2025-02-21T06:52:47Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:52:47.635Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 450.0379ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 450.0379ms"}}
[debug] [2025-02-21T06:52:47.635Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:52:47.635Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:52:47.635Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:52:47.635Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:48.856Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:48.856Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:48.856Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:48.856Z"],"workRunningCount":1}
[debug] [2025-02-21T06:52:48.856Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:52:48.857Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:52:48.857Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:52:48.857Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:52:48.857Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"bookedPeriods":[{"_key":"b095af6b2ea62089b19d04747d22d0f4","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester"},{"semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026"},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"slug":{"_type":"slug","current":"arroios-room-1"},"_updatedAt":"2025-02-21T06:52:48Z","_type":"room","_rev":"6606fb58-8a76-4bde-b292-23fc778d4078","priceWinter":1500,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomType":"Single bed","_createdAt":"2025-02-19T14:46:30Z","title":"arroios-room-1","isAvailable":true,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"year":"2025/2026","semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"roomNumber":1,"priceSummer":399,"property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"}},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"bookedPeriods":[{"_key":"b095af6b2ea62089b19d04747d22d0f4","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"drafts.gbwTgqOq53YDSh8fvmSYOl"},{"services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester"},{"semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl","_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026"},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"slug":{"_type":"slug","current":"arroios-room-1"},"_updatedAt":"2025-02-21T06:52:48Z","_type":"room","_rev":"6606fb58-8a76-4bde-b292-23fc778d4078","priceWinter":1500,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomType":"Single bed","_createdAt":"2025-02-19T14:46:30Z","title":"arroios-room-1","isAvailable":true,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"year":"2025/2026","semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"roomNumber":1,"priceSummer":399,"property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"}},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"bookedPeriods\":[{\"_key\":\"b095af6b2ea62089b19d04747d22d0f4\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"drafts.gbwTgqOq53YDSh8fvmSYOl\"},{\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"5014a1e4ae202bef507b295e42c123b5\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\",\"_key\":\"7e429f7d87046bed1d9d2807fe72251c\",\"year\":\"2025/2026\"},{\"_key\":\"2c55a7df999a0e5ca69fc57dc9dbf05b\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"}],\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_updatedAt\":\"2025-02-21T06:52:48Z\",\"_type\":\"room\",\"_rev\":\"6606fb58-8a76-4bde-b292-23fc778d4078\",\"priceWinter\":1500,\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"roomType\":\"Single bed\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"title\":\"arroios-room-1\",\"isAvailable\":true,\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"year\":\"2025/2026\",\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\"},{\"semester\":\"1st Semester\",\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\"},{\"semester\":\"2nd Semester\",\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"roomNumber\":1,\"priceSummer\":399,\"property\":{\"_type\":\"reference\",\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\"}},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2374","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"cdYMXeffzlvdxEf27oPXEg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"6606fb58-8a76-4bde-b292-23fc778d4078","sanity-transaction-time":"2025-02-21T06:52:48Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2374","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"cdYMXeffzlvdxEf27oPXEg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"6606fb58-8a76-4bde-b292-23fc778d4078","sanity-transaction-time":"2025-02-21T06:52:48Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2374\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"cdYMXeffzlvdxEf27oPXEg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"6606fb58-8a76-4bde-b292-23fc778d4078\",\"sanity-transaction-time\":\"2025-02-21T06:52:48Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:52:49.342Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 484.2959ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 484.2959ms"}}
[debug] [2025-02-21T06:52:49.342Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:52:49.342Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:52:49.342Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:52:49.342Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:50.570Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:50.570Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:50.570Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:50.570Z"],"workRunningCount":1}
[debug] [2025-02-21T06:52:50.570Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:52:50.571Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:52:50.571Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:52:50.571Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:52:50.571Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_type":"room","_createdAt":"2025-02-19T14:46:30Z","bookedPeriods":[{"_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"slug":{"_type":"slug","current":"arroios-room-1"},"isAvailable":true,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"year":"2024/2025","semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1"},{"semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"roomType":"Single bed","_updatedAt":"2025-02-21T06:52:49Z","_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","title":"arroios-room-1","priceWinter":1500,"priceSummer":399,"_rev":"2e3bea41-bc91-435b-ac01-ed27942c571b","property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"},"roomNumber":1},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_type":"room","_createdAt":"2025-02-19T14:46:30Z","bookedPeriods":[{"_key":"5014a1e4ae202bef507b295e42c123b5","year":"2024/2025","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"slug":{"_type":"slug","current":"arroios-room-1"},"isAvailable":true,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"year":"2024/2025","semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1"},{"semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"roomType":"Single bed","_updatedAt":"2025-02-21T06:52:49Z","_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","title":"arroios-room-1","priceWinter":1500,"priceSummer":399,"_rev":"2e3bea41-bc91-435b-ac01-ed27942c571b","property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"},"roomNumber":1},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_type\":\"room\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"bookedPeriods\":[{\"_key\":\"5014a1e4ae202bef507b295e42c123b5\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"},{\"_key\":\"7e429f7d87046bed1d9d2807fe72251c\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"},{\"_key\":\"2c55a7df999a0e5ca69fc57dc9dbf05b\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"}],\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"isAvailable\":true,\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"year\":\"2024/2025\",\"semester\":\"Both Semesters\",\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\"},{\"semester\":\"Full Year\",\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"roomType\":\"Single bed\",\"_updatedAt\":\"2025-02-21T06:52:49Z\",\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"title\":\"arroios-room-1\",\"priceWinter\":1500,\"priceSummer\":399,\"_rev\":\"2e3bea41-bc91-435b-ac01-ed27942c571b\",\"property\":{\"_type\":\"reference\",\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\"},\"roomNumber\":1},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2222","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"+2Iu+z3hutk36UgAQBQ5Rg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"2e3bea41-bc91-435b-ac01-ed27942c571b","sanity-transaction-time":"2025-02-21T06:52:49Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2222","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"+2Iu+z3hutk36UgAQBQ5Rg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"2e3bea41-bc91-435b-ac01-ed27942c571b","sanity-transaction-time":"2025-02-21T06:52:49Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2222\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"+2Iu+z3hutk36UgAQBQ5Rg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"2e3bea41-bc91-435b-ac01-ed27942c571b\",\"sanity-transaction-time\":\"2025-02-21T06:52:49Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:52:51.018Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 447.3826ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 447.3826ms"}}
[debug] [2025-02-21T06:52:51.019Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:52:51.019Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:52:51.019Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:52:51.019Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:51.230Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:51.230Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:51.230Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:51.230Z"],"workRunningCount":1}
[debug] [2025-02-21T06:52:51.231Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:52:51.231Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:52:51.231Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:52:51.231Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:52:51.232Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"title":"arroios-room-1","priceWinter":1500,"priceSummer":399,"roomNumber":1,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_rev":"92f992a8-f865-40a1-bd27-f82fbf77bf96","bookedPeriods":[{"_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"slug":{"_type":"slug","current":"arroios-room-1"},"_updatedAt":"2025-02-21T06:52:51Z","_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"_type":"room"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"title":"arroios-room-1","priceWinter":1500,"priceSummer":399,"roomNumber":1,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_rev":"92f992a8-f865-40a1-bd27-f82fbf77bf96","bookedPeriods":[{"_key":"7e429f7d87046bed1d9d2807fe72251c","year":"2025/2026","semester":"2nd Semester","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"},{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"slug":{"_type":"slug","current":"arroios-room-1"},"_updatedAt":"2025-02-21T06:52:51Z","_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"_type":"room"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"title\":\"arroios-room-1\",\"priceWinter\":1500,\"priceSummer\":399,\"roomNumber\":1,\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"roomType\":\"Single bed\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"availableSemesters\":[{\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\"},{\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_rev\":\"92f992a8-f865-40a1-bd27-f82fbf77bf96\",\"bookedPeriods\":[{\"_key\":\"7e429f7d87046bed1d9d2807fe72251c\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"},{\"_key\":\"2c55a7df999a0e5ca69fc57dc9dbf05b\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"}],\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_updatedAt\":\"2025-02-21T06:52:51Z\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"isAvailable\":true,\"_type\":\"room\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2079","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"IIjAVvl2cy8I1KYBmefs/A\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"92f992a8-f865-40a1-bd27-f82fbf77bf96","sanity-transaction-time":"2025-02-21T06:52:51Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2079","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"IIjAVvl2cy8I1KYBmefs/A\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"92f992a8-f865-40a1-bd27-f82fbf77bf96","sanity-transaction-time":"2025-02-21T06:52:51Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2079\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"IIjAVvl2cy8I1KYBmefs/A\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"92f992a8-f865-40a1-bd27-f82fbf77bf96\",\"sanity-transaction-time\":\"2025-02-21T06:52:51Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:52:52.636Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1404.5895ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1404.5895ms"}}
[debug] [2025-02-21T06:52:52.637Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:52:52.637Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:52:52.637Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:52:52.637Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:52.853Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:52.853Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:52.853Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:52.853Z"],"workRunningCount":1}
[debug] [2025-02-21T06:52:52.853Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:52:52.854Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:52:52.854Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:52:52.854Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:52:52.854Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"priceSummer":399,"title":"arroios-room-1","slug":{"current":"arroios-room-1","_type":"slug"},"_updatedAt":"2025-02-21T06:52:52Z","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_type":"room","isAvailable":true,"roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_createdAt":"2025-02-19T14:46:30Z","bookedPeriods":[{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"priceWinter":1500,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","_rev":"fabd68c4-f727-49d0-bd5d-c8578881a452","roomNumber":1},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"priceSummer":399,"title":"arroios-room-1","slug":{"current":"arroios-room-1","_type":"slug"},"_updatedAt":"2025-02-21T06:52:52Z","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_type":"room","isAvailable":true,"roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_createdAt":"2025-02-19T14:46:30Z","bookedPeriods":[{"_key":"2c55a7df999a0e5ca69fc57dc9dbf05b","year":"2026/2027","semester":"Both Semesters","services":"","keyOfBooking":"gbwTgqOq53YDSh8fvmSYOl"}],"priceWinter":1500,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","_rev":"fabd68c4-f727-49d0-bd5d-c8578881a452","roomNumber":1},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"priceSummer\":399,\"title\":\"arroios-room-1\",\"slug\":{\"current\":\"arroios-room-1\",\"_type\":\"slug\"},\"_updatedAt\":\"2025-02-21T06:52:52Z\",\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"semester\":\"1st Semester\",\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_type\":\"room\",\"isAvailable\":true,\"roomType\":\"Single bed\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_createdAt\":\"2025-02-19T14:46:30Z\",\"bookedPeriods\":[{\"_key\":\"2c55a7df999a0e5ca69fc57dc9dbf05b\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"services\":\"\",\"keyOfBooking\":\"gbwTgqOq53YDSh8fvmSYOl\"}],\"priceWinter\":1500,\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_rev\":\"fabd68c4-f727-49d0-bd5d-c8578881a452\",\"roomNumber\":1},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1936","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"bTMKm/48dvZJcXz5uZxPnQ\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"fabd68c4-f727-49d0-bd5d-c8578881a452","sanity-transaction-time":"2025-02-21T06:52:52Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1936","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"bTMKm/48dvZJcXz5uZxPnQ\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"fabd68c4-f727-49d0-bd5d-c8578881a452","sanity-transaction-time":"2025-02-21T06:52:52Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1936\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"bTMKm/48dvZJcXz5uZxPnQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"fabd68c4-f727-49d0-bd5d-c8578881a452\",\"sanity-transaction-time\":\"2025-02-21T06:52:52Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:52:53.292Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 437.6434ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 437.6434ms"}}
[debug] [2025-02-21T06:52:53.292Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:52:53.292Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:52:53.292Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:52:53.292Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:53.503Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:53.503Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:52:53.503Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:52:53.503Z"],"workRunningCount":1}
[debug] [2025-02-21T06:52:53.503Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:52:53.504Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:52:53.504Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:52:53.504Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:52:53.504Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_createdAt":"2025-02-19T14:46:30Z","_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","priceSummer":399,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"year":"2024/2025","semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1"},{"semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"priceWinter":1500,"_updatedAt":"2025-02-21T06:52:53Z","slug":{"current":"arroios-room-1","_type":"slug"},"_type":"room","isAvailable":true,"roomType":"Single bed","_rev":"e6852d62-130f-4860-8dfa-55f752dc443c","title":"arroios-room-1","roomNumber":1},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_createdAt":"2025-02-19T14:46:30Z","_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","priceSummer":399,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"year":"2024/2025","semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1"},{"semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"priceWinter":1500,"_updatedAt":"2025-02-21T06:52:53Z","slug":{"current":"arroios-room-1","_type":"slug"},"_type":"room","isAvailable":true,"roomType":"Single bed","_rev":"e6852d62-130f-4860-8dfa-55f752dc443c","title":"arroios-room-1","roomNumber":1},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_createdAt\":\"2025-02-19T14:46:30Z\",\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"priceSummer\":399,\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"year\":\"2024/2025\",\"semester\":\"Both Semesters\",\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\"},{\"semester\":\"Full Year\",\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"year\":\"2026/2027\",\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\"}],\"priceWinter\":1500,\"_updatedAt\":\"2025-02-21T06:52:53Z\",\"slug\":{\"current\":\"arroios-room-1\",\"_type\":\"slug\"},\"_type\":\"room\",\"isAvailable\":true,\"roomType\":\"Single bed\",\"_rev\":\"e6852d62-130f-4860-8dfa-55f752dc443c\",\"title\":\"arroios-room-1\",\"roomNumber\":1},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1773","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"1FM1N9gNNXqpOMfyIpnoUg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"e6852d62-130f-4860-8dfa-55f752dc443c","sanity-transaction-time":"2025-02-21T06:52:53Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1773","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"1FM1N9gNNXqpOMfyIpnoUg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"e6852d62-130f-4860-8dfa-55f752dc443c","sanity-transaction-time":"2025-02-21T06:52:53Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1773\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"1FM1N9gNNXqpOMfyIpnoUg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"e6852d62-130f-4860-8dfa-55f752dc443c\",\"sanity-transaction-time\":\"2025-02-21T06:52:53Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T06:52:54.906Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1401.5407ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1401.5407ms"}}
[debug] [2025-02-21T06:52:54.906Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:52:54.906Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:52:54.906Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:52:54.906Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:53:10.804Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:10.804Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:53:10.804Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:10.804Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:10.804Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:53:10.805Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:10.805Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:53:10.805Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:53:10.806Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_type":"booking","_updatedAt":"2025-02-21T06:11:36Z","currentLocation":"","permanentAddress":"Dhaka, Bangladesh","_id":"oVMkP0YmhyBGyJroWj5s0x","age":"25","name":"Elias Emon","_createdAt":"2025-02-21T06:11:36Z","bookingDate":"2025-02-21T06:11:34.244Z","bookedPeriod":[{"year":"2024/2025","price":2299,"semester":"Full Year","services":""}],"_rev":"oVMkP0YmhyBGyJroWj5rzI","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"genre":"Male","nationality":"Bangladeshi","currentProfession":"Studying.........","notes":"","status":"pending","idNumber":"a104ai89","totalPrice":2299},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_type":"booking","_updatedAt":"2025-02-21T06:11:36Z","currentLocation":"","permanentAddress":"Dhaka, Bangladesh","_id":"oVMkP0YmhyBGyJroWj5s0x","age":"25","name":"Elias Emon","_createdAt":"2025-02-21T06:11:36Z","bookingDate":"2025-02-21T06:11:34.244Z","bookedPeriod":[{"year":"2024/2025","price":2299,"semester":"Full Year","services":""}],"_rev":"oVMkP0YmhyBGyJroWj5rzI","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"genre":"Male","nationality":"Bangladeshi","currentProfession":"Studying.........","notes":"","status":"pending","idNumber":"a104ai89","totalPrice":2299},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_type\":\"booking\",\"_updatedAt\":\"2025-02-21T06:11:36Z\",\"currentLocation\":\"\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"_id\":\"oVMkP0YmhyBGyJroWj5s0x\",\"age\":\"25\",\"name\":\"Elias Emon\",\"_createdAt\":\"2025-02-21T06:11:36Z\",\"bookingDate\":\"2025-02-21T06:11:34.244Z\",\"bookedPeriod\":[{\"year\":\"2024/2025\",\"price\":2299,\"semester\":\"Full Year\",\"services\":\"\"}],\"_rev\":\"oVMkP0YmhyBGyJroWj5rzI\",\"room\":{\"_ref\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"_type\":\"reference\"},\"genre\":\"Male\",\"nationality\":\"Bangladeshi\",\"currentProfession\":\"Studying.........\",\"notes\":\"\",\"status\":\"pending\",\"idNumber\":\"a104ai89\",\"totalPrice\":2299},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"602","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"fPoeLx6chj0xix69KJPghQ\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWj5s0x","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjAXdq","sanity-transaction-time":"2025-02-21T06:53:10Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"602","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"fPoeLx6chj0xix69KJPghQ\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWj5s0x","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjAXdq","sanity-transaction-time":"2025-02-21T06:53:10Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"602\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"fPoeLx6chj0xix69KJPghQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"oVMkP0YmhyBGyJroWj5s0x\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjAXdq\",\"sanity-transaction-time\":\"2025-02-21T06:53:10Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T06:53:11.061Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:11.061Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:10.804Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:11.061Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:10.804Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:11.061Z"],"workRunningCount":2}
[debug] [2025-02-21T06:53:11.061Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:53:11.061Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:11.062Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:53:11.062Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:53:11.062Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/67fae916-4330-467c-9115-1e7f4fb0b368"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/67fae916-4330-467c-9115-1e7f4fb0b368\"\n - Be careful, this may be a production service."}}
[info] >  Document oVMkP0YmhyBGyJroWj5s0x deleted from booking {"user":"Document oVMkP0YmhyBGyJroWj5s0x deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document oVMkP0YmhyBGyJroWj5s0x deleted from booking"}}
[debug] [2025-02-21T06:53:11.218Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 412.8194ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 412.8194ms"}}
[debug] [2025-02-21T06:53:11.219Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:53:11.219Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:11.219Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:11.219Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:11.061Z"],"workRunningCount":1}
[info] >  {"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","year":"2024/2025","services":""}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","year":"2024/2025","services":""}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"updatedBookedPeriods\":[{\"_key\":\"e9a7081713b0\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\"},{\"_key\":\"204eac55723c\",\"semester\":\"Summer\",\"year\":\"2025/2026\"},{\"_key\":\"25e22a2d2721\",\"semester\":\"Full Year\",\"year\":\"2026/2027\"},{\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"year\":\"2024/2025\",\"services\":\"\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[debug] [2025-02-21T06:53:11.430Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:11.430Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:11.061Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:11.430Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:11.061Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:11.430Z"],"workRunningCount":2}
[debug] [2025-02-21T06:53:11.430Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:53:11.431Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:11.431Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:53:11.431Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:53:11.431Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"age":"25","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"notes":"","status":"pending","idNumber":"a104ai89","permanentAddress":"Dhaka, Bangladesh","_rev":"581c37fa-0379-46ff-9211-fd05f077645c","genre":"Male","_updatedAt":"2025-02-21T06:11:36Z","nationality":"Bangladeshi","currentLocation":"","_type":"booking","_createdAt":"2025-02-21T06:11:36Z","totalPrice":2299,"_id":"drafts.oVMkP0YmhyBGyJroWj5s0x","name":"Elias Emon","bookingDate":"2025-02-21T06:11:34.244Z","bookedPeriod":[{"_key":"e13eab0b41c4a90b0521829ed6a4047f","year":"2024/2025","price":2299,"semester":"Full Year","services":""}],"currentProfession":"Studying........."},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"age":"25","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"notes":"","status":"pending","idNumber":"a104ai89","permanentAddress":"Dhaka, Bangladesh","_rev":"581c37fa-0379-46ff-9211-fd05f077645c","genre":"Male","_updatedAt":"2025-02-21T06:11:36Z","nationality":"Bangladeshi","currentLocation":"","_type":"booking","_createdAt":"2025-02-21T06:11:36Z","totalPrice":2299,"_id":"drafts.oVMkP0YmhyBGyJroWj5s0x","name":"Elias Emon","bookingDate":"2025-02-21T06:11:34.244Z","bookedPeriod":[{"_key":"e13eab0b41c4a90b0521829ed6a4047f","year":"2024/2025","price":2299,"semester":"Full Year","services":""}],"currentProfession":"Studying........."},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"age\":\"25\",\"room\":{\"_ref\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"_type\":\"reference\"},\"notes\":\"\",\"status\":\"pending\",\"idNumber\":\"a104ai89\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"_rev\":\"581c37fa-0379-46ff-9211-fd05f077645c\",\"genre\":\"Male\",\"_updatedAt\":\"2025-02-21T06:11:36Z\",\"nationality\":\"Bangladeshi\",\"currentLocation\":\"\",\"_type\":\"booking\",\"_createdAt\":\"2025-02-21T06:11:36Z\",\"totalPrice\":2299,\"_id\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"name\":\"Elias Emon\",\"bookingDate\":\"2025-02-21T06:11:34.244Z\",\"bookedPeriod\":[{\"_key\":\"e13eab0b41c4a90b0521829ed6a4047f\",\"year\":\"2024/2025\",\"price\":2299,\"semester\":\"Full Year\",\"services\":\"\"}],\"currentProfession\":\"Studying.........\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"665","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"g9xwXttYPp+HrJUzAgDq8Q\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWj5s0x","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjAXdq","sanity-transaction-time":"2025-02-21T06:53:10Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"665","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"g9xwXttYPp+HrJUzAgDq8Q\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWj5s0x","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjAXdq","sanity-transaction-time":"2025-02-21T06:53:10Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"665\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"g9xwXttYPp+HrJUzAgDq8Q\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjAXdq\",\"sanity-transaction-time\":\"2025-02-21T06:53:10Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T06:53:12.561Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1499.0412000000001ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1499.0412000000001ms"}}
[debug] [2025-02-21T06:53:12.561Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:53:12.561Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:12.561Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:12.561Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:11.430Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:12.776Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:12.776Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:11.430Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:12.776Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:11.430Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:12.776Z"],"workRunningCount":2}
[debug] [2025-02-21T06:53:12.776Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:53:12.777Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:12.777Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:53:12.777Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:53:12.777Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  Document drafts.oVMkP0YmhyBGyJroWj5s0x deleted from booking {"user":"Document drafts.oVMkP0YmhyBGyJroWj5s0x deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.oVMkP0YmhyBGyJroWj5s0x deleted from booking"}}
[debug] [2025-02-21T06:53:12.865Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1434.3191ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1434.3191ms"}}
[debug] [2025-02-21T06:53:12.866Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:53:12.866Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:12.866Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:12.866Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:12.776Z"],"workRunningCount":1}
[info] >  {"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","year":"2024/2025","services":""}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","year":"2024/2025","services":""}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"updatedBookedPeriods\":[{\"_key\":\"e9a7081713b0\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\"},{\"_key\":\"204eac55723c\",\"semester\":\"Summer\",\"year\":\"2025/2026\"},{\"_key\":\"25e22a2d2721\",\"semester\":\"Full Year\",\"year\":\"2026/2027\"},{\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"year\":\"2024/2025\",\"services\":\"\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[debug] [2025-02-21T06:53:13.108Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:13.108Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:12.776Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:13.109Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:12.776Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:13.108Z"],"workRunningCount":2}
[debug] [2025-02-21T06:53:13.109Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:53:13.109Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:13.109Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:53:13.109Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:53:13.109Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_updatedAt":"2025-02-21T06:53:12Z","roomType":"Suite","roomNumber":1,"_createdAt":"2025-02-19T16:26:07Z","_id":"67fae916-4330-467c-9115-1e7f4fb0b368","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"slug":{"current":"pedreira-70-room-1","_type":"slug"},"priceSummer":599,"bookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","year":"2024/2025","services":""}],"priceWinter":1700,"availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025"},{"year":"2024/2025","semester":"Both Semesters","_key":"1827bb2a398c38efca6d49ca6191548e"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"59449e72e7684502915de6ed77687796"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"year":"2026/2027","semester":"2nd Semester","_key":"ad69a4a0126ed45ef4c762c12eb4141d"},{"semester":"Summer","_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"_rev":"gbwTgqOq53YDSh8fvmy30w","title":"pedreira-70-room-1","services":[""],"_type":"room","isAvailable":true},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_updatedAt":"2025-02-21T06:53:12Z","roomType":"Suite","roomNumber":1,"_createdAt":"2025-02-19T16:26:07Z","_id":"67fae916-4330-467c-9115-1e7f4fb0b368","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"slug":{"current":"pedreira-70-room-1","_type":"slug"},"priceSummer":599,"bookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","year":"2024/2025","services":""}],"priceWinter":1700,"availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025"},{"year":"2024/2025","semester":"Both Semesters","_key":"1827bb2a398c38efca6d49ca6191548e"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"59449e72e7684502915de6ed77687796"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"year":"2026/2027","semester":"2nd Semester","_key":"ad69a4a0126ed45ef4c762c12eb4141d"},{"semester":"Summer","_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"_rev":"gbwTgqOq53YDSh8fvmy30w","title":"pedreira-70-room-1","services":[""],"_type":"room","isAvailable":true},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_updatedAt\":\"2025-02-21T06:53:12Z\",\"roomType\":\"Suite\",\"roomNumber\":1,\"_createdAt\":\"2025-02-19T16:26:07Z\",\"_id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"slug\":{\"current\":\"pedreira-70-room-1\",\"_type\":\"slug\"},\"priceSummer\":599,\"bookedPeriods\":[{\"_key\":\"e9a7081713b0\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\"},{\"_key\":\"204eac55723c\",\"semester\":\"Summer\",\"year\":\"2025/2026\"},{\"_key\":\"25e22a2d2721\",\"semester\":\"Full Year\",\"year\":\"2026/2027\"},{\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"year\":\"2024/2025\",\"services\":\"\"}],\"priceWinter\":1700,\"availableSemesters\":[{\"_key\":\"33369861f45679c518ce18a734b42b43\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\",\"year\":\"2024/2025\"},{\"year\":\"2024/2025\",\"semester\":\"Both Semesters\",\"_key\":\"1827bb2a398c38efca6d49ca6191548e\"},{\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"_key\":\"59449e72e7684502915de6ed77687796\"},{\"_key\":\"e6c650f8272768679db617d2fa563fd1\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"year\":\"2026/2027\",\"semester\":\"2nd Semester\",\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\"},{\"semester\":\"Summer\",\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"7369660f0050ced55ba3875540066c06\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_rev\":\"gbwTgqOq53YDSh8fvmy30w\",\"title\":\"pedreira-70-room-1\",\"services\":[\"\"],\"_type\":\"room\",\"isAvailable\":true},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2085","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"nqmh0Ca/BgWim5ETHyz+wA\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmy30w","sanity-transaction-time":"2025-02-21T06:53:12Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2085","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"nqmh0Ca/BgWim5ETHyz+wA\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmy30w","sanity-transaction-time":"2025-02-21T06:53:12Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2085\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"nqmh0Ca/BgWim5ETHyz+wA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvmy30w\",\"sanity-transaction-time\":\"2025-02-21T06:53:12Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room {"user":"Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room"}}
[debug] [2025-02-21T06:53:13.546Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 437.0305ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 437.0305ms"}}
[debug] [2025-02-21T06:53:13.547Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:53:13.547Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:13.547Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:13.547Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:12.776Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:13.995Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1218.2849ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1218.2849ms"}}
[debug] [2025-02-21T06:53:13.996Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:53:13.996Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:13.996Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:13.996Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:53:14.766Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:14.766Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:53:14.766Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:14.766Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:14.766Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:53:14.767Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:14.767Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:53:14.767Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:53:14.767Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_id":"67fae916-4330-467c-9115-1e7f4fb0b368","priceSummer":599,"slug":{"_type":"slug","current":"pedreira-70-room-1"},"priceWinter":1700,"_rev":"se7euW5U96P9qJ0OGAxDQA","services":[""],"_createdAt":"2025-02-19T16:26:07Z","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"title":"pedreira-70-room-1","_type":"room","availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025","semester":"Summer"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"_updatedAt":"2025-02-21T06:53:14Z","roomType":"Suite","isAvailable":true,"bookedPeriods":[{"year":"2025/2026","_key":"e9a7081713b0","semester":"2nd Semester"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"year":"2024/2025","keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":""},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","year":"2024/2025","services":""}],"roomNumber":1},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_id":"67fae916-4330-467c-9115-1e7f4fb0b368","priceSummer":599,"slug":{"_type":"slug","current":"pedreira-70-room-1"},"priceWinter":1700,"_rev":"se7euW5U96P9qJ0OGAxDQA","services":[""],"_createdAt":"2025-02-19T16:26:07Z","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"title":"pedreira-70-room-1","_type":"room","availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025","semester":"Summer"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"_updatedAt":"2025-02-21T06:53:14Z","roomType":"Suite","isAvailable":true,"bookedPeriods":[{"year":"2025/2026","_key":"e9a7081713b0","semester":"2nd Semester"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"year":"2024/2025","keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":""},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","year":"2024/2025","services":""}],"roomNumber":1},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"priceSummer\":599,\"slug\":{\"_type\":\"slug\",\"current\":\"pedreira-70-room-1\"},\"priceWinter\":1700,\"_rev\":\"se7euW5U96P9qJ0OGAxDQA\",\"services\":[\"\"],\"_createdAt\":\"2025-02-19T16:26:07Z\",\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"title\":\"pedreira-70-room-1\",\"_type\":\"room\",\"availableSemesters\":[{\"_key\":\"33369861f45679c518ce18a734b42b43\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1827bb2a398c38efca6d49ca6191548e\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"59449e72e7684502915de6ed77687796\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"e6c650f8272768679db617d2fa563fd1\",\"year\":\"2025/2026\"},{\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"7369660f0050ced55ba3875540066c06\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_updatedAt\":\"2025-02-21T06:53:14Z\",\"roomType\":\"Suite\",\"isAvailable\":true,\"bookedPeriods\":[{\"year\":\"2025/2026\",\"_key\":\"e9a7081713b0\",\"semester\":\"2nd Semester\"},{\"_key\":\"204eac55723c\",\"semester\":\"Summer\",\"year\":\"2025/2026\"},{\"_key\":\"25e22a2d2721\",\"semester\":\"Full Year\",\"year\":\"2026/2027\"},{\"year\":\"2024/2025\",\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\"},{\"keyOfBooking\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"year\":\"2024/2025\",\"services\":\"\"}],\"roomNumber\":1},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2190","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Lo+nQulTE4/+zlsph48YLw\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAxDQA","sanity-transaction-time":"2025-02-21T06:53:14Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2190","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Lo+nQulTE4/+zlsph48YLw\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAxDQA","sanity-transaction-time":"2025-02-21T06:53:14Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2190\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"Lo+nQulTE4/+zlsph48YLw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAxDQA\",\"sanity-transaction-time\":\"2025-02-21T06:53:14Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room {"user":"Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room"}}
[debug] [2025-02-21T06:53:15.208Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 441.21ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 441.21ms"}}
[debug] [2025-02-21T06:53:15.208Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:53:15.209Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:15.209Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:15.209Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:53:30.264Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:30.264Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:53:30.264Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:30.264Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:30.264Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:53:30.265Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:30.265Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T06:53:30.265Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:53:30.265Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[debug] [2025-02-21T06:53:30.420Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:30.420Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:30.264Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:30.420Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:30.264Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:30.420Z"],"workRunningCount":2}
[debug] [2025-02-21T06:53:30.420Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:53:30.420Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:30.420Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:53:30.420Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:53:30.421Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"notes":"","status":"pending","_createdAt":"2025-02-21T06:14:15Z","nationality":"","currentLocation":"","currentProfession":"","_rev":"se7euW5U96P9qJ0OGAtdiq","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"_type":"booking","bookedPeriod":[{"year":"2025/2026","price":850,"semester":"1st Semester","services":""}],"permanentAddress":"","age":0,"name":"","idNumber":"","_updatedAt":"2025-02-21T06:14:15Z","bookingDate":"2025-02-21T06:14:13.189Z","_id":"se7euW5U96P9qJ0OGAtdkD","genre":"","totalPrice":850},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"notes":"","status":"pending","_createdAt":"2025-02-21T06:14:15Z","nationality":"","currentLocation":"","currentProfession":"","_rev":"se7euW5U96P9qJ0OGAtdiq","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"_type":"booking","bookedPeriod":[{"year":"2025/2026","price":850,"semester":"1st Semester","services":""}],"permanentAddress":"","age":0,"name":"","idNumber":"","_updatedAt":"2025-02-21T06:14:15Z","bookingDate":"2025-02-21T06:14:13.189Z","_id":"se7euW5U96P9qJ0OGAtdkD","genre":"","totalPrice":850},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"notes\":\"\",\"status\":\"pending\",\"_createdAt\":\"2025-02-21T06:14:15Z\",\"nationality\":\"\",\"currentLocation\":\"\",\"currentProfession\":\"\",\"_rev\":\"se7euW5U96P9qJ0OGAtdiq\",\"room\":{\"_ref\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"_type\":\"reference\"},\"_type\":\"booking\",\"bookedPeriod\":[{\"year\":\"2025/2026\",\"price\":850,\"semester\":\"1st Semester\",\"services\":\"\"}],\"permanentAddress\":\"\",\"age\":0,\"name\":\"\",\"idNumber\":\"\",\"_updatedAt\":\"2025-02-21T06:14:15Z\",\"bookingDate\":\"2025-02-21T06:14:13.189Z\",\"_id\":\"se7euW5U96P9qJ0OGAtdkD\",\"genre\":\"\",\"totalPrice\":850},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"533","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"yqOnUELCpNvQ6QyYE/wIAw\"","sanity-dataset":"production","sanity-document-id":"se7euW5U96P9qJ0OGAtdkD","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmy3jN","sanity-transaction-time":"2025-02-21T06:53:30Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"533","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"yqOnUELCpNvQ6QyYE/wIAw\"","sanity-dataset":"production","sanity-document-id":"se7euW5U96P9qJ0OGAtdkD","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmy3jN","sanity-transaction-time":"2025-02-21T06:53:30Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"533\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"yqOnUELCpNvQ6QyYE/wIAw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"se7euW5U96P9qJ0OGAtdkD\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvmy3jN\",\"sanity-transaction-time\":\"2025-02-21T06:53:30Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  {"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"se7euW5U96P9qJ0OGAtdkD","semester":"1st Semester","year":"2025/2026","services":""}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"se7euW5U96P9qJ0OGAtdkD","semester":"1st Semester","year":"2025/2026","services":""}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"updatedBookedPeriods\":[{\"_key\":\"e9a7081713b0\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\"},{\"_key\":\"204eac55723c\",\"semester\":\"Summer\",\"year\":\"2025/2026\"},{\"_key\":\"25e22a2d2721\",\"semester\":\"Full Year\",\"year\":\"2026/2027\"},{\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"se7euW5U96P9qJ0OGAtdkD\",\"semester\":\"1st Semester\",\"year\":\"2025/2026\",\"services\":\"\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[info] >  Document se7euW5U96P9qJ0OGAtdkD deleted from booking {"user":"Document se7euW5U96P9qJ0OGAtdkD deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document se7euW5U96P9qJ0OGAtdkD deleted from booking"}}
[debug] [2025-02-21T06:53:30.849Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 428.8616ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 428.8616ms"}}
[debug] [2025-02-21T06:53:30.850Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:53:30.850Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:30.850Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:30.850Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:53:30.264Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:31.618Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1353.1388ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1353.1388ms"}}
[debug] [2025-02-21T06:53:31.619Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: IDLE"}}
[debug] [2025-02-21T06:53:31.619Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:31.619Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:31.619Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:53:32.074Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:32.074Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:53:32.074Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:53:32.074Z"],"workRunningCount":1}
[debug] [2025-02-21T06:53:32.074Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:53:32.074Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:53:32.074Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:53:32.074Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:53:32.075Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_updatedAt":"2025-02-21T06:53:31Z","_rev":"oVMkP0YmhyBGyJroWjAaDK","priceWinter":1700,"isAvailable":true,"roomType":"Suite","services":[""],"property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"_createdAt":"2025-02-19T16:26:07Z","bookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"services":"","keyOfBooking":"se7euW5U96P9qJ0OGAtdkD","semester":"1st Semester","year":"2025/2026"}],"title":"pedreira-70-room-1","_id":"67fae916-4330-467c-9115-1e7f4fb0b368","slug":{"current":"pedreira-70-room-1","_type":"slug"},"priceSummer":599,"roomNumber":1,"availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025"},{"semester":"Both Semesters","_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"_type":"room"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_updatedAt":"2025-02-21T06:53:31Z","_rev":"oVMkP0YmhyBGyJroWjAaDK","priceWinter":1700,"isAvailable":true,"roomType":"Suite","services":[""],"property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"_createdAt":"2025-02-19T16:26:07Z","bookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"services":"","keyOfBooking":"se7euW5U96P9qJ0OGAtdkD","semester":"1st Semester","year":"2025/2026"}],"title":"pedreira-70-room-1","_id":"67fae916-4330-467c-9115-1e7f4fb0b368","slug":{"current":"pedreira-70-room-1","_type":"slug"},"priceSummer":599,"roomNumber":1,"availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025"},{"semester":"Both Semesters","_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"_type":"room"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_updatedAt\":\"2025-02-21T06:53:31Z\",\"_rev\":\"oVMkP0YmhyBGyJroWjAaDK\",\"priceWinter\":1700,\"isAvailable\":true,\"roomType\":\"Suite\",\"services\":[\"\"],\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"_createdAt\":\"2025-02-19T16:26:07Z\",\"bookedPeriods\":[{\"_key\":\"e9a7081713b0\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\"},{\"_key\":\"204eac55723c\",\"semester\":\"Summer\",\"year\":\"2025/2026\"},{\"_key\":\"25e22a2d2721\",\"semester\":\"Full Year\",\"year\":\"2026/2027\"},{\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\"},{\"services\":\"\",\"keyOfBooking\":\"se7euW5U96P9qJ0OGAtdkD\",\"semester\":\"1st Semester\",\"year\":\"2025/2026\"}],\"title\":\"pedreira-70-room-1\",\"_id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"slug\":{\"current\":\"pedreira-70-room-1\",\"_type\":\"slug\"},\"priceSummer\":599,\"roomNumber\":1,\"availableSemesters\":[{\"_key\":\"33369861f45679c518ce18a734b42b43\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\",\"year\":\"2024/2025\"},{\"semester\":\"Both Semesters\",\"_key\":\"1827bb2a398c38efca6d49ca6191548e\",\"year\":\"2024/2025\"},{\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"59449e72e7684502915de6ed77687796\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"e6c650f8272768679db617d2fa563fd1\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"7369660f0050ced55ba3875540066c06\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_type\":\"room\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2291","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"iIDWRUYLVADNLNm8732i7Q\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjAaDK","sanity-transaction-time":"2025-02-21T06:53:31Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2291","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"iIDWRUYLVADNLNm8732i7Q\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjAaDK","sanity-transaction-time":"2025-02-21T06:53:31Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2291\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"iIDWRUYLVADNLNm8732i7Q\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjAaDK\",\"sanity-transaction-time\":\"2025-02-21T06:53:31Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room {"user":"Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room"}}
[debug] [2025-02-21T06:53:32.516Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 441.5913ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 441.5913ms"}}
[debug] [2025-02-21T06:53:32.516Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: IDLE"}}
[debug] [2025-02-21T06:53:32.516Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:53:32.517Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:53:32.517Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:54:40.306Z] File D:\Freelance-Project\ossama\street-lobby\functions\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js changed, reloading triggers"}}
[debug] [2025-02-21T06:54:41.309Z] Validating nodejs source
[debug] [2025-02-21T06:54:42.366Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T06:54:42.366Z] Building nodejs source
[debug] [2025-02-21T06:54:42.366Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:54:42.367Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T06:54:42.371Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8368

[debug] [2025-02-21T06:54:43.091Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[debug] [2025-02-21T06:54:48.107Z] [worker-pool] Shutting down IDLE worker (us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T06:54:48.107Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: FINISHING"}}
[debug] [2025-02-21T06:54:48.107Z] [worker-pool] Shutting down IDLE worker (us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-sanityWebhook)"}}
[debug] [2025-02-21T06:54:48.107Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: FINISHING"}}
[debug] [2025-02-21T06:54:48.115Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: exited"}}
[debug] [2025-02-21T06:54:48.115Z] [worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-98563b96-d492-46c6-af94-3db025d5abde]: FINISHED"}}
[debug] [2025-02-21T06:54:48.115Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: exited"}}
[debug] [2025-02-21T06:54:48.115Z] [worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-eaa2e45e-9f5d-4bb7-a54c-95ce23ba1d62]: FINISHED"}}
[debug] [2025-02-21T06:56:20.185Z] File D:\Freelance-Project\ossama\street-lobby\functions\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js changed, reloading triggers"}}
[debug] [2025-02-21T06:56:21.198Z] Validating nodejs source
[debug] [2025-02-21T06:56:21.956Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T06:56:21.956Z] Building nodejs source
[debug] [2025-02-21T06:56:21.956Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:56:21.957Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T06:56:21.961Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8091

[debug] [2025-02-21T06:56:22.585Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[debug] [2025-02-21T06:56:39.928Z] File D:\Freelance-Project\ossama\street-lobby\functions\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js changed, reloading triggers"}}
[debug] [2025-02-21T06:56:40.930Z] Validating nodejs source
[debug] [2025-02-21T06:56:41.719Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T06:56:41.719Z] Building nodejs source
[debug] [2025-02-21T06:56:41.719Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:56:41.720Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T06:56:41.725Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8427

[debug] [2025-02-21T06:56:42.348Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[debug] [2025-02-21T06:57:35.622Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:57:35.622Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:57:35.623Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:57:35.622Z"],"workRunningCount":1}
[debug] [2025-02-21T06:57:35.623Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:57:35.624Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:57:35.624Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:57:35.624Z] [worker-pool] Cleaned up workers for us-central1-handleBookingUpdate: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-handleBookingUpdate: 1 --> 0"}}
[debug] [2025-02-21T06:57:35.624Z] [worker-pool] Cleaned up workers for us-central1-sanityWebhook: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sanityWebhook: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:57:35.629Z] [worker-pool] addWorker(us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sanityWebhook)"}}
[debug] [2025-02-21T06:57:35.629Z] [worker-pool] Adding worker with key us-central1-sanityWebhook, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sanityWebhook, total=1"}}
[debug] [2025-02-21T06:57:35.780Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:57:35.780Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:57:35.622Z"],"workRunningCount":1}
[debug] [2025-02-21T06:57:35.780Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:57:35.622Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T06:57:35.780Z"],"workRunningCount":2}
[debug] [2025-02-21T06:57:35.780Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T06:57:35.781Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:57:35.781Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T06:57:35.786Z] [worker-pool] addWorker(us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T06:57:35.786Z] [worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1"}}
[info] >  (node:21312) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:21312) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:21312) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T06:57:36.889Z] [runtime-status] [21312] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:36.890Z] [runtime-status] [21312] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:36.890Z] [runtime-status] [21312] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T06:57:36.891Z] [runtime-status] [21312] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[info] >  (node:26328) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:26328) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:26328) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T06:57:37.036Z] [runtime-status] [26328] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.038Z] [runtime-status] [26328] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.038Z] [runtime-status] [26328] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T06:57:37.039Z] [runtime-status] [26328] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.209Z] [runtime-status] [21312] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T06:57:37.209Z] [runtime-status] [21312] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T06:57:37.210Z] [runtime-status] [21312] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.214Z] [runtime-status] [21312] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.216Z] [runtime-status] [21312] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.216Z] [runtime-status] [21312] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T06:57:37.331Z] [runtime-status] [26328] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T06:57:37.331Z] [runtime-status] [26328] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T06:57:37.331Z] [runtime-status] [26328] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.336Z] [runtime-status] [26328] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.338Z] [runtime-status] [26328] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T06:57:37.338Z] [runtime-status] [26328] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T06:57:37.404Z] [runtime-status] [21312] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T06:57:37.412Z] [runtime-status] [21312] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T06:57:37.412Z] [runtime-status] [21312] Listening to port: \\?\pipe\fire_emu_7cd3fa7c76031152 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [21312] Listening to port: \\\\?\\pipe\\fire_emu_7cd3fa7c76031152"}}
[debug] [2025-02-21T06:57:37.494Z] [worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: IDLE"}}
[debug] [2025-02-21T06:57:37.494Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:57:37.495Z] [worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"nationality":"","currentProfession":"","age":0,"_rev":"se7euW5U96P9qJ0OGAxMsw","notes":"","_updatedAt":"2025-02-21T06:57:35Z","_type":"booking","genre":"","status":"pending","_id":"se7euW5U96P9qJ0OGAxMuJ","currentLocation":"","totalPrice":850,"room":{"_type":"reference","_ref":"67fae916-4330-467c-9115-1e7f4fb0b368"},"permanentAddress":"","bookingDate":"2025-02-21T06:57:33.748Z","idNumber":"","name":"","_createdAt":"2025-02-21T06:57:35Z","bookedPeriod":[{"services":"","semester":"1st Semester","price":850,"year":"2025/2026"}]},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"nationality":"","currentProfession":"","age":0,"_rev":"se7euW5U96P9qJ0OGAxMsw","notes":"","_updatedAt":"2025-02-21T06:57:35Z","_type":"booking","genre":"","status":"pending","_id":"se7euW5U96P9qJ0OGAxMuJ","currentLocation":"","totalPrice":850,"room":{"_type":"reference","_ref":"67fae916-4330-467c-9115-1e7f4fb0b368"},"permanentAddress":"","bookingDate":"2025-02-21T06:57:33.748Z","idNumber":"","name":"","_createdAt":"2025-02-21T06:57:35Z","bookedPeriod":[{"services":"","semester":"1st Semester","price":850,"year":"2025/2026"}]},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"nationality\":\"\",\"currentProfession\":\"\",\"age\":0,\"_rev\":\"se7euW5U96P9qJ0OGAxMsw\",\"notes\":\"\",\"_updatedAt\":\"2025-02-21T06:57:35Z\",\"_type\":\"booking\",\"genre\":\"\",\"status\":\"pending\",\"_id\":\"se7euW5U96P9qJ0OGAxMuJ\",\"currentLocation\":\"\",\"totalPrice\":850,\"room\":{\"_type\":\"reference\",\"_ref\":\"67fae916-4330-467c-9115-1e7f4fb0b368\"},\"permanentAddress\":\"\",\"bookingDate\":\"2025-02-21T06:57:33.748Z\",\"idNumber\":\"\",\"name\":\"\",\"_createdAt\":\"2025-02-21T06:57:35Z\",\"bookedPeriod\":[{\"services\":\"\",\"semester\":\"1st Semester\",\"price\":850,\"year\":\"2025/2026\"}]},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"533","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"GkVtDE4CftoJMY0VjxYBXg\"","sanity-dataset":"production","sanity-document-id":"se7euW5U96P9qJ0OGAxMuJ","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAxMsw","sanity-transaction-time":"2025-02-21T06:57:35Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"533","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"GkVtDE4CftoJMY0VjxYBXg\"","sanity-dataset":"production","sanity-document-id":"se7euW5U96P9qJ0OGAxMuJ","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAxMsw","sanity-transaction-time":"2025-02-21T06:57:35Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"533\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"GkVtDE4CftoJMY0VjxYBXg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"se7euW5U96P9qJ0OGAxMuJ\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAxMsw\",\"sanity-transaction-time\":\"2025-02-21T06:57:35Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T06:57:37.539Z] [runtime-status] [26328] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T06:57:37.547Z] [runtime-status] [26328] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T06:57:37.548Z] [runtime-status] [26328] Listening to port: \\?\pipe\fire_emu_9d86e6d7315a8271 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26328] Listening to port: \\\\?\\pipe\\fire_emu_9d86e6d7315a8271"}}
[debug] [2025-02-21T06:57:37.620Z] [worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: IDLE"}}
[debug] [2025-02-21T06:57:37.620Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T06:57:37.620Z] [worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/67fae916-4330-467c-9115-1e7f4fb0b368"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/67fae916-4330-467c-9115-1e7f4fb0b368\"\n - Be careful, this may be a production service."}}
[info] >  {"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"se7euW5U96P9qJ0OGAtdkD","semester":"1st Semester","services":"","year":"2025/2026"},{"_key":"se7euW5U96P9qJ0OGAxMuJ","semester":"1st Semester","year":"2025/2026","services":""}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"_key":"204eac55723c","semester":"Summer","year":"2025/2026"},{"_key":"25e22a2d2721","semester":"Full Year","year":"2026/2027"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"keyOfBooking":"se7euW5U96P9qJ0OGAtdkD","semester":"1st Semester","services":"","year":"2025/2026"},{"_key":"se7euW5U96P9qJ0OGAxMuJ","semester":"1st Semester","year":"2025/2026","services":""}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"updatedBookedPeriods\":[{\"_key\":\"e9a7081713b0\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\"},{\"_key\":\"204eac55723c\",\"semester\":\"Summer\",\"year\":\"2025/2026\"},{\"_key\":\"25e22a2d2721\",\"semester\":\"Full Year\",\"year\":\"2026/2027\"},{\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\"},{\"keyOfBooking\":\"se7euW5U96P9qJ0OGAtdkD\",\"semester\":\"1st Semester\",\"services\":\"\",\"year\":\"2025/2026\"},{\"_key\":\"se7euW5U96P9qJ0OGAxMuJ\",\"semester\":\"1st Semester\",\"year\":\"2025/2026\",\"services\":\"\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/mutate/production?returnIds=true&returnDocuments=true&visibility=sync"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/mutate/production?returnIds=true&returnDocuments=true&visibility=sync\"\n - Be careful, this may be a production service."}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[debug] [2025-02-21T06:57:39.260Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1640.0398ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1640.0398ms"}}
[debug] [2025-02-21T06:57:39.261Z] [worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: IDLE"}}
[debug] [2025-02-21T06:57:39.261Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:57:39.261Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:57:39.261Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:57:35.622Z"],"workRunningCount":1}
[info] >  Document se7euW5U96P9qJ0OGAxMuJ updated in booking {"user":"Document se7euW5U96P9qJ0OGAxMuJ updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document se7euW5U96P9qJ0OGAxMuJ updated in booking"}}
[debug] [2025-02-21T06:57:40.337Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 2842.2591ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 2842.2591ms"}}
[debug] [2025-02-21T06:57:40.337Z] [worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: IDLE"}}
[debug] [2025-02-21T06:57:40.337Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:57:40.337Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:57:40.337Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:57:40.558Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:57:40.558Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T06:57:40.558Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T06:57:40.558Z"],"workRunningCount":1}
[debug] [2025-02-21T06:57:40.558Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T06:57:40.558Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T06:57:40.558Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T06:57:40.558Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T06:57:40.559Z] [worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_createdAt":"2025-02-19T16:26:07Z","title":"pedreira-70-room-1","isAvailable":true,"slug":{"_type":"slug","current":"pedreira-70-room-1"},"roomNumber":1,"priceWinter":1700,"bookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"year":"2025/2026","_key":"204eac55723c","semester":"Summer"},{"year":"2026/2027","_key":"25e22a2d2721","semester":"Full Year"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"year":"2024/2025","keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":""},{"semester":"1st Semester","services":"","year":"2025/2026","keyOfBooking":"se7euW5U96P9qJ0OGAtdkD"},{"services":"","_key":"se7euW5U96P9qJ0OGAxMuJ","semester":"1st Semester","year":"2025/2026"}],"_id":"67fae916-4330-467c-9115-1e7f4fb0b368","_rev":"se7euW5U96P9qJ0OGAxN81","priceSummer":599,"_updatedAt":"2025-02-21T06:57:39Z","_type":"room","availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025","semester":"Summer"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"year":"2025/2026","semester":"Both Semesters","_key":"b02ae94ce7440d3fc3bc9400e3e6acee"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"roomType":"Suite","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"services":[""]},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_createdAt":"2025-02-19T16:26:07Z","title":"pedreira-70-room-1","isAvailable":true,"slug":{"_type":"slug","current":"pedreira-70-room-1"},"roomNumber":1,"priceWinter":1700,"bookedPeriods":[{"_key":"e9a7081713b0","semester":"2nd Semester","year":"2025/2026"},{"year":"2025/2026","_key":"204eac55723c","semester":"Summer"},{"year":"2026/2027","_key":"25e22a2d2721","semester":"Full Year"},{"keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":"","year":"2024/2025"},{"year":"2024/2025","keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","semester":"Full Year","services":""},{"semester":"1st Semester","services":"","year":"2025/2026","keyOfBooking":"se7euW5U96P9qJ0OGAtdkD"},{"services":"","_key":"se7euW5U96P9qJ0OGAxMuJ","semester":"1st Semester","year":"2025/2026"}],"_id":"67fae916-4330-467c-9115-1e7f4fb0b368","_rev":"se7euW5U96P9qJ0OGAxN81","priceSummer":599,"_updatedAt":"2025-02-21T06:57:39Z","_type":"room","availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025","semester":"Summer"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"year":"2025/2026","semester":"Both Semesters","_key":"b02ae94ce7440d3fc3bc9400e3e6acee"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"roomType":"Suite","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"services":[""]},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_createdAt\":\"2025-02-19T16:26:07Z\",\"title\":\"pedreira-70-room-1\",\"isAvailable\":true,\"slug\":{\"_type\":\"slug\",\"current\":\"pedreira-70-room-1\"},\"roomNumber\":1,\"priceWinter\":1700,\"bookedPeriods\":[{\"_key\":\"e9a7081713b0\",\"semester\":\"2nd Semester\",\"year\":\"2025/2026\"},{\"year\":\"2025/2026\",\"_key\":\"204eac55723c\",\"semester\":\"Summer\"},{\"year\":\"2026/2027\",\"_key\":\"25e22a2d2721\",\"semester\":\"Full Year\"},{\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\",\"year\":\"2024/2025\"},{\"year\":\"2024/2025\",\"keyOfBooking\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"semester\":\"Full Year\",\"services\":\"\"},{\"semester\":\"1st Semester\",\"services\":\"\",\"year\":\"2025/2026\",\"keyOfBooking\":\"se7euW5U96P9qJ0OGAtdkD\"},{\"services\":\"\",\"_key\":\"se7euW5U96P9qJ0OGAxMuJ\",\"semester\":\"1st Semester\",\"year\":\"2025/2026\"}],\"_id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"_rev\":\"se7euW5U96P9qJ0OGAxN81\",\"priceSummer\":599,\"_updatedAt\":\"2025-02-21T06:57:39Z\",\"_type\":\"room\",\"availableSemesters\":[{\"_key\":\"33369861f45679c518ce18a734b42b43\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1827bb2a398c38efca6d49ca6191548e\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"59449e72e7684502915de6ed77687796\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"e6c650f8272768679db617d2fa563fd1\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"year\":\"2025/2026\",\"semester\":\"Both Semesters\",\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\"},{\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\",\"year\":\"2026/2027\"},{\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"7369660f0050ced55ba3875540066c06\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"roomType\":\"Suite\",\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"services\":[\"\"]},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2384","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Vz/VUn+IB9K0GnjOxk799A\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAxN81","sanity-transaction-time":"2025-02-21T06:57:39Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2384","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Vz/VUn+IB9K0GnjOxk799A\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAxN81","sanity-transaction-time":"2025-02-21T06:57:39Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2384\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"Vz/VUn+IB9K0GnjOxk799A\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAxN81\",\"sanity-transaction-time\":\"2025-02-21T06:57:39Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room {"user":"Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room"}}
[debug] [2025-02-21T06:57:40.998Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 439.7785ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 439.7785ms"}}
[debug] [2025-02-21T06:57:40.999Z] [worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: IDLE"}}
[debug] [2025-02-21T06:57:40.999Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T06:57:40.999Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T06:57:40.999Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:01:03.671Z] File D:\Freelance-Project\ossama\street-lobby\functions\package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\package.json changed, reloading triggers"}}
[debug] [2025-02-21T07:01:03.789Z] File D:\Freelance-Project\ossama\street-lobby\functions\package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\package-lock.json changed, reloading triggers"}}
[debug] [2025-02-21T07:01:04.799Z] Validating nodejs source
[debug] [2025-02-21T07:01:05.778Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2",
    "uuid": "^11.1.0"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T07:01:05.778Z] Building nodejs source
[debug] [2025-02-21T07:01:05.778Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T07:01:05.779Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T07:01:05.784Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8706

[debug] [2025-02-21T07:01:06.434Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[debug] [2025-02-21T07:01:11.460Z] [worker-pool] Shutting down IDLE worker (us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T07:01:11.460Z] [worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: FINISHING"}}
[debug] [2025-02-21T07:01:11.460Z] [worker-pool] Shutting down IDLE worker (us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-sanityWebhook)"}}
[debug] [2025-02-21T07:01:11.460Z] [worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: FINISHING"}}
[debug] [2025-02-21T07:01:11.467Z] [worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: exited"}}
[debug] [2025-02-21T07:01:11.467Z] [worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-bee5d1c5-dd2a-4d64-ad2d-15a12a4f190b]: FINISHED"}}
[debug] [2025-02-21T07:01:11.468Z] [worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: exited"}}
[debug] [2025-02-21T07:01:11.468Z] [worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-6ce9ca95-676d-405f-bfcb-5664a5f30eeb]: FINISHED"}}
[debug] [2025-02-21T07:07:18.173Z] File D:\Freelance-Project\ossama\street-lobby\functions\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js changed, reloading triggers"}}
[debug] [2025-02-21T07:07:19.179Z] Validating nodejs source
[debug] [2025-02-21T07:07:20.399Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2",
    "uuid": "^11.1.0"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T07:07:20.399Z] Building nodejs source
[debug] [2025-02-21T07:07:20.399Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T07:07:20.400Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T07:07:20.405Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8502

[debug] [2025-02-21T07:07:21.097Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[debug] [2025-02-21T07:08:40.794Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:40.794Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:40.794Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:40.794Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:40.794Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:08:40.796Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:40.796Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:08:40.796Z] [worker-pool] Cleaned up workers for us-central1-handleBookingUpdate: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-handleBookingUpdate: 1 --> 0"}}
[debug] [2025-02-21T07:08:40.796Z] [worker-pool] Cleaned up workers for us-central1-sanityWebhook: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sanityWebhook: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T07:08:40.802Z] [worker-pool] addWorker(us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T07:08:40.802Z] [worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1"}}
[debug] [2025-02-21T07:08:40.852Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:40.794Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:40.852Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:40.794Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z"],"workRunningCount":2}
[debug] [2025-02-21T07:08:40.852Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:08:40.854Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:40.854Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T07:08:40.859Z] [worker-pool] addWorker(us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sanityWebhook)"}}
[debug] [2025-02-21T07:08:40.859Z] [worker-pool] Adding worker with key us-central1-sanityWebhook, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sanityWebhook, total=1"}}
[info] >  (node:26256) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:26256) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:26256) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T07:08:42.209Z] [runtime-status] [26256] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.210Z] [runtime-status] [26256] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.210Z] [runtime-status] [26256] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T07:08:42.211Z] [runtime-status] [26256] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[info] >  (node:27236) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:27236) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:27236) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T07:08:42.249Z] [runtime-status] [27236] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.250Z] [runtime-status] [27236] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.251Z] [runtime-status] [27236] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T07:08:42.252Z] [runtime-status] [27236] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.539Z] [runtime-status] [26256] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T07:08:42.540Z] [runtime-status] [26256] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T07:08:42.540Z] [runtime-status] [26256] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.544Z] [runtime-status] [26256] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.546Z] [runtime-status] [26256] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.546Z] [runtime-status] [26256] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T07:08:42.572Z] [runtime-status] [27236] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T07:08:42.573Z] [runtime-status] [27236] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T07:08:42.573Z] [runtime-status] [27236] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.577Z] [runtime-status] [27236] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.579Z] [runtime-status] [27236] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:08:42.579Z] [runtime-status] [27236] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T07:08:42.753Z] [runtime-status] [26256] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T07:08:42.760Z] [runtime-status] [26256] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T07:08:42.761Z] [runtime-status] [26256] Listening to port: \\?\pipe\fire_emu_2c544ccadee7230f {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [26256] Listening to port: \\\\?\\pipe\\fire_emu_2c544ccadee7230f"}}
[debug] [2025-02-21T07:08:42.779Z] [runtime-status] [27236] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T07:08:42.787Z] [runtime-status] [27236] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T07:08:42.787Z] [runtime-status] [27236] Listening to port: \\?\pipe\fire_emu_1124668de874d0d4 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [27236] Listening to port: \\\\?\\pipe\\fire_emu_1124668de874d0d4"}}
[debug] [2025-02-21T07:08:42.832Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:08:42.833Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:08:42.833Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"status":"pending","idNumber":"","bookedPeriod":[{"year":"2025/2026","price":850,"semester":"1st Semester","services":""}],"permanentAddress":"","currentProfession":"","genre":"","name":"","_updatedAt":"2025-02-21T06:57:35Z","nationality":"","_rev":"se7euW5U96P9qJ0OGAxMsw","_type":"booking","bookingDate":"2025-02-21T06:57:33.748Z","_id":"se7euW5U96P9qJ0OGAxMuJ","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"notes":"","_createdAt":"2025-02-21T06:57:35Z","totalPrice":850,"currentLocation":"","age":0},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"status":"pending","idNumber":"","bookedPeriod":[{"year":"2025/2026","price":850,"semester":"1st Semester","services":""}],"permanentAddress":"","currentProfession":"","genre":"","name":"","_updatedAt":"2025-02-21T06:57:35Z","nationality":"","_rev":"se7euW5U96P9qJ0OGAxMsw","_type":"booking","bookingDate":"2025-02-21T06:57:33.748Z","_id":"se7euW5U96P9qJ0OGAxMuJ","room":{"_ref":"67fae916-4330-467c-9115-1e7f4fb0b368","_type":"reference"},"notes":"","_createdAt":"2025-02-21T06:57:35Z","totalPrice":850,"currentLocation":"","age":0},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"status\":\"pending\",\"idNumber\":\"\",\"bookedPeriod\":[{\"year\":\"2025/2026\",\"price\":850,\"semester\":\"1st Semester\",\"services\":\"\"}],\"permanentAddress\":\"\",\"currentProfession\":\"\",\"genre\":\"\",\"name\":\"\",\"_updatedAt\":\"2025-02-21T06:57:35Z\",\"nationality\":\"\",\"_rev\":\"se7euW5U96P9qJ0OGAxMsw\",\"_type\":\"booking\",\"bookingDate\":\"2025-02-21T06:57:33.748Z\",\"_id\":\"se7euW5U96P9qJ0OGAxMuJ\",\"room\":{\"_ref\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"_type\":\"reference\"},\"notes\":\"\",\"_createdAt\":\"2025-02-21T06:57:35Z\",\"totalPrice\":850,\"currentLocation\":\"\",\"age\":0},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"533","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"6IlrTGSvlHWLQ1ml5m+6gA\"","sanity-dataset":"production","sanity-document-id":"se7euW5U96P9qJ0OGAxMuJ","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAyovW","sanity-transaction-time":"2025-02-21T07:08:40Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"533","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"6IlrTGSvlHWLQ1ml5m+6gA\"","sanity-dataset":"production","sanity-document-id":"se7euW5U96P9qJ0OGAxMuJ","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAyovW","sanity-transaction-time":"2025-02-21T07:08:40Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"533\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"6IlrTGSvlHWLQ1ml5m+6gA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"se7euW5U96P9qJ0OGAxMuJ\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAyovW\",\"sanity-transaction-time\":\"2025-02-21T07:08:40Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T07:08:42.863Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:08:42.864Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:08:42.864Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/67fae916-4330-467c-9115-1e7f4fb0b368"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/67fae916-4330-467c-9115-1e7f4fb0b368\"\n - Be careful, this may be a production service."}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[debug] [2025-02-21T07:08:43.284Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 420.7186ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 420.7186ms"}}
[debug] [2025-02-21T07:08:43.285Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:08:43.285Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:43.285Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:43.285Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:43.910Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:43.910Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:43.910Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:43.910Z"],"workRunningCount":2}
[debug] [2025-02-21T07:08:43.910Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:08:43.911Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:43.911Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:08:43.911Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:08:43.912Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:08:44.131Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 219.2489ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 219.2489ms"}}
[debug] [2025-02-21T07:08:44.131Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:08:44.131Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:44.131Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:44.131Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:44.912Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:44.912Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:44.912Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:44.912Z"],"workRunningCount":2}
[debug] [2025-02-21T07:08:44.912Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:08:44.912Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:44.912Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:08:44.912Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:08:44.913Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:08:45.139Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 226.1106ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 226.1106ms"}}
[debug] [2025-02-21T07:08:45.139Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:08:45.139Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:45.139Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:45.139Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:40.852Z"],"workRunningCount":1}
[info] >  Document se7euW5U96P9qJ0OGAxMuJ deleted from booking {"user":"Document se7euW5U96P9qJ0OGAxMuJ deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document se7euW5U96P9qJ0OGAxMuJ deleted from booking"}}
[debug] [2025-02-21T07:08:45.581Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 2748.1359ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 2748.1359ms"}}
[debug] [2025-02-21T07:08:45.581Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:08:45.581Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:45.581Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:45.581Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:46.295Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:46.295Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:46.296Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:46.295Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:46.296Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:08:46.296Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:46.296Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:08:46.296Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:08:46.296Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:08:46.519Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 222.4324ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 222.4324ms"}}
[debug] [2025-02-21T07:08:46.519Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:08:46.519Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:46.519Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:46.519Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:47.700Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:47.700Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:47.700Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:47.700Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:47.700Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:08:47.701Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:47.701Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:08:47.701Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:08:47.701Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:08:47.923Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 222.5276ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 222.5276ms"}}
[debug] [2025-02-21T07:08:47.924Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:08:47.924Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:47.924Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:47.924Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:51.329Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:51.329Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:51.329Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:51.329Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:51.329Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:08:51.330Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:51.330Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:08:51.330Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:08:51.330Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:08:51.553Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 222.8692ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 222.8692ms"}}
[debug] [2025-02-21T07:08:51.553Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:08:51.553Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:51.553Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:51.553Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:52.407Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:52.407Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:52.408Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:52.407Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:52.408Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:08:52.408Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:52.408Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:08:52.408Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:08:52.408Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_rev":"gbwTgqOq53YDSh8fvmzkjw","slug":{"current":"arroios-room-1","_type":"slug"},"roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"isAvailable":true,"_type":"room","_createdAt":"2025-02-19T14:46:30Z","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomNumber":1,"priceWinter":1500,"title":"arroios-room-1","priceSummer":399,"availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"year":"2025/2026","semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"_updatedAt":"2025-02-21T07:08:52Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_rev":"gbwTgqOq53YDSh8fvmzkjw","slug":{"current":"arroios-room-1","_type":"slug"},"roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"isAvailable":true,"_type":"room","_createdAt":"2025-02-19T14:46:30Z","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomNumber":1,"priceWinter":1500,"title":"arroios-room-1","priceSummer":399,"availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"year":"2025/2026","semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"_updatedAt":"2025-02-21T07:08:52Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_rev\":\"gbwTgqOq53YDSh8fvmzkjw\",\"slug\":{\"current\":\"arroios-room-1\",\"_type\":\"slug\"},\"roomType\":\"Single bed\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"isAvailable\":true,\"_type\":\"room\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"roomNumber\":1,\"priceWinter\":1500,\"title\":\"arroios-room-1\",\"priceSummer\":399,\"availableSemesters\":[{\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"year\":\"2025/2026\",\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\"},{\"year\":\"2026/2027\",\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\"},{\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\"},{\"year\":\"2026/2027\",\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\"}],\"_updatedAt\":\"2025-02-21T07:08:52Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1752","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"wXhLCxzzbJGH1XyEK5Pqng\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmzkjw","sanity-transaction-time":"2025-02-21T07:08:52Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1752","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"wXhLCxzzbJGH1XyEK5Pqng\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmzkjw","sanity-transaction-time":"2025-02-21T07:08:52Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1752\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"wXhLCxzzbJGH1XyEK5Pqng\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvmzkjw\",\"sanity-transaction-time\":\"2025-02-21T07:08:52Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:08:52.859Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 450.9562ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 450.9562ms"}}
[debug] [2025-02-21T07:08:52.860Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:08:52.860Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:52.860Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:52.860Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:53.065Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:53.065Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:08:53.065Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:53.065Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:53.065Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:08:53.066Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:53.066Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:08:53.066Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:08:53.066Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_type":"room","title":"arroios-room-1","roomType":"Single bed","_rev":"e6852d62-130f-4860-8dfa-55f752dc443c","isAvailable":true,"priceSummer":399,"slug":{"_type":"slug","current":"arroios-room-1"},"_createdAt":"2025-02-19T14:46:30Z","roomNumber":1,"priceWinter":1500,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_updatedAt":"2025-02-21T06:52:53Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_type":"room","title":"arroios-room-1","roomType":"Single bed","_rev":"e6852d62-130f-4860-8dfa-55f752dc443c","isAvailable":true,"priceSummer":399,"slug":{"_type":"slug","current":"arroios-room-1"},"_createdAt":"2025-02-19T14:46:30Z","roomNumber":1,"priceWinter":1500,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_updatedAt":"2025-02-21T06:52:53Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_type\":\"room\",\"title\":\"arroios-room-1\",\"roomType\":\"Single bed\",\"_rev\":\"e6852d62-130f-4860-8dfa-55f752dc443c\",\"isAvailable\":true,\"priceSummer\":399,\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_createdAt\":\"2025-02-19T14:46:30Z\",\"roomNumber\":1,\"priceWinter\":1500,\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"semester\":\"1st Semester\",\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_updatedAt\":\"2025-02-21T06:52:53Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1773","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"o2T5RuzZEe6YCAe+5OZ2vw\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmzkjw","sanity-transaction-time":"2025-02-21T07:08:52Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1773","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"o2T5RuzZEe6YCAe+5OZ2vw\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvmzkjw","sanity-transaction-time":"2025-02-21T07:08:52Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1773\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"o2T5RuzZEe6YCAe+5OZ2vw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvmzkjw\",\"sanity-transaction-time\":\"2025-02-21T07:08:52Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T07:08:53.941Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:53.941Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:53.065Z"],"workRunningCount":1}
[debug] [2025-02-21T07:08:53.941Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:53.065Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:08:53.941Z"],"workRunningCount":2}
[debug] [2025-02-21T07:08:53.941Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:08:53.941Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:08:53.941Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:08:53.941Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:08:53.941Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:08:54.144Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 202.9348ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 202.9348ms"}}
[debug] [2025-02-21T07:08:54.145Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:08:54.145Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:54.145Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:54.145Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:08:53.065Z"],"workRunningCount":1}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room"}}
[debug] [2025-02-21T07:08:54.469Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1402.8173ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1402.8173ms"}}
[debug] [2025-02-21T07:08:54.470Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:08:54.470Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:08:54.470Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:08:54.470Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:09:00.863Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:09:00.863Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:09:00.864Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:09:00.863Z"],"workRunningCount":1}
[debug] [2025-02-21T07:09:00.864Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:09:00.865Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:09:00.865Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:09:00.865Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:09:00.865Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:09:01.089Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 224.2447ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 224.2447ms"}}
[debug] [2025-02-21T07:09:01.090Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:09:01.090Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:09:01.090Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:09:01.090Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:09:10.166Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:09:10.166Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:09:10.166Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:09:10.166Z"],"workRunningCount":1}
[debug] [2025-02-21T07:09:10.166Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:09:10.167Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:09:10.167Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:09:10.167Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:09:10.168Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:09:10.381Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 213.0909ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 213.0909ms"}}
[debug] [2025-02-21T07:09:10.381Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:09:10.381Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:09:10.381Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:09:10.381Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:09:20.657Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:09:20.657Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:09:20.657Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:09:20.657Z"],"workRunningCount":1}
[debug] [2025-02-21T07:09:20.657Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:09:20.658Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:09:20.658Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:09:20.658Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:09:20.659Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:09:20.870Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 211.8622ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 211.8622ms"}}
[debug] [2025-02-21T07:09:20.871Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:09:20.871Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:09:20.871Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:09:20.871Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:09:41.750Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:09:41.750Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:09:41.750Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:09:41.750Z"],"workRunningCount":1}
[debug] [2025-02-21T07:09:41.750Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:09:41.751Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:09:41.752Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:09:41.752Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:09:41.752Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:09:41.960Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 208.2386ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 208.2386ms"}}
[debug] [2025-02-21T07:09:41.960Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:09:41.960Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:09:41.960Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:09:41.960Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:10:19.451Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:10:19.451Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:10:19.451Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:10:19.451Z"],"workRunningCount":1}
[debug] [2025-02-21T07:10:19.451Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:10:19.454Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:10:19.454Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:10:19.454Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:10:19.455Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:10:19.672Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 217.9633ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 217.9633ms"}}
[debug] [2025-02-21T07:10:19.673Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:10:19.673Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:10:19.673Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:10:19.673Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:10:41.639Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:10:41.639Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:10:41.639Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:10:41.639Z"],"workRunningCount":1}
[debug] [2025-02-21T07:10:41.639Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:10:41.640Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:10:41.641Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:10:41.641Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:10:41.641Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:10:41.868Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 226.5919ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 226.5919ms"}}
[debug] [2025-02-21T07:10:41.868Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:10:41.868Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:10:41.868Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:10:41.868Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:13.960Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:13.960Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:13.960Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:13.960Z"],"workRunningCount":1}
[debug] [2025-02-21T07:11:13.960Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:11:13.961Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:11:13.961Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:11:13.961Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:11:13.962Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"title":"arroios-room-1","_createdAt":"2025-02-19T14:46:30Z","roomType":"Single bed","_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","_rev":"407ca886-68fd-4eb0-9426-e8bb1bb051a7","bookedPeriods":[{"_key":"ad7f94703e5c"}],"isAvailable":true,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_type":"room","slug":{"_type":"slug","current":"arroios-room-1"},"roomNumber":1,"_updatedAt":"2025-02-21T07:08:52Z","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"priceWinter":1500,"priceSummer":399},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"title":"arroios-room-1","_createdAt":"2025-02-19T14:46:30Z","roomType":"Single bed","_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","_rev":"407ca886-68fd-4eb0-9426-e8bb1bb051a7","bookedPeriods":[{"_key":"ad7f94703e5c"}],"isAvailable":true,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_type":"room","slug":{"_type":"slug","current":"arroios-room-1"},"roomNumber":1,"_updatedAt":"2025-02-21T07:08:52Z","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"priceWinter":1500,"priceSummer":399},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"title\":\"arroios-room-1\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"roomType\":\"Single bed\",\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_rev\":\"407ca886-68fd-4eb0-9426-e8bb1bb051a7\",\"bookedPeriods\":[{\"_key\":\"ad7f94703e5c\"}],\"isAvailable\":true,\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_type\":\"room\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"roomNumber\":1,\"_updatedAt\":\"2025-02-21T07:08:52Z\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"priceWinter\":1500,\"priceSummer\":399},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1815","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"reyjEbsXU8QeU5IVru6kWQ\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"407ca886-68fd-4eb0-9426-e8bb1bb051a7","sanity-transaction-time":"2025-02-21T07:11:14Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1815","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"reyjEbsXU8QeU5IVru6kWQ\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"407ca886-68fd-4eb0-9426-e8bb1bb051a7","sanity-transaction-time":"2025-02-21T07:11:14Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1815\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"reyjEbsXU8QeU5IVru6kWQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"407ca886-68fd-4eb0-9426-e8bb1bb051a7\",\"sanity-transaction-time\":\"2025-02-21T07:11:14Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:11:14.419Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 457.0052ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 457.0052ms"}}
[debug] [2025-02-21T07:11:14.419Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:11:14.419Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:11:14.419Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:11:14.419Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:15.633Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:15.633Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:15.633Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:15.633Z"],"workRunningCount":1}
[debug] [2025-02-21T07:11:15.633Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:11:15.634Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:11:15.634Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:11:15.634Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:11:15.634Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"roomNumber":1,"_type":"room","_rev":"9bf0748f-305c-434b-9334-a93a1e1b520d","isAvailable":true,"bookedPeriods":[{"_key":"ad7f94703e5c"}],"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"year":"2024/2025","semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"year":"2025/2026","semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"year":"2025/2026","semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"slug":{"_type":"slug","current":"arroios-room-1"},"title":"arroios-room-1","priceWinter":1500,"priceSummer":399,"_updatedAt":"2025-02-21T07:08:52Z","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomType":"Single bed","_createdAt":"2025-02-19T14:46:30Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"roomNumber":1,"_type":"room","_rev":"9bf0748f-305c-434b-9334-a93a1e1b520d","isAvailable":true,"bookedPeriods":[{"_key":"ad7f94703e5c"}],"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"year":"2024/2025","semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"year":"2025/2026","semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"year":"2025/2026","semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"slug":{"_type":"slug","current":"arroios-room-1"},"title":"arroios-room-1","priceWinter":1500,"priceSummer":399,"_updatedAt":"2025-02-21T07:08:52Z","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomType":"Single bed","_createdAt":"2025-02-19T14:46:30Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"roomNumber\":1,\"_type\":\"room\",\"_rev\":\"9bf0748f-305c-434b-9334-a93a1e1b520d\",\"isAvailable\":true,\"bookedPeriods\":[{\"_key\":\"ad7f94703e5c\"}],\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"year\":\"2024/2025\",\"semester\":\"Both Semesters\",\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"year\":\"2025/2026\",\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"year\":\"2025/2026\",\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\"}],\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"title\":\"arroios-room-1\",\"priceWinter\":1500,\"priceSummer\":399,\"_updatedAt\":\"2025-02-21T07:08:52Z\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"roomType\":\"Single bed\",\"_createdAt\":\"2025-02-19T14:46:30Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1815","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"PJGHSNldXTR3O/TKM8duhg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"9bf0748f-305c-434b-9334-a93a1e1b520d","sanity-transaction-time":"2025-02-21T07:11:15Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1815","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"PJGHSNldXTR3O/TKM8duhg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"9bf0748f-305c-434b-9334-a93a1e1b520d","sanity-transaction-time":"2025-02-21T07:11:15Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1815\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"PJGHSNldXTR3O/TKM8duhg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"9bf0748f-305c-434b-9334-a93a1e1b520d\",\"sanity-transaction-time\":\"2025-02-21T07:11:15Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:11:16.086Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 452.2657ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 452.2657ms"}}
[debug] [2025-02-21T07:11:16.087Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:11:16.087Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:11:16.087Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:11:16.087Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:17.297Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:17.297Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:17.297Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:17.297Z"],"workRunningCount":1}
[debug] [2025-02-21T07:11:17.297Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:11:17.298Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:11:17.298Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:11:17.298Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:11:17.298Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"roomNumber":1,"roomType":"Single bed","bookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester"}],"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","slug":{"_type":"slug","current":"arroios-room-1"},"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","isAvailable":true,"title":"arroios-room-1","_type":"room","priceWinter":1500,"_rev":"8f50c7f0-7a1f-4cfb-8b7e-17436bcf6257","_updatedAt":"2025-02-21T07:11:16Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"roomNumber":1,"roomType":"Single bed","bookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester"}],"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","slug":{"_type":"slug","current":"arroios-room-1"},"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","isAvailable":true,"title":"arroios-room-1","_type":"room","priceWinter":1500,"_rev":"8f50c7f0-7a1f-4cfb-8b7e-17436bcf6257","_updatedAt":"2025-02-21T07:11:16Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"roomNumber\":1,\"roomType\":\"Single bed\",\"bookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\"}],\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\"},{\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\"},{\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"priceSummer\":399,\"_createdAt\":\"2025-02-19T14:46:30Z\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"isAvailable\":true,\"title\":\"arroios-room-1\",\"_type\":\"room\",\"priceWinter\":1500,\"_rev\":\"8f50c7f0-7a1f-4cfb-8b7e-17436bcf6257\",\"_updatedAt\":\"2025-02-21T07:11:16Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1841","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Fc1LTiiKJ848IXzAjhub2Q\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"8f50c7f0-7a1f-4cfb-8b7e-17436bcf6257","sanity-transaction-time":"2025-02-21T07:11:16Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1841","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Fc1LTiiKJ848IXzAjhub2Q\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"8f50c7f0-7a1f-4cfb-8b7e-17436bcf6257","sanity-transaction-time":"2025-02-21T07:11:16Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1841\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"Fc1LTiiKJ848IXzAjhub2Q\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"8f50c7f0-7a1f-4cfb-8b7e-17436bcf6257\",\"sanity-transaction-time\":\"2025-02-21T07:11:16Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:11:17.746Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 447.5892ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 447.5892ms"}}
[debug] [2025-02-21T07:11:17.746Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:11:17.746Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:11:17.746Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:11:17.746Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:17.951Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:17.951Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:17.951Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:17.951Z"],"workRunningCount":1}
[debug] [2025-02-21T07:11:17.951Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:11:17.952Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:11:17.952Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:11:17.952Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:11:17.952Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"roomNumber":1,"title":"arroios-room-1","_type":"room","_createdAt":"2025-02-19T14:46:30Z","_rev":"70678f12-c3e8-4223-9ea8-542e259bd859","priceWinter":1500,"roomType":"Single bed","_updatedAt":"2025-02-21T07:11:17Z","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"isAvailable":true,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","bookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"}],"priceSummer":399,"slug":{"_type":"slug","current":"arroios-room-1"}},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"roomNumber":1,"title":"arroios-room-1","_type":"room","_createdAt":"2025-02-19T14:46:30Z","_rev":"70678f12-c3e8-4223-9ea8-542e259bd859","priceWinter":1500,"roomType":"Single bed","_updatedAt":"2025-02-21T07:11:17Z","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"isAvailable":true,"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","bookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"}],"priceSummer":399,"slug":{"_type":"slug","current":"arroios-room-1"}},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"roomNumber\":1,\"title\":\"arroios-room-1\",\"_type\":\"room\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"_rev\":\"70678f12-c3e8-4223-9ea8-542e259bd859\",\"priceWinter\":1500,\"roomType\":\"Single bed\",\"_updatedAt\":\"2025-02-21T07:11:17Z\",\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"year\":\"2026/2027\",\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"isAvailable\":true,\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"bookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"}],\"priceSummer\":399,\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"}},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1860","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"6N4c/hVg4r3lHw+K52oWrw\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"70678f12-c3e8-4223-9ea8-542e259bd859","sanity-transaction-time":"2025-02-21T07:11:17Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1860","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"6N4c/hVg4r3lHw+K52oWrw\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"70678f12-c3e8-4223-9ea8-542e259bd859","sanity-transaction-time":"2025-02-21T07:11:17Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1860\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"6N4c/hVg4r3lHw+K52oWrw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"70678f12-c3e8-4223-9ea8-542e259bd859\",\"sanity-transaction-time\":\"2025-02-21T07:11:17Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:11:19.388Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1435.8692ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1435.8692ms"}}
[debug] [2025-02-21T07:11:19.388Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:11:19.388Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:11:19.388Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:11:19.388Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:21.603Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:21.603Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:21.603Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:21.603Z"],"workRunningCount":1}
[debug] [2025-02-21T07:11:21.603Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:11:21.604Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:11:21.604Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:11:21.604Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:11:21.604Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"year":"2025/2026","semester":"Both Semesters","_key":"57ca5240b671920685e30da04c5b4d9c"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"year":"2026/2027","semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_type":"room","isAvailable":true,"_updatedAt":"2025-02-21T07:11:21Z","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","bookedPeriods":[{"_key":"ad7f94703e5c","year":"2024/2025","semester":"1st Semester"}],"priceSummer":399,"slug":{"_type":"slug","current":"arroios-room-1"},"roomType":"Single bed","priceWinter":1500,"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_rev":"se7euW5U96P9qJ0OGAz4w6","roomNumber":1,"_createdAt":"2025-02-19T14:46:30Z","title":"arroios-room-1"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"year":"2025/2026","semester":"Both Semesters","_key":"57ca5240b671920685e30da04c5b4d9c"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"year":"2026/2027","semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_type":"room","isAvailable":true,"_updatedAt":"2025-02-21T07:11:21Z","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","bookedPeriods":[{"_key":"ad7f94703e5c","year":"2024/2025","semester":"1st Semester"}],"priceSummer":399,"slug":{"_type":"slug","current":"arroios-room-1"},"roomType":"Single bed","priceWinter":1500,"property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_rev":"se7euW5U96P9qJ0OGAz4w6","roomNumber":1,"_createdAt":"2025-02-19T14:46:30Z","title":"arroios-room-1"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"semester\":\"Both Semesters\",\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"year\":\"2025/2026\",\"semester\":\"Both Semesters\",\"_key\":\"57ca5240b671920685e30da04c5b4d9c\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"year\":\"2026/2027\",\"semester\":\"2nd Semester\",\"_key\":\"b13951b0acd54e742a33792b49c92ac6\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_type\":\"room\",\"isAvailable\":true,\"_updatedAt\":\"2025-02-21T07:11:21Z\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"bookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"}],\"priceSummer\":399,\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"roomType\":\"Single bed\",\"priceWinter\":1500,\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_rev\":\"se7euW5U96P9qJ0OGAz4w6\",\"roomNumber\":1,\"_createdAt\":\"2025-02-19T14:46:30Z\",\"title\":\"arroios-room-1\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1839","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"zltJeRxSOcx1DzdwrCptpw\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAz4w6","sanity-transaction-time":"2025-02-21T07:11:21Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1839","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"zltJeRxSOcx1DzdwrCptpw\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAz4w6","sanity-transaction-time":"2025-02-21T07:11:21Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1839\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"zltJeRxSOcx1DzdwrCptpw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAz4w6\",\"sanity-transaction-time\":\"2025-02-21T07:11:21Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:11:22.046Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 441.6617ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 441.6617ms"}}
[debug] [2025-02-21T07:11:22.046Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:11:22.046Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:11:22.046Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:11:22.046Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:22.246Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:22.246Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:22.246Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:11:22.246Z"],"workRunningCount":1}
[debug] [2025-02-21T07:11:22.246Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:11:22.247Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:11:22.247Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:11:22.247Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:11:22.247Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"slug":{"_type":"slug","current":"arroios-room-1"},"title":"arroios-room-1","_updatedAt":"2025-02-21T07:11:17Z","priceSummer":399,"roomType":"Single bed","bookedPeriods":[{"_key":"ad7f94703e5c","year":"2024/2025","semester":"1st Semester"}],"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_rev":"70678f12-c3e8-4223-9ea8-542e259bd859","_type":"room","roomNumber":1,"priceWinter":1500},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"slug":{"_type":"slug","current":"arroios-room-1"},"title":"arroios-room-1","_updatedAt":"2025-02-21T07:11:17Z","priceSummer":399,"roomType":"Single bed","bookedPeriods":[{"_key":"ad7f94703e5c","year":"2024/2025","semester":"1st Semester"}],"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_rev":"70678f12-c3e8-4223-9ea8-542e259bd859","_type":"room","roomNumber":1,"priceWinter":1500},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_createdAt\":\"2025-02-19T14:46:30Z\",\"isAvailable\":true,\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"title\":\"arroios-room-1\",\"_updatedAt\":\"2025-02-21T07:11:17Z\",\"priceSummer\":399,\"roomType\":\"Single bed\",\"bookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"}],\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_rev\":\"70678f12-c3e8-4223-9ea8-542e259bd859\",\"_type\":\"room\",\"roomNumber\":1,\"priceWinter\":1500},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1860","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"CWRb1EbOj/4NZkNagvEWLg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAz4w6","sanity-transaction-time":"2025-02-21T07:11:21Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1860","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"CWRb1EbOj/4NZkNagvEWLg\"","sanity-dataset":"production","sanity-document-id":"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAz4w6","sanity-transaction-time":"2025-02-21T07:11:21Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1860\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"CWRb1EbOj/4NZkNagvEWLg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAz4w6\",\"sanity-transaction-time\":\"2025-02-21T07:11:21Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room {"user":"Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.221e3097-7d28-45b3-b2b3-3bb55c123ba6 deleted from room"}}
[debug] [2025-02-21T07:11:23.662Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1414.9202ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1414.9202ms"}}
[debug] [2025-02-21T07:11:23.662Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:11:23.662Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:11:23.662Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:11:23.662Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:47.426Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:11:47.426Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:11:47.426Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:11:47.426Z"],"workRunningCount":1}
[debug] [2025-02-21T07:11:47.427Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:11:47.428Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:11:47.428Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:11:47.428Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:11:47.428Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"} {"user":{"severity":"ERROR","message":"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:80\n    at Array.some (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:49\n    at Array.filter (<anonymous>)\n    at D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js:210:10\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async runFunction (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)\n    at async runHTTPS (C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)\n    at async C:\\Users\\Elias Emon\\AppData\\Roaming\\nvm\\v22.0.0\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Error updating room: TypeError: Cannot read properties of undefined (reading 'split')\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:80\\n    at Array.some (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:49\\n    at Array.filter (<anonymous>)\\n    at D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\index.js:210:10\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\\n    at async runFunction (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:506:9)\\n    at async runHTTPS (C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:531:5)\\n    at async C:\\\\Users\\\\Elias Emon\\\\AppData\\\\Roaming\\\\nvm\\\\v22.0.0\\\\node_modules\\\\firebase-tools\\\\lib\\\\emulator\\\\functionsEmulatorRuntime.js:694:21\"}"}}
[debug] [2025-02-21T07:11:47.634Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 206.1522ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 206.1522ms"}}
[debug] [2025-02-21T07:11:47.635Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:11:47.635Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:11:47.635Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:11:47.635Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:12:38.114Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:12:38.114Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:12:38.114Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:12:38.114Z"],"workRunningCount":1}
[debug] [2025-02-21T07:12:38.114Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:12:38.115Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:12:38.115Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:12:38.115Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:12:38.115Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"bookedPeriods":[{"year":"2025/2026","semester":"2nd Semester","_key":"e9a7081713b0"},{"_key":"204eac55723c","year":"2025/2026","semester":"Summer"},{"_key":"25e22a2d2721","year":"2026/2027","semester":"Full Year"},{"_key":"e1048138c3b17620d3909eb24a68bf86","services":"","keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","year":"2024/2025","semester":"Full Year"},{"year":"2024/2025","semester":"Full Year","services":"","keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","_key":"eeb4c2ed87caf1d8337b76fecf484138"},{"services":"","keyOfBooking":"se7euW5U96P9qJ0OGAtdkD","year":"2025/2026","semester":"1st Semester","_key":"3b2263c1563da49deb04357c16070372"},{"_key":"se7euW5U96P9qJ0OGAxMuJ","year":"2025/2026","semester":"1st Semester","services":""}],"services":[""],"_type":"room","_rev":"013be71e-d6d8-4600-bfbb-ad927fc940b9","slug":{"_type":"slug","current":"pedreira-70-room-1"},"roomNumber":1,"isAvailable":true,"property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"roomType":"Suite","priceSummer":599,"_createdAt":"2025-02-19T16:26:07Z","priceWinter":1700,"_updatedAt":"2025-02-21T06:57:39Z","availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"year":"2025/2026","semester":"Both Semesters","_key":"b02ae94ce7440d3fc3bc9400e3e6acee"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"title":"pedreira-70-room-1","_id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"bookedPeriods":[{"year":"2025/2026","semester":"2nd Semester","_key":"e9a7081713b0"},{"_key":"204eac55723c","year":"2025/2026","semester":"Summer"},{"_key":"25e22a2d2721","year":"2026/2027","semester":"Full Year"},{"_key":"e1048138c3b17620d3909eb24a68bf86","services":"","keyOfBooking":"oVMkP0YmhyBGyJroWj5s0x","year":"2024/2025","semester":"Full Year"},{"year":"2024/2025","semester":"Full Year","services":"","keyOfBooking":"drafts.oVMkP0YmhyBGyJroWj5s0x","_key":"eeb4c2ed87caf1d8337b76fecf484138"},{"services":"","keyOfBooking":"se7euW5U96P9qJ0OGAtdkD","year":"2025/2026","semester":"1st Semester","_key":"3b2263c1563da49deb04357c16070372"},{"_key":"se7euW5U96P9qJ0OGAxMuJ","year":"2025/2026","semester":"1st Semester","services":""}],"services":[""],"_type":"room","_rev":"013be71e-d6d8-4600-bfbb-ad927fc940b9","slug":{"_type":"slug","current":"pedreira-70-room-1"},"roomNumber":1,"isAvailable":true,"property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"roomType":"Suite","priceSummer":599,"_createdAt":"2025-02-19T16:26:07Z","priceWinter":1700,"_updatedAt":"2025-02-21T06:57:39Z","availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"year":"2025/2026","semester":"Both Semesters","_key":"b02ae94ce7440d3fc3bc9400e3e6acee"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"title":"pedreira-70-room-1","_id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"bookedPeriods\":[{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"_key\":\"e9a7081713b0\"},{\"_key\":\"204eac55723c\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"25e22a2d2721\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"},{\"_key\":\"e1048138c3b17620d3909eb24a68bf86\",\"services\":\"\",\"keyOfBooking\":\"oVMkP0YmhyBGyJroWj5s0x\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"year\":\"2024/2025\",\"semester\":\"Full Year\",\"services\":\"\",\"keyOfBooking\":\"drafts.oVMkP0YmhyBGyJroWj5s0x\",\"_key\":\"eeb4c2ed87caf1d8337b76fecf484138\"},{\"services\":\"\",\"keyOfBooking\":\"se7euW5U96P9qJ0OGAtdkD\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\",\"_key\":\"3b2263c1563da49deb04357c16070372\"},{\"_key\":\"se7euW5U96P9qJ0OGAxMuJ\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\",\"services\":\"\"}],\"services\":[\"\"],\"_type\":\"room\",\"_rev\":\"013be71e-d6d8-4600-bfbb-ad927fc940b9\",\"slug\":{\"_type\":\"slug\",\"current\":\"pedreira-70-room-1\"},\"roomNumber\":1,\"isAvailable\":true,\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"roomType\":\"Suite\",\"priceSummer\":599,\"_createdAt\":\"2025-02-19T16:26:07Z\",\"priceWinter\":1700,\"_updatedAt\":\"2025-02-21T06:57:39Z\",\"availableSemesters\":[{\"_key\":\"33369861f45679c518ce18a734b42b43\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\"},{\"_key\":\"1827bb2a398c38efca6d49ca6191548e\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"59449e72e7684502915de6ed77687796\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"e6c650f8272768679db617d2fa563fd1\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"year\":\"2025/2026\",\"semester\":\"Both Semesters\",\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\"},{\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"7369660f0050ced55ba3875540066c06\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"title\":\"pedreira-70-room-1\",\"_id\":\"drafts.67fae916-4330-467c-9115-1e7f4fb0b368\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2531","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"o8XwHmocDuhXxafH1bQlsQ\"","sanity-dataset":"production","sanity-document-id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"013be71e-d6d8-4600-bfbb-ad927fc940b9","sanity-transaction-time":"2025-02-21T07:12:38Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2531","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"o8XwHmocDuhXxafH1bQlsQ\"","sanity-dataset":"production","sanity-document-id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"013be71e-d6d8-4600-bfbb-ad927fc940b9","sanity-transaction-time":"2025-02-21T07:12:38Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2531\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"o8XwHmocDuhXxafH1bQlsQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"013be71e-d6d8-4600-bfbb-ad927fc940b9\",\"sanity-transaction-time\":\"2025-02-21T07:12:38Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 updated in room {"user":"Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 updated in room"}}
[debug] [2025-02-21T07:12:38.566Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 450.6905ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 450.6905ms"}}
[debug] [2025-02-21T07:12:38.566Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:12:38.566Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:12:38.566Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:12:38.566Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:24.594Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:13:24.594Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:24.594Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:13:24.594Z"],"workRunningCount":1}
[debug] [2025-02-21T07:13:24.594Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:13:24.596Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:13:24.596Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:13:24.596Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:13:24.596Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_rev":"0b4730d8-5410-4f69-a58d-266410831ccd","priceWinter":1700,"priceSummer":599,"slug":{"_type":"slug","current":"pedreira-70-room-1"},"property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"year":"2026/2027","semester":"2nd Semester","_key":"ad69a4a0126ed45ef4c762c12eb4141d"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"bookedPeriods":[{"_key":"426d027f8b89","semester":"1st Semester","year":"2024/2025"}],"roomNumber":1,"_id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","_type":"room","title":"pedreira-70-room-1","roomType":"Suite","isAvailable":true,"services":[""],"_createdAt":"2025-02-19T16:26:07Z","_updatedAt":"2025-02-21T07:13:24Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_rev":"0b4730d8-5410-4f69-a58d-266410831ccd","priceWinter":1700,"priceSummer":599,"slug":{"_type":"slug","current":"pedreira-70-room-1"},"property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"_key":"59449e72e7684502915de6ed77687796","year":"2025/2026","semester":"2nd Semester"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"year":"2026/2027","semester":"2nd Semester","_key":"ad69a4a0126ed45ef4c762c12eb4141d"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"bookedPeriods":[{"_key":"426d027f8b89","semester":"1st Semester","year":"2024/2025"}],"roomNumber":1,"_id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","_type":"room","title":"pedreira-70-room-1","roomType":"Suite","isAvailable":true,"services":[""],"_createdAt":"2025-02-19T16:26:07Z","_updatedAt":"2025-02-21T07:13:24Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_rev\":\"0b4730d8-5410-4f69-a58d-266410831ccd\",\"priceWinter\":1700,\"priceSummer\":599,\"slug\":{\"_type\":\"slug\",\"current\":\"pedreira-70-room-1\"},\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"availableSemesters\":[{\"_key\":\"33369861f45679c518ce18a734b42b43\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\"},{\"_key\":\"1827bb2a398c38efca6d49ca6191548e\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"59449e72e7684502915de6ed77687796\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"e6c650f8272768679db617d2fa563fd1\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"year\":\"2026/2027\",\"semester\":\"2nd Semester\",\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\"},{\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"7369660f0050ced55ba3875540066c06\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"bookedPeriods\":[{\"_key\":\"426d027f8b89\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"}],\"roomNumber\":1,\"_id\":\"drafts.67fae916-4330-467c-9115-1e7f4fb0b368\",\"_type\":\"room\",\"title\":\"pedreira-70-room-1\",\"roomType\":\"Suite\",\"isAvailable\":true,\"services\":[\"\"],\"_createdAt\":\"2025-02-19T16:26:07Z\",\"_updatedAt\":\"2025-02-21T07:13:24Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1879","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"YFW6HUITaCipMi88BnfR5g\"","sanity-dataset":"production","sanity-document-id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"0b4730d8-5410-4f69-a58d-266410831ccd","sanity-transaction-time":"2025-02-21T07:13:24Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1879","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"YFW6HUITaCipMi88BnfR5g\"","sanity-dataset":"production","sanity-document-id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"0b4730d8-5410-4f69-a58d-266410831ccd","sanity-transaction-time":"2025-02-21T07:13:24Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1879\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"YFW6HUITaCipMi88BnfR5g\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"0b4730d8-5410-4f69-a58d-266410831ccd\",\"sanity-transaction-time\":\"2025-02-21T07:13:24Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 updated in room {"user":"Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 updated in room"}}
[debug] [2025-02-21T07:13:25.051Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 454.5125ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 454.5125ms"}}
[debug] [2025-02-21T07:13:25.051Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:13:25.051Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:13:25.051Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:13:25.051Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:28.279Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:13:28.279Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:28.279Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:13:28.279Z"],"workRunningCount":1}
[debug] [2025-02-21T07:13:28.279Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:13:28.280Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:13:28.280Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:13:28.280Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:13:28.280Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"roomNumber":1,"slug":{"_type":"slug","current":"pedreira-70-room-1"},"bookedPeriods":[{"year":"2024/2025","semester":"1st Semester","_key":"426d027f8b89"}],"_type":"room","title":"pedreira-70-room-1","services":[""],"_id":"67fae916-4330-467c-9115-1e7f4fb0b368","_updatedAt":"2025-02-21T07:13:27Z","priceWinter":1700,"roomType":"Suite","isAvailable":true,"priceSummer":599,"availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025"},{"semester":"Both Semesters","_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"59449e72e7684502915de6ed77687796","year":"2025/2026"},{"year":"2025/2026","semester":"Summer","_key":"e6c650f8272768679db617d2fa563fd1"},{"semester":"Both Semesters","_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"7369660f0050ced55ba3875540066c06"}],"_createdAt":"2025-02-19T16:26:07Z","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"_rev":"gbwTgqOq53YDSh8fvn06xR"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"roomNumber":1,"slug":{"_type":"slug","current":"pedreira-70-room-1"},"bookedPeriods":[{"year":"2024/2025","semester":"1st Semester","_key":"426d027f8b89"}],"_type":"room","title":"pedreira-70-room-1","services":[""],"_id":"67fae916-4330-467c-9115-1e7f4fb0b368","_updatedAt":"2025-02-21T07:13:27Z","priceWinter":1700,"roomType":"Suite","isAvailable":true,"priceSummer":599,"availableSemesters":[{"_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025","semester":"1st Semester"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025"},{"semester":"Both Semesters","_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"59449e72e7684502915de6ed77687796","year":"2025/2026"},{"year":"2025/2026","semester":"Summer","_key":"e6c650f8272768679db617d2fa563fd1"},{"semester":"Both Semesters","_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"7369660f0050ced55ba3875540066c06"}],"_createdAt":"2025-02-19T16:26:07Z","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"_rev":"gbwTgqOq53YDSh8fvn06xR"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"roomNumber\":1,\"slug\":{\"_type\":\"slug\",\"current\":\"pedreira-70-room-1\"},\"bookedPeriods\":[{\"year\":\"2024/2025\",\"semester\":\"1st Semester\",\"_key\":\"426d027f8b89\"}],\"_type\":\"room\",\"title\":\"pedreira-70-room-1\",\"services\":[\"\"],\"_id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"_updatedAt\":\"2025-02-21T07:13:27Z\",\"priceWinter\":1700,\"roomType\":\"Suite\",\"isAvailable\":true,\"priceSummer\":599,\"availableSemesters\":[{\"_key\":\"33369861f45679c518ce18a734b42b43\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\",\"year\":\"2024/2025\"},{\"semester\":\"Both Semesters\",\"_key\":\"1827bb2a398c38efca6d49ca6191548e\",\"year\":\"2024/2025\"},{\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"59449e72e7684502915de6ed77687796\",\"year\":\"2025/2026\"},{\"year\":\"2025/2026\",\"semester\":\"Summer\",\"_key\":\"e6c650f8272768679db617d2fa563fd1\"},{\"semester\":\"Both Semesters\",\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\",\"year\":\"2025/2026\"},{\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"year\":\"2026/2027\",\"semester\":\"Full Year\",\"_key\":\"7369660f0050ced55ba3875540066c06\"}],\"_createdAt\":\"2025-02-19T16:26:07Z\",\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"_rev\":\"gbwTgqOq53YDSh8fvn06xR\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1858","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"BvBP03swI8vSu/ueX1wOhw\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn06xR","sanity-transaction-time":"2025-02-21T07:13:27Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1858","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"BvBP03swI8vSu/ueX1wOhw\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn06xR","sanity-transaction-time":"2025-02-21T07:13:27Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1858\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"BvBP03swI8vSu/ueX1wOhw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvn06xR\",\"sanity-transaction-time\":\"2025-02-21T07:13:27Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room {"user":"Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room"}}
[debug] [2025-02-21T07:13:28.734Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 453.8398ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 453.8398ms"}}
[debug] [2025-02-21T07:13:28.734Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:13:28.734Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:13:28.735Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:13:28.735Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:28.944Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:13:28.944Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:28.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:13:28.944Z"],"workRunningCount":1}
[debug] [2025-02-21T07:13:28.945Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:13:28.945Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:13:28.946Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:13:28.946Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:13:28.946Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_type":"room","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"services":[""],"bookedPeriods":[{"_key":"426d027f8b89","year":"2024/2025","semester":"1st Semester"}],"availableSemesters":[{"semester":"1st Semester","_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"59449e72e7684502915de6ed77687796"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"year":"2025/2026","semester":"Both Semesters","_key":"b02ae94ce7440d3fc3bc9400e3e6acee"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"roomNumber":1,"priceSummer":599,"priceWinter":1700,"_id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","slug":{"_type":"slug","current":"pedreira-70-room-1"},"title":"pedreira-70-room-1","roomType":"Suite","_createdAt":"2025-02-19T16:26:07Z","_updatedAt":"2025-02-21T07:13:24Z","isAvailable":true,"_rev":"0b4730d8-5410-4f69-a58d-266410831ccd"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_type":"room","property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"services":[""],"bookedPeriods":[{"_key":"426d027f8b89","year":"2024/2025","semester":"1st Semester"}],"availableSemesters":[{"semester":"1st Semester","_key":"33369861f45679c518ce18a734b42b43","year":"2024/2025"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"59392f25d51e57dbd8a2a27cf3e774d3"},{"_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025","semester":"Both Semesters"},{"_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025","semester":"Full Year"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"59449e72e7684502915de6ed77687796"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"year":"2025/2026","semester":"Both Semesters","_key":"b02ae94ce7440d3fc3bc9400e3e6acee"},{"_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026","semester":"Full Year"},{"_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027","semester":"1st Semester"},{"_key":"ad69a4a0126ed45ef4c762c12eb4141d","year":"2026/2027","semester":"2nd Semester"},{"semester":"Summer","_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027","semester":"Full Year"}],"roomNumber":1,"priceSummer":599,"priceWinter":1700,"_id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","slug":{"_type":"slug","current":"pedreira-70-room-1"},"title":"pedreira-70-room-1","roomType":"Suite","_createdAt":"2025-02-19T16:26:07Z","_updatedAt":"2025-02-21T07:13:24Z","isAvailable":true,"_rev":"0b4730d8-5410-4f69-a58d-266410831ccd"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_type\":\"room\",\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"services\":[\"\"],\"bookedPeriods\":[{\"_key\":\"426d027f8b89\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"}],\"availableSemesters\":[{\"semester\":\"1st Semester\",\"_key\":\"33369861f45679c518ce18a734b42b43\",\"year\":\"2024/2025\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\"},{\"_key\":\"1827bb2a398c38efca6d49ca6191548e\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"_key\":\"59449e72e7684502915de6ed77687796\"},{\"_key\":\"e6c650f8272768679db617d2fa563fd1\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"year\":\"2025/2026\",\"semester\":\"Both Semesters\",\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\"},{\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"7369660f0050ced55ba3875540066c06\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"roomNumber\":1,\"priceSummer\":599,\"priceWinter\":1700,\"_id\":\"drafts.67fae916-4330-467c-9115-1e7f4fb0b368\",\"slug\":{\"_type\":\"slug\",\"current\":\"pedreira-70-room-1\"},\"title\":\"pedreira-70-room-1\",\"roomType\":\"Suite\",\"_createdAt\":\"2025-02-19T16:26:07Z\",\"_updatedAt\":\"2025-02-21T07:13:24Z\",\"isAvailable\":true,\"_rev\":\"0b4730d8-5410-4f69-a58d-266410831ccd\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1879","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Ny1qeHQiL5q3+v9q9JzTRw\"","sanity-dataset":"production","sanity-document-id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn06xR","sanity-transaction-time":"2025-02-21T07:13:27Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1879","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Ny1qeHQiL5q3+v9q9JzTRw\"","sanity-dataset":"production","sanity-document-id":"drafts.67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn06xR","sanity-transaction-time":"2025-02-21T07:13:27Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1879\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"Ny1qeHQiL5q3+v9q9JzTRw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvn06xR\",\"sanity-transaction-time\":\"2025-02-21T07:13:27Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 deleted from room {"user":"Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 deleted from room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.67fae916-4330-467c-9115-1e7f4fb0b368 deleted from room"}}
[debug] [2025-02-21T07:13:30.347Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1400.6518ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1400.6518ms"}}
[debug] [2025-02-21T07:13:30.347Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:13:30.347Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:13:30.347Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:13:30.347Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:32.017Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:13:32.017Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:32.017Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:13:32.017Z"],"workRunningCount":1}
[debug] [2025-02-21T07:13:32.017Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:13:32.017Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:13:32.017Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:13:32.017Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:13:32.018Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"426d027f8b89","semester":"1st Semester","year":"2024/2025"},{"_key":"se7euW5U96P9qJ0OGAxMuJ__^^__51d9af77-2958-4556-8d56-b7ab4eb0286f","semester":"1st Semester","year":"2025/2026","services":""}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"67fae916-4330-467c-9115-1e7f4fb0b368","updatedBookedPeriods":[{"_key":"426d027f8b89","semester":"1st Semester","year":"2024/2025"},{"_key":"se7euW5U96P9qJ0OGAxMuJ__^^__51d9af77-2958-4556-8d56-b7ab4eb0286f","semester":"1st Semester","year":"2025/2026","services":""}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"updatedBookedPeriods\":[{\"_key\":\"426d027f8b89\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"se7euW5U96P9qJ0OGAxMuJ__^^__51d9af77-2958-4556-8d56-b7ab4eb0286f\",\"semester\":\"1st Semester\",\"year\":\"2025/2026\",\"services\":\"\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/mutate/production?returnIds=true&returnDocuments=true&visibility=sync"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/mutate/production?returnIds=true&returnDocuments=true&visibility=sync\"\n - Be careful, this may be a production service."}}
[debug] [2025-02-21T07:13:32.967Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 949.5974ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 949.5974ms"}}
[debug] [2025-02-21T07:13:32.968Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: IDLE"}}
[debug] [2025-02-21T07:13:32.968Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:13:32.968Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:13:32.968Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:33.564Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:13:33.564Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:13:33.564Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:13:33.564Z"],"workRunningCount":1}
[debug] [2025-02-21T07:13:33.564Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:13:33.564Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:13:33.564Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:13:33.564Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:13:33.564Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"bookedPeriods":[{"_key":"426d027f8b89","semester":"1st Semester","year":"2024/2025"},{"services":"","_key":"se7euW5U96P9qJ0OGAxMuJ__^^__51d9af77-2958-4556-8d56-b7ab4eb0286f","semester":"1st Semester","year":"2025/2026"}],"_id":"67fae916-4330-467c-9115-1e7f4fb0b368","roomType":"Suite","_updatedAt":"2025-02-21T07:13:33Z","title":"pedreira-70-room-1","slug":{"_type":"slug","current":"pedreira-70-room-1"},"isAvailable":true,"property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"_type":"room","_rev":"gbwTgqOq53YDSh8fvn07It","_createdAt":"2025-02-19T16:26:07Z","roomNumber":1,"priceWinter":1700,"priceSummer":599,"services":[""],"availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"33369861f45679c518ce18a734b42b43"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025","semester":"Summer"},{"semester":"Both Semesters","_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025"},{"semester":"Full Year","_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"59449e72e7684502915de6ed77687796","year":"2025/2026"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026"},{"semester":"1st Semester","_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027"},{"year":"2026/2027","semester":"2nd Semester","_key":"ad69a4a0126ed45ef4c762c12eb4141d"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027"}]},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"bookedPeriods":[{"_key":"426d027f8b89","semester":"1st Semester","year":"2024/2025"},{"services":"","_key":"se7euW5U96P9qJ0OGAxMuJ__^^__51d9af77-2958-4556-8d56-b7ab4eb0286f","semester":"1st Semester","year":"2025/2026"}],"_id":"67fae916-4330-467c-9115-1e7f4fb0b368","roomType":"Suite","_updatedAt":"2025-02-21T07:13:33Z","title":"pedreira-70-room-1","slug":{"_type":"slug","current":"pedreira-70-room-1"},"isAvailable":true,"property":{"_ref":"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b","_type":"reference"},"_type":"room","_rev":"gbwTgqOq53YDSh8fvn07It","_createdAt":"2025-02-19T16:26:07Z","roomNumber":1,"priceWinter":1700,"priceSummer":599,"services":[""],"availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"33369861f45679c518ce18a734b42b43"},{"_key":"747bcfe9e4b8ff8103f8dfb47ae679d2","year":"2024/2025","semester":"2nd Semester"},{"_key":"59392f25d51e57dbd8a2a27cf3e774d3","year":"2024/2025","semester":"Summer"},{"semester":"Both Semesters","_key":"1827bb2a398c38efca6d49ca6191548e","year":"2024/2025"},{"semester":"Full Year","_key":"57849bfd1bbe26bf86d3f42728f24987","year":"2024/2025"},{"_key":"bab4d79bb4708210c749ecdaec0212ff","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"59449e72e7684502915de6ed77687796","year":"2025/2026"},{"_key":"e6c650f8272768679db617d2fa563fd1","year":"2025/2026","semester":"Summer"},{"_key":"b02ae94ce7440d3fc3bc9400e3e6acee","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f51feabf341893f9877f54c33dfa2194","year":"2025/2026"},{"semester":"1st Semester","_key":"1324bc8e609b9beb8960f2354d720a50","year":"2026/2027"},{"year":"2026/2027","semester":"2nd Semester","_key":"ad69a4a0126ed45ef4c762c12eb4141d"},{"_key":"9c574d8deb3ade30d7d86e36b15c21c5","year":"2026/2027","semester":"Summer"},{"_key":"5294626e825bced65d8ba8339d36bf40","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"7369660f0050ced55ba3875540066c06","year":"2026/2027"}]},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"bookedPeriods\":[{\"_key\":\"426d027f8b89\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"services\":\"\",\"_key\":\"se7euW5U96P9qJ0OGAxMuJ__^^__51d9af77-2958-4556-8d56-b7ab4eb0286f\",\"semester\":\"1st Semester\",\"year\":\"2025/2026\"}],\"_id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"roomType\":\"Suite\",\"_updatedAt\":\"2025-02-21T07:13:33Z\",\"title\":\"pedreira-70-room-1\",\"slug\":{\"_type\":\"slug\",\"current\":\"pedreira-70-room-1\"},\"isAvailable\":true,\"property\":{\"_ref\":\"5f8db06a-ae3b-4f4c-9df3-26bcb38b768b\",\"_type\":\"reference\"},\"_type\":\"room\",\"_rev\":\"gbwTgqOq53YDSh8fvn07It\",\"_createdAt\":\"2025-02-19T16:26:07Z\",\"roomNumber\":1,\"priceWinter\":1700,\"priceSummer\":599,\"services\":[\"\"],\"availableSemesters\":[{\"year\":\"2024/2025\",\"semester\":\"1st Semester\",\"_key\":\"33369861f45679c518ce18a734b42b43\"},{\"_key\":\"747bcfe9e4b8ff8103f8dfb47ae679d2\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"59392f25d51e57dbd8a2a27cf3e774d3\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"semester\":\"Both Semesters\",\"_key\":\"1827bb2a398c38efca6d49ca6191548e\",\"year\":\"2024/2025\"},{\"semester\":\"Full Year\",\"_key\":\"57849bfd1bbe26bf86d3f42728f24987\",\"year\":\"2024/2025\"},{\"_key\":\"bab4d79bb4708210c749ecdaec0212ff\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"59449e72e7684502915de6ed77687796\",\"year\":\"2025/2026\"},{\"_key\":\"e6c650f8272768679db617d2fa563fd1\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"b02ae94ce7440d3fc3bc9400e3e6acee\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f51feabf341893f9877f54c33dfa2194\",\"year\":\"2025/2026\"},{\"semester\":\"1st Semester\",\"_key\":\"1324bc8e609b9beb8960f2354d720a50\",\"year\":\"2026/2027\"},{\"year\":\"2026/2027\",\"semester\":\"2nd Semester\",\"_key\":\"ad69a4a0126ed45ef4c762c12eb4141d\"},{\"_key\":\"9c574d8deb3ade30d7d86e36b15c21c5\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5294626e825bced65d8ba8339d36bf40\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"7369660f0050ced55ba3875540066c06\",\"year\":\"2026/2027\"}]},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1993","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"L7Zm5d+FcXBPZpeKnqj8SA\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn07It","sanity-transaction-time":"2025-02-21T07:13:33Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1993","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"L7Zm5d+FcXBPZpeKnqj8SA\"","sanity-dataset":"production","sanity-document-id":"67fae916-4330-467c-9115-1e7f4fb0b368","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn07It","sanity-transaction-time":"2025-02-21T07:13:33Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1993\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"L7Zm5d+FcXBPZpeKnqj8SA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"67fae916-4330-467c-9115-1e7f4fb0b368\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvn07It\",\"sanity-transaction-time\":\"2025-02-21T07:13:33Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room {"user":"Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 67fae916-4330-467c-9115-1e7f4fb0b368 updated in room"}}
[debug] [2025-02-21T07:13:34.015Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 450.8801ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 450.8801ms"}}
[debug] [2025-02-21T07:13:34.016Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: IDLE"}}
[debug] [2025-02-21T07:13:34.016Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:13:34.016Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:13:34.016Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:18:42.882Z] File D:\Freelance-Project\ossama\street-lobby\functions\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File D:\\Freelance-Project\\ossama\\street-lobby\\functions\\index.js changed, reloading triggers"}}
[debug] [2025-02-21T07:18:43.896Z] Validating nodejs source
[debug] [2025-02-21T07:18:45.055Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sanity/client": "^6.28.0",
    "cors": "^2.8.5",
    "express": "^4.21.2",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.3.2",
    "jsonwebtoken": "^9.0.2",
    "uuid": "^11.1.0"
  },
  "devDependencies": {
    "dotenv": "^16.4.7",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-02-21T07:18:45.055Z] Building nodejs source
[debug] [2025-02-21T07:18:45.055Z] Failed to find version of module node: reached end of search path D:\Freelance-Project\ossama\street-lobby\functions\node_modules
[info] +  functions: Using node@22 from host. 
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T07:18:45.056Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-21T07:18:45.060Z] Found firebase-functions binary at 'D:\Freelance-Project\ossama\street-lobby\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8344

[debug] [2025-02-21T07:18:45.709Z] Got response from /__/functions.yaml {"endpoints":{"sanityWebhook":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"sanityWebhook"},"handleBookingUpdate":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"handleBookingUpdate"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{},"params":[{"name":"SIGNATURE_KEY","type":"string"},{"name":"EXPECTED_PROJECT_ID","type":"string"},{"name":"SANITY_TOKEN","type":"string"}]}
[info] +  functions: Loaded functions definitions from source: sanityWebhook, handleBookingUpdate. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sanityWebhook, handleBookingUpdate."}}
[debug] [2025-02-21T07:18:50.731Z] [worker-pool] Shutting down IDLE worker (us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T07:18:50.731Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: FINISHING"}}
[debug] [2025-02-21T07:18:50.731Z] [worker-pool] Shutting down IDLE worker (us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-sanityWebhook)"}}
[debug] [2025-02-21T07:18:50.731Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: FINISHING"}}
[debug] [2025-02-21T07:18:50.739Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: exited"}}
[debug] [2025-02-21T07:18:50.739Z] [worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-140948a0-e19e-4f94-b5d3-cd09b40e52c9]: FINISHED"}}
[debug] [2025-02-21T07:18:50.739Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: exited"}}
[debug] [2025-02-21T07:18:50.739Z] [worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-f7eaba44-5230-454b-bd02-412dbe133468]: FINISHED"}}
[debug] [2025-02-21T07:19:14.219Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:19:14.219Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:19:14.219Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:19:14.219Z"],"workRunningCount":1}
[debug] [2025-02-21T07:19:14.219Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:19:14.220Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:19:14.221Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:19:14.221Z] [worker-pool] Cleaned up workers for us-central1-handleBookingUpdate: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-handleBookingUpdate: 1 --> 0"}}
[debug] [2025-02-21T07:19:14.221Z] [worker-pool] Cleaned up workers for us-central1-sanityWebhook: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sanityWebhook: 1 --> 0"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T07:19:14.227Z] [worker-pool] addWorker(us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-handleBookingUpdate)"}}
[debug] [2025-02-21T07:19:14.227Z] [worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-handleBookingUpdate, total=1"}}
[debug] [2025-02-21T07:19:14.228Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:14.228Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:19:14.219Z"],"workRunningCount":1}
[debug] [2025-02-21T07:19:14.228Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:19:14.219Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:14.228Z"],"workRunningCount":2}
[debug] [2025-02-21T07:19:14.228Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:19:14.229Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:19:14.229Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[info] i  functions: Loaded environment variables from .env.local. 
[debug] [2025-02-21T07:19:14.235Z] [worker-pool] addWorker(us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sanityWebhook)"}}
[debug] [2025-02-21T07:19:14.235Z] [worker-pool] Adding worker with key us-central1-sanityWebhook, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sanityWebhook, total=1"}}
[info] >  (node:18560) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:18560) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:18560) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[info] >  (node:11084) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:11084) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:11084) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-02-21T07:19:15.465Z] [runtime-status] [18560] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.466Z] [runtime-status] [11084] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.466Z] [runtime-status] [18560] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.466Z] [runtime-status] [18560] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T07:19:15.467Z] [runtime-status] [11084] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.467Z] [runtime-status] [18560] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.467Z] [runtime-status] [11084] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-02-21T07:19:15.468Z] [runtime-status] [11084] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.745Z] [runtime-status] [11084] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T07:19:15.745Z] [runtime-status] [18560] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-02-21T07:19:15.745Z] [runtime-status] [11084] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T07:19:15.745Z] [runtime-status] [18560] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2025-02-21T07:19:15.745Z] [runtime-status] [11084] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.745Z] [runtime-status] [18560] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.749Z] [runtime-status] [18560] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.749Z] [runtime-status] [11084] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.751Z] [runtime-status] [11084] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.752Z] [runtime-status] [18560] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.3.2","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.3.2\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2025-02-21T07:19:15.752Z] [runtime-status] [11084] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T07:19:15.752Z] [runtime-status] [18560] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"D:\\Freelance-Project\\ossama\\street-lobby\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2025-02-21T07:19:15.936Z] [runtime-status] [11084] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T07:19:15.937Z] [runtime-status] [18560] initializeApp(DEFAULT) {"storageBucket":"street-lobby.firebasestorage.app","projectId":"street-lobby"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] initializeApp(DEFAULT) {\"storageBucket\":\"street-lobby.firebasestorage.app\",\"projectId\":\"street-lobby\"}"}}
[debug] [2025-02-21T07:19:15.943Z] [runtime-status] [11084] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T07:19:15.943Z] [runtime-status] [11084] Listening to port: \\?\pipe\fire_emu_6400e55c14f8d735 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[runtime-status] [11084] Listening to port: \\\\?\\pipe\\fire_emu_6400e55c14f8d735"}}
[debug] [2025-02-21T07:19:15.944Z] [runtime-status] [18560] Functions runtime initialized. {"cwd":"D:\\Freelance-Project\\ossama\\street-lobby\\functions","node_version":"22.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Functions runtime initialized. {\"cwd\":\"D:\\\\Freelance-Project\\\\ossama\\\\street-lobby\\\\functions\",\"node_version\":\"22.0.0\"}"}}
[debug] [2025-02-21T07:19:15.945Z] [runtime-status] [18560] Listening to port: \\?\pipe\fire_emu_8b2e76017f40f199 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[runtime-status] [18560] Listening to port: \\\\?\\pipe\\fire_emu_8b2e76017f40f199"}}
[debug] [2025-02-21T07:19:15.989Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T07:19:15.990Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:19:15.990Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[debug] [2025-02-21T07:19:15.990Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:19:15.990Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:19:15.991Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_id":"gbwTgqOq53YDSh8fvn0KyE","idNumber":"a104ai89","_createdAt":"2025-02-21T07:15:33Z","_updatedAt":"2025-02-21T07:15:33Z","bookingDate":"2025-02-21T07:15:32.041Z","currentLocation":"","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_type":"booking","notes":"","totalPrice":399,"nationality":"Bangladeshi","genre":"Male","bookedPeriod":[{"_key":"7435e834-2547-41b8-8042-eee97e82ece0","year":"2024/2025","price":399,"semester":"Summer","services":"Weekly room cleaning"}],"currentProfession":"Studying.........","age":20,"_rev":"gbwTgqOq53YDSh8fvn0Kwh","name":"Elias Emon","status":"pending","permanentAddress":"Dhaka, Bangladesh"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_id":"gbwTgqOq53YDSh8fvn0KyE","idNumber":"a104ai89","_createdAt":"2025-02-21T07:15:33Z","_updatedAt":"2025-02-21T07:15:33Z","bookingDate":"2025-02-21T07:15:32.041Z","currentLocation":"","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_type":"booking","notes":"","totalPrice":399,"nationality":"Bangladeshi","genre":"Male","bookedPeriod":[{"_key":"7435e834-2547-41b8-8042-eee97e82ece0","year":"2024/2025","price":399,"semester":"Summer","services":"Weekly room cleaning"}],"currentProfession":"Studying.........","age":20,"_rev":"gbwTgqOq53YDSh8fvn0Kwh","name":"Elias Emon","status":"pending","permanentAddress":"Dhaka, Bangladesh"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_id\":\"gbwTgqOq53YDSh8fvn0KyE\",\"idNumber\":\"a104ai89\",\"_createdAt\":\"2025-02-21T07:15:33Z\",\"_updatedAt\":\"2025-02-21T07:15:33Z\",\"bookingDate\":\"2025-02-21T07:15:32.041Z\",\"currentLocation\":\"\",\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"_type\":\"booking\",\"notes\":\"\",\"totalPrice\":399,\"nationality\":\"Bangladeshi\",\"genre\":\"Male\",\"bookedPeriod\":[{\"_key\":\"7435e834-2547-41b8-8042-eee97e82ece0\",\"year\":\"2024/2025\",\"price\":399,\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\"}],\"currentProfession\":\"Studying.........\",\"age\":20,\"_rev\":\"gbwTgqOq53YDSh8fvn0Kwh\",\"name\":\"Elias Emon\",\"status\":\"pending\",\"permanentAddress\":\"Dhaka, Bangladesh\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"661","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Wtab3BwQheDv7VeLTxsdKg\"","sanity-dataset":"production","sanity-document-id":"gbwTgqOq53YDSh8fvn0KyE","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAzZ66","sanity-transaction-time":"2025-02-21T07:19:12Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"661","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"Wtab3BwQheDv7VeLTxsdKg\"","sanity-dataset":"production","sanity-document-id":"gbwTgqOq53YDSh8fvn0KyE","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGAzZ66","sanity-transaction-time":"2025-02-21T07:19:12Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"661\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"Wtab3BwQheDv7VeLTxsdKg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"gbwTgqOq53YDSh8fvn0KyE\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGAzZ66\",\"sanity-transaction-time\":\"2025-02-21T07:19:12Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/221e3097-7d28-45b3-b2b3-3bb55c123ba6"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/doc/production/221e3097-7d28-45b3-b2b3-3bb55c123ba6\"\n - Be careful, this may be a production service."}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","year":"2024/2025","services":"Weekly room cleaning"}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","year":"2024/2025","services":"Weekly room cleaning"}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"year\":\"2024/2025\",\"services\":\"Weekly room cleaning\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[warn] !  External network resource requested!
   - URL: "https://pkg5i4cw.api.sanity.io/v2025-02-04/data/mutate/production?returnIds=true&returnDocuments=true&visibility=sync"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://pkg5i4cw.api.sanity.io/v2025-02-04/data/mutate/production?returnIds=true&returnDocuments=true&visibility=sync\"\n - Be careful, this may be a production service."}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[debug] [2025-02-21T07:19:17.472Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1482.0109ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1482.0109ms"}}
[debug] [2025-02-21T07:19:17.472Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T07:19:17.472Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:19:17.472Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:19:17.472Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:14.228Z"],"workRunningCount":1}
[info] >  Document gbwTgqOq53YDSh8fvn0KyE deleted from booking {"user":"Document gbwTgqOq53YDSh8fvn0KyE deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document gbwTgqOq53YDSh8fvn0KyE deleted from booking"}}
[debug] [2025-02-21T07:19:18.693Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 2702.3965ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 2702.3965ms"}}
[debug] [2025-02-21T07:19:18.693Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:19:18.693Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:19:18.693Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:19:18.694Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:19:18.912Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:18.912Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:19:18.912Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:18.912Z"],"workRunningCount":1}
[debug] [2025-02-21T07:19:18.912Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:19:18.913Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:19:18.913Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:19:18.913Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:19:18.913Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"roomNumber":1,"priceWinter":1500,"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","priceSummer":399,"_updatedAt":"2025-02-21T07:19:17Z","_type":"room","_createdAt":"2025-02-19T14:46:30Z","roomType":"Single bed","title":"arroios-room-1","slug":{"current":"arroios-room-1","_type":"slug"},"bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"year":"2024/2025","services":"Weekly room cleaning","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer"}],"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_rev":"oVMkP0YmhyBGyJroWjCyx9","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"isAvailable":true},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"roomNumber":1,"priceWinter":1500,"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","priceSummer":399,"_updatedAt":"2025-02-21T07:19:17Z","_type":"room","_createdAt":"2025-02-19T14:46:30Z","roomType":"Single bed","title":"arroios-room-1","slug":{"current":"arroios-room-1","_type":"slug"},"bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"year":"2024/2025","services":"Weekly room cleaning","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer"}],"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"year":"2024/2025","semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_rev":"oVMkP0YmhyBGyJroWjCyx9","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"isAvailable":true},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"roomNumber\":1,\"priceWinter\":1500,\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"priceSummer\":399,\"_updatedAt\":\"2025-02-21T07:19:17Z\",\"_type\":\"room\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"roomType\":\"Single bed\",\"title\":\"arroios-room-1\",\"slug\":{\"current\":\"arroios-room-1\",\"_type\":\"slug\"},\"bookedPeriods\":[{\"year\":\"2024/2025\",\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\"},{\"year\":\"2024/2025\",\"services\":\"Weekly room cleaning\",\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\"}],\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"year\":\"2024/2025\",\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_rev\":\"oVMkP0YmhyBGyJroWjCyx9\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"isAvailable\":true},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"S6Z2fhvK7tvJbAWFI59vkQ\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjCyx9","sanity-transaction-time":"2025-02-21T07:19:17Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"S6Z2fhvK7tvJbAWFI59vkQ\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjCyx9","sanity-transaction-time":"2025-02-21T07:19:17Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1988\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"S6Z2fhvK7tvJbAWFI59vkQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjCyx9\",\"sanity-transaction-time\":\"2025-02-21T07:19:17Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:19:19.363Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 450.1018ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 450.1018ms"}}
[debug] [2025-02-21T07:19:19.363Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:19:19.363Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:19:19.363Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:19:19.363Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:19:50.657Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:50.657Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:19:50.657Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:50.657Z"],"workRunningCount":1}
[debug] [2025-02-21T07:19:50.657Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:19:50.658Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:19:50.658Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:19:50.658Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:19:50.659Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"totalPrice":750,"genre":"Male","_rev":"oVMkP0YmhyBGyJroWjD1ew","room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"_createdAt":"2025-02-21T07:19:50Z","age":25,"bookingDate":"2025-02-21T07:19:49.180Z","status":"pending","_type":"booking","currentProfession":"Studying.........","permanentAddress":"Dhaka, Bangladesh","_updatedAt":"2025-02-21T07:19:50Z","name":"Elias Emon","idNumber":"a104ai89","bookedPeriod":[{"year":"2024/2025","services":"Weekly room cleaning","_key":"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd","semester":"2nd Semester","price":750}],"_id":"oVMkP0YmhyBGyJroWjD1gb","currentLocation":"","nationality":"Bangladeshi","notes":""},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"totalPrice":750,"genre":"Male","_rev":"oVMkP0YmhyBGyJroWjD1ew","room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"_createdAt":"2025-02-21T07:19:50Z","age":25,"bookingDate":"2025-02-21T07:19:49.180Z","status":"pending","_type":"booking","currentProfession":"Studying.........","permanentAddress":"Dhaka, Bangladesh","_updatedAt":"2025-02-21T07:19:50Z","name":"Elias Emon","idNumber":"a104ai89","bookedPeriod":[{"year":"2024/2025","services":"Weekly room cleaning","_key":"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd","semester":"2nd Semester","price":750}],"_id":"oVMkP0YmhyBGyJroWjD1gb","currentLocation":"","nationality":"Bangladeshi","notes":""},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"totalPrice\":750,\"genre\":\"Male\",\"_rev\":\"oVMkP0YmhyBGyJroWjD1ew\",\"room\":{\"_type\":\"reference\",\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\"},\"_createdAt\":\"2025-02-21T07:19:50Z\",\"age\":25,\"bookingDate\":\"2025-02-21T07:19:49.180Z\",\"status\":\"pending\",\"_type\":\"booking\",\"currentProfession\":\"Studying.........\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"_updatedAt\":\"2025-02-21T07:19:50Z\",\"name\":\"Elias Emon\",\"idNumber\":\"a104ai89\",\"bookedPeriod\":[{\"year\":\"2024/2025\",\"services\":\"Weekly room cleaning\",\"_key\":\"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd\",\"semester\":\"2nd Semester\",\"price\":750}],\"_id\":\"oVMkP0YmhyBGyJroWjD1gb\",\"currentLocation\":\"\",\"nationality\":\"Bangladeshi\",\"notes\":\"\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"667","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"wuVu/Z8DL8EU7Av0l2RziA\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWjD1gb","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjD1ew","sanity-transaction-time":"2025-02-21T07:19:50Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"667","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"wuVu/Z8DL8EU7Av0l2RziA\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWjD1gb","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjD1ew","sanity-transaction-time":"2025-02-21T07:19:50Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"667\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"wuVu/Z8DL8EU7Av0l2RziA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"oVMkP0YmhyBGyJroWjD1gb\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjD1ew\",\"sanity-transaction-time\":\"2025-02-21T07:19:50Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T07:19:50.795Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:19:50.795Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:50.657Z"],"workRunningCount":1}
[debug] [2025-02-21T07:19:50.795Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:50.657Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:19:50.795Z"],"workRunningCount":2}
[debug] [2025-02-21T07:19:50.795Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:19:50.796Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:19:50.796Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:19:50.796Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:19:50.796Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475","semester":"2nd Semester","year":"2024/2025","services":"Weekly room cleaning"}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475","semester":"2nd Semester","year":"2024/2025","services":"Weekly room cleaning"}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"},{\"_key\":\"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475\",\"semester\":\"2nd Semester\",\"year\":\"2024/2025\",\"services\":\"Weekly room cleaning\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[info] >  Document oVMkP0YmhyBGyJroWjD1gb updated in booking {"user":"Document oVMkP0YmhyBGyJroWjD1gb updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document oVMkP0YmhyBGyJroWjD1gb updated in booking"}}
[debug] [2025-02-21T07:19:51.106Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 447.115ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 447.115ms"}}
[debug] [2025-02-21T07:19:51.107Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:19:51.107Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:19:51.107Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:19:51.107Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:19:50.795Z"],"workRunningCount":1}
[debug] [2025-02-21T07:19:52.317Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1521.1706ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1521.1706ms"}}
[debug] [2025-02-21T07:19:52.318Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T07:19:52.318Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:19:52.318Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:19:52.318Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:19:52.324Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:52.324Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:19:52.324Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:19:52.324Z"],"workRunningCount":1}
[debug] [2025-02-21T07:19:52.324Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:19:52.324Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:19:52.324Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:19:52.325Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:19:52.325Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"isAvailable":true,"bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"semester":"2nd Semester","year":"2024/2025","services":"Weekly room cleaning","_key":"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475"}],"slug":{"_type":"slug","current":"arroios-room-1"},"_rev":"gbwTgqOq53YDSh8fvn0j7F","title":"arroios-room-1","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_updatedAt":"2025-02-21T07:19:52Z","roomNumber":1,"roomType":"Single bed","priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_type":"room","priceWinter":1500},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"isAvailable":true,"bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"semester":"2nd Semester","year":"2024/2025","services":"Weekly room cleaning","_key":"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475"}],"slug":{"_type":"slug","current":"arroios-room-1"},"_rev":"gbwTgqOq53YDSh8fvn0j7F","title":"arroios-room-1","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"year":"2026/2027","semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_updatedAt":"2025-02-21T07:19:52Z","roomNumber":1,"roomType":"Single bed","priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_type":"room","priceWinter":1500},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"isAvailable\":true,\"bookedPeriods\":[{\"year\":\"2024/2025\",\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"},{\"semester\":\"2nd Semester\",\"year\":\"2024/2025\",\"services\":\"Weekly room cleaning\",\"_key\":\"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475\"}],\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_rev\":\"gbwTgqOq53YDSh8fvn0j7F\",\"title\":\"arroios-room-1\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"semester\":\"1st Semester\",\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"year\":\"2026/2027\",\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_updatedAt\":\"2025-02-21T07:19:52Z\",\"roomNumber\":1,\"roomType\":\"Single bed\",\"priceSummer\":399,\"_createdAt\":\"2025-02-19T14:46:30Z\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_type\":\"room\",\"priceWinter\":1500},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2143","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"20OVO3SaGchDsXUQSPfKig\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn0j7F","sanity-transaction-time":"2025-02-21T07:19:52Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2143","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"20OVO3SaGchDsXUQSPfKig\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn0j7F","sanity-transaction-time":"2025-02-21T07:19:52Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2143\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"20OVO3SaGchDsXUQSPfKig\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvn0j7F\",\"sanity-transaction-time\":\"2025-02-21T07:19:52Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:19:52.765Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 440.82ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 440.82ms"}}
[debug] [2025-02-21T07:19:52.766Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:19:52.766Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:19:52.766Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:19:52.766Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:57:12.479Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:57:12.479Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:57:12.479Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:57:12.479Z"],"workRunningCount":1}
[debug] [2025-02-21T07:57:12.479Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:57:12.481Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:57:12.481Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:57:12.481Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:57:12.481Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[debug] [2025-02-21T07:57:12.539Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:57:12.539Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:57:12.479Z"],"workRunningCount":1}
[debug] [2025-02-21T07:57:12.540Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:57:12.479Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T07:57:12.539Z"],"workRunningCount":2}
[debug] [2025-02-21T07:57:12.540Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:57:12.541Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:57:12.541Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:57:12.541Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:57:12.541Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"status":"cancelled","idNumber":"a104ai89","permanentAddress":"Dhaka, Bangladesh","currentLocation":"","name":"Elias Emon","bookingDate":"2025-02-21T07:19:49.180Z","currentProfession":"Studying.........","notes":"","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_updatedAt":"2025-02-21T07:19:50Z","_type":"booking","_createdAt":"2025-02-21T07:19:50Z","genre":"Male","nationality":"Bangladeshi","age":25,"totalPrice":750,"_id":"drafts.oVMkP0YmhyBGyJroWjD1gb","bookedPeriod":[{"_key":"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd","year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning"}],"_rev":"29b020a0-e434-4710-b516-dd87d1c67683"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"status":"cancelled","idNumber":"a104ai89","permanentAddress":"Dhaka, Bangladesh","currentLocation":"","name":"Elias Emon","bookingDate":"2025-02-21T07:19:49.180Z","currentProfession":"Studying.........","notes":"","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_updatedAt":"2025-02-21T07:19:50Z","_type":"booking","_createdAt":"2025-02-21T07:19:50Z","genre":"Male","nationality":"Bangladeshi","age":25,"totalPrice":750,"_id":"drafts.oVMkP0YmhyBGyJroWjD1gb","bookedPeriod":[{"_key":"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd","year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning"}],"_rev":"29b020a0-e434-4710-b516-dd87d1c67683"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"status\":\"cancelled\",\"idNumber\":\"a104ai89\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"currentLocation\":\"\",\"name\":\"Elias Emon\",\"bookingDate\":\"2025-02-21T07:19:49.180Z\",\"currentProfession\":\"Studying.........\",\"notes\":\"\",\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"_updatedAt\":\"2025-02-21T07:19:50Z\",\"_type\":\"booking\",\"_createdAt\":\"2025-02-21T07:19:50Z\",\"genre\":\"Male\",\"nationality\":\"Bangladeshi\",\"age\":25,\"totalPrice\":750,\"_id\":\"drafts.oVMkP0YmhyBGyJroWjD1gb\",\"bookedPeriod\":[{\"_key\":\"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd\",\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\"}],\"_rev\":\"29b020a0-e434-4710-b516-dd87d1c67683\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"690","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"RSCUTL1Grs1sqmjfk5YoAw\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWjD1gb","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"29b020a0-e434-4710-b516-dd87d1c67683","sanity-transaction-time":"2025-02-21T07:57:02Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"690","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"RSCUTL1Grs1sqmjfk5YoAw\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWjD1gb","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"29b020a0-e434-4710-b516-dd87d1c67683","sanity-transaction-time":"2025-02-21T07:57:02Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"690\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"RSCUTL1Grs1sqmjfk5YoAw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.oVMkP0YmhyBGyJroWjD1gb\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"29b020a0-e434-4710-b516-dd87d1c67683\",\"sanity-transaction-time\":\"2025-02-21T07:57:02Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475","semester":"2nd Semester","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475","semester":"2nd Semester","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"},{\"_key\":\"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475\",\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"}],\"severity\":\"INFO\",\"message\":\"Cancelled booking removed:\"}"}}
[info] >  Document drafts.oVMkP0YmhyBGyJroWjD1gb updated in booking {"user":"Document drafts.oVMkP0YmhyBGyJroWjD1gb updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.oVMkP0YmhyBGyJroWjD1gb updated in booking"}}
[debug] [2025-02-21T07:57:13.150Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 608.6331ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 608.6331ms"}}
[debug] [2025-02-21T07:57:13.150Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:57:13.150Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:57:13.150Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:57:13.150Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:57:12.479Z"],"workRunningCount":1}
[debug] [2025-02-21T07:57:13.929Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1448.0707ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1448.0707ms"}}
[debug] [2025-02-21T07:57:13.929Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T07:57:13.929Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:57:13.929Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:57:13.929Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:57:14.412Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:57:14.412Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:57:14.412Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:57:14.412Z"],"workRunningCount":1}
[debug] [2025-02-21T07:57:14.412Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:57:14.412Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:57:14.412Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:57:14.412Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:57:14.412Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"bookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer"},{"year":"2024/2025","_key":"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475","semester":"2nd Semester","services":"Weekly room cleaning"}],"priceSummer":399,"priceWinter":1500,"_updatedAt":"2025-02-21T07:19:52Z","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"_rev":"oVMkP0YmhyBGyJroWjG78W","title":"arroios-room-1","_createdAt":"2025-02-19T14:46:30Z","roomNumber":1,"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","slug":{"current":"arroios-room-1","_type":"slug"},"roomType":"Single bed","isAvailable":true,"_type":"room","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"}},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"bookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer"},{"year":"2024/2025","_key":"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475","semester":"2nd Semester","services":"Weekly room cleaning"}],"priceSummer":399,"priceWinter":1500,"_updatedAt":"2025-02-21T07:19:52Z","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"year":"2026/2027","semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c"}],"_rev":"oVMkP0YmhyBGyJroWjG78W","title":"arroios-room-1","_createdAt":"2025-02-19T14:46:30Z","roomNumber":1,"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","slug":{"current":"arroios-room-1","_type":"slug"},"roomType":"Single bed","isAvailable":true,"_type":"room","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"}},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"bookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\",\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\"},{\"year\":\"2024/2025\",\"_key\":\"oVMkP0YmhyBGyJroWjD1gb__^^__7e5b1b36-29c9-4d0c-b8c0-a6231de79475\",\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\"}],\"priceSummer\":399,\"priceWinter\":1500,\"_updatedAt\":\"2025-02-21T07:19:52Z\",\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\"},{\"semester\":\"Both Semesters\",\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"semester\":\"1st Semester\",\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"semester\":\"2nd Semester\",\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"year\":\"2026/2027\",\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\"}],\"_rev\":\"oVMkP0YmhyBGyJroWjG78W\",\"title\":\"arroios-room-1\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"roomNumber\":1,\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"slug\":{\"current\":\"arroios-room-1\",\"_type\":\"slug\"},\"roomType\":\"Single bed\",\"isAvailable\":true,\"_type\":\"room\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"}},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2143","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"CFaT9gtzl5rhfxhB4HukZg\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjG78W","sanity-transaction-time":"2025-02-21T07:57:14Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2143","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"CFaT9gtzl5rhfxhB4HukZg\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjG78W","sanity-transaction-time":"2025-02-21T07:57:14Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2143\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"CFaT9gtzl5rhfxhB4HukZg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjG78W\",\"sanity-transaction-time\":\"2025-02-21T07:57:14Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:57:14.920Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 507.7421ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 507.7421ms"}}
[debug] [2025-02-21T07:57:14.921Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:57:14.921Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:57:14.921Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:57:14.921Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:58:58.436Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:58.436Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:58:58.436Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:58.436Z"],"workRunningCount":1}
[debug] [2025-02-21T07:58:58.436Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:58:58.437Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:58:58.437Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:58:58.437Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:58:58.437Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_id":"oVMkP0YmhyBGyJroWjD1gb","idNumber":"a104ai89","genre":"Male","currentProfession":"Studying.........","bookedPeriod":[{"price":750,"semester":"2nd Semester","services":"Weekly room cleaning","_key":"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd","year":"2024/2025"}],"currentLocation":"","nationality":"Bangladeshi","_rev":"oVMkP0YmhyBGyJroWjGD5K","bookingDate":"2025-02-21T07:19:49.180Z","totalPrice":750,"_type":"booking","age":25,"_createdAt":"2025-02-21T07:19:50Z","_updatedAt":"2025-02-21T07:58:58Z","name":"Elias Emon","status":"cancelled","notes":"","permanentAddress":"Dhaka, Bangladesh"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_id":"oVMkP0YmhyBGyJroWjD1gb","idNumber":"a104ai89","genre":"Male","currentProfession":"Studying.........","bookedPeriod":[{"price":750,"semester":"2nd Semester","services":"Weekly room cleaning","_key":"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd","year":"2024/2025"}],"currentLocation":"","nationality":"Bangladeshi","_rev":"oVMkP0YmhyBGyJroWjGD5K","bookingDate":"2025-02-21T07:19:49.180Z","totalPrice":750,"_type":"booking","age":25,"_createdAt":"2025-02-21T07:19:50Z","_updatedAt":"2025-02-21T07:58:58Z","name":"Elias Emon","status":"cancelled","notes":"","permanentAddress":"Dhaka, Bangladesh"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"_id\":\"oVMkP0YmhyBGyJroWjD1gb\",\"idNumber\":\"a104ai89\",\"genre\":\"Male\",\"currentProfession\":\"Studying.........\",\"bookedPeriod\":[{\"price\":750,\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\",\"_key\":\"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd\",\"year\":\"2024/2025\"}],\"currentLocation\":\"\",\"nationality\":\"Bangladeshi\",\"_rev\":\"oVMkP0YmhyBGyJroWjGD5K\",\"bookingDate\":\"2025-02-21T07:19:49.180Z\",\"totalPrice\":750,\"_type\":\"booking\",\"age\":25,\"_createdAt\":\"2025-02-21T07:19:50Z\",\"_updatedAt\":\"2025-02-21T07:58:58Z\",\"name\":\"Elias Emon\",\"status\":\"cancelled\",\"notes\":\"\",\"permanentAddress\":\"Dhaka, Bangladesh\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"669","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"5vGon72Qh88RmaDAsRgnhQ\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWjD1gb","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjGD5K","sanity-transaction-time":"2025-02-21T07:58:58Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"669","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"5vGon72Qh88RmaDAsRgnhQ\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWjD1gb","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjGD5K","sanity-transaction-time":"2025-02-21T07:58:58Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"669\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"5vGon72Qh88RmaDAsRgnhQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"oVMkP0YmhyBGyJroWjD1gb\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjGD5K\",\"sanity-transaction-time\":\"2025-02-21T07:58:58Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T07:58:58.520Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:58:58.520Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:58.436Z"],"workRunningCount":1}
[debug] [2025-02-21T07:58:58.520Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:58.436Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:58:58.520Z"],"workRunningCount":2}
[debug] [2025-02-21T07:58:58.520Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:58:58.521Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:58:58.521Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:58:58.521Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:58:58.522Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"}],\"severity\":\"INFO\",\"message\":\"Cancelled booking removed:\"}"}}
[info] >  Document oVMkP0YmhyBGyJroWjD1gb updated in booking {"user":"Document oVMkP0YmhyBGyJroWjD1gb updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document oVMkP0YmhyBGyJroWjD1gb updated in booking"}}
[debug] [2025-02-21T07:58:58.946Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 508.4679ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 508.4679ms"}}
[debug] [2025-02-21T07:58:58.946Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:58:58.946Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:58:58.946Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:58:58.946Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:58:58.520Z"],"workRunningCount":1}
[debug] [2025-02-21T07:58:59.167Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:59.167Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:58:58.520Z"],"workRunningCount":1}
[debug] [2025-02-21T07:58:59.167Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:58:58.520Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:59.167Z"],"workRunningCount":2}
[debug] [2025-02-21T07:58:59.167Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:58:59.168Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:58:59.168Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:58:59.168Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:58:59.168Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_id":"drafts.oVMkP0YmhyBGyJroWjD1gb","notes":"","_updatedAt":"2025-02-21T07:19:50Z","nationality":"Bangladeshi","currentProfession":"Studying.........","totalPrice":750,"bookingDate":"2025-02-21T07:19:49.180Z","bookedPeriod":[{"_key":"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd","year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning"}],"age":25,"_type":"booking","genre":"Male","idNumber":"a104ai89","_createdAt":"2025-02-21T07:19:50Z","permanentAddress":"Dhaka, Bangladesh","_rev":"29b020a0-e434-4710-b516-dd87d1c67683","name":"Elias Emon","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"status":"cancelled","currentLocation":""},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_id":"drafts.oVMkP0YmhyBGyJroWjD1gb","notes":"","_updatedAt":"2025-02-21T07:19:50Z","nationality":"Bangladeshi","currentProfession":"Studying.........","totalPrice":750,"bookingDate":"2025-02-21T07:19:49.180Z","bookedPeriod":[{"_key":"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd","year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning"}],"age":25,"_type":"booking","genre":"Male","idNumber":"a104ai89","_createdAt":"2025-02-21T07:19:50Z","permanentAddress":"Dhaka, Bangladesh","_rev":"29b020a0-e434-4710-b516-dd87d1c67683","name":"Elias Emon","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"status":"cancelled","currentLocation":""},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_id\":\"drafts.oVMkP0YmhyBGyJroWjD1gb\",\"notes\":\"\",\"_updatedAt\":\"2025-02-21T07:19:50Z\",\"nationality\":\"Bangladeshi\",\"currentProfession\":\"Studying.........\",\"totalPrice\":750,\"bookingDate\":\"2025-02-21T07:19:49.180Z\",\"bookedPeriod\":[{\"_key\":\"18eebb40-5bab-4cf3-9d8d-0b680be0b6dd\",\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\"}],\"age\":25,\"_type\":\"booking\",\"genre\":\"Male\",\"idNumber\":\"a104ai89\",\"_createdAt\":\"2025-02-21T07:19:50Z\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"_rev\":\"29b020a0-e434-4710-b516-dd87d1c67683\",\"name\":\"Elias Emon\",\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"status\":\"cancelled\",\"currentLocation\":\"\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"690","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"4P1A+aoRc7jsKarlj83R5g\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWjD1gb","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjGD5K","sanity-transaction-time":"2025-02-21T07:58:58Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"690","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"4P1A+aoRc7jsKarlj83R5g\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWjD1gb","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjGD5K","sanity-transaction-time":"2025-02-21T07:58:58Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"690\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"4P1A+aoRc7jsKarlj83R5g\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.oVMkP0YmhyBGyJroWjD1gb\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjGD5K\",\"sanity-transaction-time\":\"2025-02-21T07:58:58Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T07:58:59.786Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1264.2555ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1264.2555ms"}}
[debug] [2025-02-21T07:58:59.786Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T07:58:59.786Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:58:59.786Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:58:59.786Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:59.167Z"],"workRunningCount":1}
[debug] [2025-02-21T07:59:00.023Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:59:00.023Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:59.167Z"],"workRunningCount":1}
[debug] [2025-02-21T07:59:00.023Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:58:59.167Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:59:00.023Z"],"workRunningCount":2}
[debug] [2025-02-21T07:59:00.023Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T07:59:00.024Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:59:00.024Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T07:59:00.024Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T07:59:00.024Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"}],\"severity\":\"INFO\",\"message\":\"Cancelled booking removed:\"}"}}
[info] >  Document drafts.oVMkP0YmhyBGyJroWjD1gb deleted from booking {"user":"Document drafts.oVMkP0YmhyBGyJroWjD1gb deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.oVMkP0YmhyBGyJroWjD1gb deleted from booking"}}
[debug] [2025-02-21T07:59:00.484Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1316.0584ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1316.0584ms"}}
[debug] [2025-02-21T07:59:00.484Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:59:00.485Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:59:00.485Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:59:00.485Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:59:00.023Z"],"workRunningCount":1}
[debug] [2025-02-21T07:59:00.711Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:59:00.711Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:59:00.023Z"],"workRunningCount":1}
[debug] [2025-02-21T07:59:00.711Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T07:59:00.023Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T07:59:00.711Z"],"workRunningCount":2}
[debug] [2025-02-21T07:59:00.712Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:59:00.712Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:59:00.712Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:59:00.712Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:59:00.712Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","priceWinter":1500,"_rev":"se7euW5U96P9qJ0OGB3GP2","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_updatedAt":"2025-02-21T07:59:00Z","bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"semester":"Summer","services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d"}],"_type":"room","_createdAt":"2025-02-19T14:46:30Z","roomType":"Single bed","roomNumber":1,"isAvailable":true,"title":"arroios-room-1","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"year":"2025/2026","semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"slug":{"_type":"slug","current":"arroios-room-1"},"priceSummer":399},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","priceWinter":1500,"_rev":"se7euW5U96P9qJ0OGB3GP2","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_updatedAt":"2025-02-21T07:59:00Z","bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"semester":"Summer","services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d"}],"_type":"room","_createdAt":"2025-02-19T14:46:30Z","roomType":"Single bed","roomNumber":1,"isAvailable":true,"title":"arroios-room-1","availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"year":"2025/2026","semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"slug":{"_type":"slug","current":"arroios-room-1"},"priceSummer":399},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"priceWinter\":1500,\"_rev\":\"se7euW5U96P9qJ0OGB3GP2\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_updatedAt\":\"2025-02-21T07:59:00Z\",\"bookedPeriods\":[{\"year\":\"2024/2025\",\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\"},{\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\",\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\"}],\"_type\":\"room\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"roomType\":\"Single bed\",\"roomNumber\":1,\"isAvailable\":true,\"title\":\"arroios-room-1\",\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"year\":\"2025/2026\",\"semester\":\"1st Semester\",\"_key\":\"381749933c8c8cebc0a690a887cf16d4\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"priceSummer\":399},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"6NgdSjnJDppd4A62uNvYaw\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGB3GP2","sanity-transaction-time":"2025-02-21T07:59:00Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"6NgdSjnJDppd4A62uNvYaw\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGB3GP2","sanity-transaction-time":"2025-02-21T07:59:00Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1988\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"6NgdSjnJDppd4A62uNvYaw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGB3GP2\",\"sanity-transaction-time\":\"2025-02-21T07:59:00Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T07:59:01.132Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1108.1457ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1108.1457ms"}}
[debug] [2025-02-21T07:59:01.133Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T07:59:01.133Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:59:01.133Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:59:01.133Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:59:00.711Z"],"workRunningCount":1}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:59:01.223Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 510.6453ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 510.6453ms"}}
[debug] [2025-02-21T07:59:01.223Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:59:01.223Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:59:01.223Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:59:01.223Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:59:01.467Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:59:01.467Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T07:59:01.467Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T07:59:01.467Z"],"workRunningCount":1}
[debug] [2025-02-21T07:59:01.467Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T07:59:01.468Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T07:59:01.468Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T07:59:01.468Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T07:59:01.468Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"slug":{"_type":"slug","current":"arroios-room-1"},"_updatedAt":"2025-02-21T07:59:00Z","property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"},"_rev":"oVMkP0YmhyBGyJroWjGDFI","bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning"}],"priceWinter":1500,"_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"roomType":"Single bed","_type":"room","title":"arroios-room-1","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomNumber":1,"priceSummer":399,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}]},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"slug":{"_type":"slug","current":"arroios-room-1"},"_updatedAt":"2025-02-21T07:59:00Z","property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"},"_rev":"oVMkP0YmhyBGyJroWjGDFI","bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning"}],"priceWinter":1500,"_createdAt":"2025-02-19T14:46:30Z","isAvailable":true,"roomType":"Single bed","_type":"room","title":"arroios-room-1","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","roomNumber":1,"priceSummer":399,"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"semester":"Full Year","_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}]},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_updatedAt\":\"2025-02-21T07:59:00Z\",\"property\":{\"_type\":\"reference\",\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\"},\"_rev\":\"oVMkP0YmhyBGyJroWjGDFI\",\"bookedPeriods\":[{\"year\":\"2024/2025\",\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\"},{\"year\":\"2024/2025\",\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\"}],\"priceWinter\":1500,\"_createdAt\":\"2025-02-19T14:46:30Z\",\"isAvailable\":true,\"roomType\":\"Single bed\",\"_type\":\"room\",\"title\":\"arroios-room-1\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"roomNumber\":1,\"priceSummer\":399,\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}]},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"TxJDQELQVIOG5jc4lQNupA\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjGDFI","sanity-transaction-time":"2025-02-21T07:59:01Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"TxJDQELQVIOG5jc4lQNupA\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjGDFI","sanity-transaction-time":"2025-02-21T07:59:01Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1988\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"TxJDQELQVIOG5jc4lQNupA\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjGDFI\",\"sanity-transaction-time\":\"2025-02-21T07:59:01Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T07:59:02.791Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1323.3913ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1323.3913ms"}}
[debug] [2025-02-21T07:59:02.792Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T07:59:02.792Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T07:59:02.792Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T07:59:02.792Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:04:06.626Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:04:06.626Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:04:06.626Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:04:06.626Z"],"workRunningCount":1}
[debug] [2025-02-21T08:04:06.626Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T08:04:06.627Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:04:06.627Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T08:04:06.627Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T08:04:06.627Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"genre":"Male","currentLocation":"","idNumber":"a104ai89","_createdAt":"2025-02-21T08:04:06Z","_rev":"oVMkP0YmhyBGyJroWjHCdJ","bookedPeriod":[{"year":"2024/2025","services":"Weekly room cleaning","_key":"409c57a4-2fe6-406c-b3e0-402fac9f8566","semester":"2nd Semester","price":750},{"semester":"Both Semesters","price":1500,"year":"2025/2026","services":"Weekly room cleaning","_key":"1fd204c7-af82-4149-8f02-8db25e3be3a4"}],"totalPrice":2250,"permanentAddress":"Dhaka, Bangladesh","_id":"oVMkP0YmhyBGyJroWjHCey","_updatedAt":"2025-02-21T08:04:06Z","bookingDate":"2025-02-21T08:04:04.764Z","currentProfession":"Studying.........","notes":"","age":28,"nationality":"Bangladeshi","room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"_type":"booking","name":"Elias Emon","status":"pending"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"genre":"Male","currentLocation":"","idNumber":"a104ai89","_createdAt":"2025-02-21T08:04:06Z","_rev":"oVMkP0YmhyBGyJroWjHCdJ","bookedPeriod":[{"year":"2024/2025","services":"Weekly room cleaning","_key":"409c57a4-2fe6-406c-b3e0-402fac9f8566","semester":"2nd Semester","price":750},{"semester":"Both Semesters","price":1500,"year":"2025/2026","services":"Weekly room cleaning","_key":"1fd204c7-af82-4149-8f02-8db25e3be3a4"}],"totalPrice":2250,"permanentAddress":"Dhaka, Bangladesh","_id":"oVMkP0YmhyBGyJroWjHCey","_updatedAt":"2025-02-21T08:04:06Z","bookingDate":"2025-02-21T08:04:04.764Z","currentProfession":"Studying.........","notes":"","age":28,"nationality":"Bangladeshi","room":{"_type":"reference","_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"_type":"booking","name":"Elias Emon","status":"pending"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"genre\":\"Male\",\"currentLocation\":\"\",\"idNumber\":\"a104ai89\",\"_createdAt\":\"2025-02-21T08:04:06Z\",\"_rev\":\"oVMkP0YmhyBGyJroWjHCdJ\",\"bookedPeriod\":[{\"year\":\"2024/2025\",\"services\":\"Weekly room cleaning\",\"_key\":\"409c57a4-2fe6-406c-b3e0-402fac9f8566\",\"semester\":\"2nd Semester\",\"price\":750},{\"semester\":\"Both Semesters\",\"price\":1500,\"year\":\"2025/2026\",\"services\":\"Weekly room cleaning\",\"_key\":\"1fd204c7-af82-4149-8f02-8db25e3be3a4\"}],\"totalPrice\":2250,\"permanentAddress\":\"Dhaka, Bangladesh\",\"_id\":\"oVMkP0YmhyBGyJroWjHCey\",\"_updatedAt\":\"2025-02-21T08:04:06Z\",\"bookingDate\":\"2025-02-21T08:04:04.764Z\",\"currentProfession\":\"Studying.........\",\"notes\":\"\",\"age\":28,\"nationality\":\"Bangladeshi\",\"room\":{\"_type\":\"reference\",\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\"},\"_type\":\"booking\",\"name\":\"Elias Emon\",\"status\":\"pending\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"810","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"nOfJ/OkKS8v6e5NFXXn4KQ\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWjHCey","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjHCdJ","sanity-transaction-time":"2025-02-21T08:04:06Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"810","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"nOfJ/OkKS8v6e5NFXXn4KQ\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWjHCey","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjHCdJ","sanity-transaction-time":"2025-02-21T08:04:06Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"810\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"nOfJ/OkKS8v6e5NFXXn4KQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"oVMkP0YmhyBGyJroWjHCey\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjHCdJ\",\"sanity-transaction-time\":\"2025-02-21T08:04:06Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T08:04:06.662Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:04:06.662Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:04:06.626Z"],"workRunningCount":1}
[debug] [2025-02-21T08:04:06.662Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:04:06.626Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:04:06.662Z"],"workRunningCount":2}
[debug] [2025-02-21T08:04:06.662Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T08:04:06.663Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:04:06.663Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T08:04:06.663Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T08:04:06.663Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a","semester":"2nd Semester","year":"2024/2025","services":"Weekly room cleaning"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb","semester":"Both Semesters","year":"2025/2026","services":"Weekly room cleaning"}],"severity":"INFO","message":"New booking added:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a","semester":"2nd Semester","year":"2024/2025","services":"Weekly room cleaning"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb","semester":"Both Semesters","year":"2025/2026","services":"Weekly room cleaning"}],"severity":"INFO","message":"New booking added:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"},{\"_key\":\"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a\",\"semester\":\"2nd Semester\",\"year\":\"2024/2025\",\"services\":\"Weekly room cleaning\"},{\"_key\":\"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb\",\"semester\":\"Both Semesters\",\"year\":\"2025/2026\",\"services\":\"Weekly room cleaning\"}],\"severity\":\"INFO\",\"message\":\"New booking added:\"}"}}
[debug] [2025-02-21T08:04:07.663Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 999.7918ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 999.7918ms"}}
[debug] [2025-02-21T08:04:07.664Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T08:04:07.664Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:04:07.664Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:04:07.664Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:04:06.626Z"],"workRunningCount":1}
[info] >  Document oVMkP0YmhyBGyJroWjHCey updated in booking {"user":"Document oVMkP0YmhyBGyJroWjHCey updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document oVMkP0YmhyBGyJroWjHCey updated in booking"}}
[debug] [2025-02-21T08:04:08.837Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 2209.8453ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 2209.8453ms"}}
[debug] [2025-02-21T08:04:08.838Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T08:04:08.838Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:04:08.838Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:04:08.838Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:04:09.117Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:04:09.117Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:04:09.117Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:04:09.117Z"],"workRunningCount":1}
[debug] [2025-02-21T08:04:09.117Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T08:04:09.117Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:04:09.117Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T08:04:09.117Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T08:04:09.118Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_rev":"se7euW5U96P9qJ0OGB4Aaf","priceWinter":1500,"slug":{"_type":"slug","current":"arroios-room-1"},"_updatedAt":"2025-02-21T08:04:08Z","roomNumber":1,"_type":"room","_createdAt":"2025-02-19T14:46:30Z","priceSummer":399,"bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a","semester":"2nd Semester","year":"2024/2025","services":"Weekly room cleaning"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb","semester":"Both Semesters","year":"2025/2026","services":"Weekly room cleaning"}],"title":"arroios-room-1","roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"isAvailable":true},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"year":"2025/2026","semester":"2nd Semester","_key":"9e5a2c3aa1e435cbe228c2adcf54b206"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"year":"2026/2027","semester":"Summer","_key":"6e23bc8ff8752ac846a7d78fed82f10f"},{"semester":"Both Semesters","_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_rev":"se7euW5U96P9qJ0OGB4Aaf","priceWinter":1500,"slug":{"_type":"slug","current":"arroios-room-1"},"_updatedAt":"2025-02-21T08:04:08Z","roomNumber":1,"_type":"room","_createdAt":"2025-02-19T14:46:30Z","priceSummer":399,"bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a","semester":"2nd Semester","year":"2024/2025","services":"Weekly room cleaning"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb","semester":"Both Semesters","year":"2025/2026","services":"Weekly room cleaning"}],"title":"arroios-room-1","roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"isAvailable":true},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"year\":\"2025/2026\",\"semester\":\"2nd Semester\",\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"year\":\"2026/2027\",\"semester\":\"Summer\",\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\"},{\"semester\":\"Both Semesters\",\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_rev\":\"se7euW5U96P9qJ0OGB4Aaf\",\"priceWinter\":1500,\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_updatedAt\":\"2025-02-21T08:04:08Z\",\"roomNumber\":1,\"_type\":\"room\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"priceSummer\":399,\"bookedPeriods\":[{\"year\":\"2024/2025\",\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\"},{\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\",\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\"},{\"_key\":\"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a\",\"semester\":\"2nd Semester\",\"year\":\"2024/2025\",\"services\":\"Weekly room cleaning\"},{\"_key\":\"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb\",\"semester\":\"Both Semesters\",\"year\":\"2025/2026\",\"services\":\"Weekly room cleaning\"}],\"title\":\"arroios-room-1\",\"roomType\":\"Single bed\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"isAvailable\":true},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2300","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"pJzLxgNtJ16ggqpFqVA96w\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGB4Aaf","sanity-transaction-time":"2025-02-21T08:04:08Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2300","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"pJzLxgNtJ16ggqpFqVA96w\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"se7euW5U96P9qJ0OGB4Aaf","sanity-transaction-time":"2025-02-21T08:04:08Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2300\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"pJzLxgNtJ16ggqpFqVA96w\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"se7euW5U96P9qJ0OGB4Aaf\",\"sanity-transaction-time\":\"2025-02-21T08:04:08Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T08:04:09.561Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 443.3698ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 443.3698ms"}}
[debug] [2025-02-21T08:04:09.561Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T08:04:09.561Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:04:09.561Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:04:09.561Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:13:33.959Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:33.959Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:13:33.959Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:33.959Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:33.959Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T08:13:33.961Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:33.961Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T08:13:33.961Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T08:13:33.961Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[debug] [2025-02-21T08:13:33.962Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:33.962Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:33.959Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:33.962Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:33.959Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:33.962Z"],"workRunningCount":2}
[debug] [2025-02-21T08:13:33.962Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T08:13:33.964Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:33.964Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T08:13:33.964Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T08:13:33.964Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"status":"cancelled","age":28,"idNumber":"a104ai89","_type":"booking","currentProfession":"Studying.........","_updatedAt":"2025-02-21T08:04:06Z","_id":"drafts.oVMkP0YmhyBGyJroWjHCey","nationality":"Bangladeshi","name":"Elias Emon","genre":"Male","notes":"","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning","_key":"409c57a4-2fe6-406c-b3e0-402fac9f8566"},{"_key":"1fd204c7-af82-4149-8f02-8db25e3be3a4","year":"2025/2026","price":1500,"semester":"Both Semesters","services":"Weekly room cleaning"}],"_rev":"c78dc3aa-11a1-4225-9738-09c94a0f8a17","totalPrice":2250,"currentLocation":"","bookingDate":"2025-02-21T08:04:04.764Z","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"permanentAddress":"Dhaka, Bangladesh","_createdAt":"2025-02-21T08:04:06Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"status":"cancelled","age":28,"idNumber":"a104ai89","_type":"booking","currentProfession":"Studying.........","_updatedAt":"2025-02-21T08:04:06Z","_id":"drafts.oVMkP0YmhyBGyJroWjHCey","nationality":"Bangladeshi","name":"Elias Emon","genre":"Male","notes":"","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning","_key":"409c57a4-2fe6-406c-b3e0-402fac9f8566"},{"_key":"1fd204c7-af82-4149-8f02-8db25e3be3a4","year":"2025/2026","price":1500,"semester":"Both Semesters","services":"Weekly room cleaning"}],"_rev":"c78dc3aa-11a1-4225-9738-09c94a0f8a17","totalPrice":2250,"currentLocation":"","bookingDate":"2025-02-21T08:04:04.764Z","room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"permanentAddress":"Dhaka, Bangladesh","_createdAt":"2025-02-21T08:04:06Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"status\":\"cancelled\",\"age\":28,\"idNumber\":\"a104ai89\",\"_type\":\"booking\",\"currentProfession\":\"Studying.........\",\"_updatedAt\":\"2025-02-21T08:04:06Z\",\"_id\":\"drafts.oVMkP0YmhyBGyJroWjHCey\",\"nationality\":\"Bangladeshi\",\"name\":\"Elias Emon\",\"genre\":\"Male\",\"notes\":\"\",\"bookedPeriod\":[{\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\",\"_key\":\"409c57a4-2fe6-406c-b3e0-402fac9f8566\"},{\"_key\":\"1fd204c7-af82-4149-8f02-8db25e3be3a4\",\"year\":\"2025/2026\",\"price\":1500,\"semester\":\"Both Semesters\",\"services\":\"Weekly room cleaning\"}],\"_rev\":\"c78dc3aa-11a1-4225-9738-09c94a0f8a17\",\"totalPrice\":2250,\"currentLocation\":\"\",\"bookingDate\":\"2025-02-21T08:04:04.764Z\",\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"permanentAddress\":\"Dhaka, Bangladesh\",\"_createdAt\":\"2025-02-21T08:04:06Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"833","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"zZ5r/9ADECu6e0cxTjnNaw\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWjHCey","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"c78dc3aa-11a1-4225-9738-09c94a0f8a17","sanity-transaction-time":"2025-02-21T08:13:33Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"833","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"zZ5r/9ADECu6e0cxTjnNaw\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWjHCey","sanity-operation":"create","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"c78dc3aa-11a1-4225-9738-09c94a0f8a17","sanity-transaction-time":"2025-02-21T08:13:33Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"833\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"zZ5r/9ADECu6e0cxTjnNaw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.oVMkP0YmhyBGyJroWjHCey\",\"sanity-operation\":\"create\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"c78dc3aa-11a1-4225-9738-09c94a0f8a17\",\"sanity-transaction-time\":\"2025-02-21T08:13:33Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a","semester":"2nd Semester","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb","semester":"Both Semesters","services":"Weekly room cleaning","year":"2025/2026"}],"severity":"INFO","message":"Cancelled booking removed:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a","semester":"2nd Semester","services":"Weekly room cleaning","year":"2024/2025"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb","semester":"Both Semesters","services":"Weekly room cleaning","year":"2025/2026"}],"severity":"INFO","message":"Cancelled booking removed:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"},{\"_key\":\"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a\",\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"},{\"_key\":\"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb\",\"semester\":\"Both Semesters\",\"services\":\"Weekly room cleaning\",\"year\":\"2025/2026\"}],\"severity\":\"INFO\",\"message\":\"Cancelled booking removed:\"}"}}
[debug] [2025-02-21T08:13:35.100Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1138.9898ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1138.9898ms"}}
[debug] [2025-02-21T08:13:35.101Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T08:13:35.101Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:35.101Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:35.101Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:33.962Z"],"workRunningCount":1}
[info] >  Document drafts.oVMkP0YmhyBGyJroWjHCey updated in booking {"user":"Document drafts.oVMkP0YmhyBGyJroWjHCey updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.oVMkP0YmhyBGyJroWjHCey updated in booking"}}
[debug] [2025-02-21T08:13:36.146Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 2182.3387ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 2182.3387ms"}}
[debug] [2025-02-21T08:13:36.146Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T08:13:36.147Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:36.147Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:36.147Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:13:36.337Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:36.337Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:13:36.337Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:36.337Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:36.337Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T08:13:36.337Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:36.337Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T08:13:36.337Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T08:13:36.338Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[debug] [2025-02-21T08:13:36.432Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:36.432Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:36.337Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:36.432Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:36.337Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:36.432Z"],"workRunningCount":2}
[debug] [2025-02-21T08:13:36.432Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T08:13:36.432Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:36.432Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T08:13:36.432Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T08:13:36.433Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"bookingDate":"2025-02-21T08:04:04.764Z","_rev":"gbwTgqOq53YDSh8fvn5O5w","age":28,"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"status":"cancelled","_updatedAt":"2025-02-21T08:13:35Z","currentLocation":"","_id":"oVMkP0YmhyBGyJroWjHCey","currentProfession":"Studying.........","idNumber":"a104ai89","_type":"booking","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning","_key":"409c57a4-2fe6-406c-b3e0-402fac9f8566"},{"year":"2025/2026","price":1500,"semester":"Both Semesters","services":"Weekly room cleaning","_key":"1fd204c7-af82-4149-8f02-8db25e3be3a4"}],"totalPrice":2250,"_createdAt":"2025-02-21T08:04:06Z","nationality":"Bangladeshi","permanentAddress":"Dhaka, Bangladesh","genre":"Male","name":"Elias Emon","notes":""},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"bookingDate":"2025-02-21T08:04:04.764Z","_rev":"gbwTgqOq53YDSh8fvn5O5w","age":28,"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"status":"cancelled","_updatedAt":"2025-02-21T08:13:35Z","currentLocation":"","_id":"oVMkP0YmhyBGyJroWjHCey","currentProfession":"Studying.........","idNumber":"a104ai89","_type":"booking","bookedPeriod":[{"year":"2024/2025","price":750,"semester":"2nd Semester","services":"Weekly room cleaning","_key":"409c57a4-2fe6-406c-b3e0-402fac9f8566"},{"year":"2025/2026","price":1500,"semester":"Both Semesters","services":"Weekly room cleaning","_key":"1fd204c7-af82-4149-8f02-8db25e3be3a4"}],"totalPrice":2250,"_createdAt":"2025-02-21T08:04:06Z","nationality":"Bangladeshi","permanentAddress":"Dhaka, Bangladesh","genre":"Male","name":"Elias Emon","notes":""},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"bookingDate\":\"2025-02-21T08:04:04.764Z\",\"_rev\":\"gbwTgqOq53YDSh8fvn5O5w\",\"age\":28,\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"status\":\"cancelled\",\"_updatedAt\":\"2025-02-21T08:13:35Z\",\"currentLocation\":\"\",\"_id\":\"oVMkP0YmhyBGyJroWjHCey\",\"currentProfession\":\"Studying.........\",\"idNumber\":\"a104ai89\",\"_type\":\"booking\",\"bookedPeriod\":[{\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\",\"_key\":\"409c57a4-2fe6-406c-b3e0-402fac9f8566\"},{\"year\":\"2025/2026\",\"price\":1500,\"semester\":\"Both Semesters\",\"services\":\"Weekly room cleaning\",\"_key\":\"1fd204c7-af82-4149-8f02-8db25e3be3a4\"}],\"totalPrice\":2250,\"_createdAt\":\"2025-02-21T08:04:06Z\",\"nationality\":\"Bangladeshi\",\"permanentAddress\":\"Dhaka, Bangladesh\",\"genre\":\"Male\",\"name\":\"Elias Emon\",\"notes\":\"\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"812","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"AYHtJIwTsiptq9fShx7Wxw\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWjHCey","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn5O5w","sanity-transaction-time":"2025-02-21T08:13:35Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"812","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"AYHtJIwTsiptq9fShx7Wxw\"","sanity-dataset":"production","sanity-document-id":"oVMkP0YmhyBGyJroWjHCey","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn5O5w","sanity-transaction-time":"2025-02-21T08:13:35Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"812\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"AYHtJIwTsiptq9fShx7Wxw\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"oVMkP0YmhyBGyJroWjHCey\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvn5O5w\",\"sanity-transaction-time\":\"2025-02-21T08:13:35Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"}],\"severity\":\"INFO\",\"message\":\"Cancelled booking removed:\"}"}}
[info] >  Document oVMkP0YmhyBGyJroWjHCey updated in booking {"user":"Document oVMkP0YmhyBGyJroWjHCey updated in booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document oVMkP0YmhyBGyJroWjHCey updated in booking"}}
[debug] [2025-02-21T08:13:36.887Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 454.5528ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 454.5528ms"}}
[debug] [2025-02-21T08:13:36.887Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T08:13:36.887Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:36.887Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:36.887Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:36.337Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:37.452Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:37.451Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:36.337Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:37.452Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:36.337Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:37.451Z"],"workRunningCount":2}
[debug] [2025-02-21T08:13:37.452Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T08:13:37.452Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:37.452Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T08:13:37.452Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T08:13:37.453Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_updatedAt":"2025-02-21T08:04:06Z","totalPrice":2250,"bookedPeriod":[{"services":"Weekly room cleaning","_key":"409c57a4-2fe6-406c-b3e0-402fac9f8566","year":"2024/2025","price":750,"semester":"2nd Semester"},{"_key":"1fd204c7-af82-4149-8f02-8db25e3be3a4","year":"2025/2026","price":1500,"semester":"Both Semesters","services":"Weekly room cleaning"}],"permanentAddress":"Dhaka, Bangladesh","age":28,"_type":"booking","notes":"","idNumber":"a104ai89","currentLocation":"","status":"cancelled","bookingDate":"2025-02-21T08:04:04.764Z","nationality":"Bangladeshi","currentProfession":"Studying.........","_id":"drafts.oVMkP0YmhyBGyJroWjHCey","_rev":"c78dc3aa-11a1-4225-9738-09c94a0f8a17","name":"Elias Emon","genre":"Male","_createdAt":"2025-02-21T08:04:06Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"room":{"_ref":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_type":"reference"},"_updatedAt":"2025-02-21T08:04:06Z","totalPrice":2250,"bookedPeriod":[{"services":"Weekly room cleaning","_key":"409c57a4-2fe6-406c-b3e0-402fac9f8566","year":"2024/2025","price":750,"semester":"2nd Semester"},{"_key":"1fd204c7-af82-4149-8f02-8db25e3be3a4","year":"2025/2026","price":1500,"semester":"Both Semesters","services":"Weekly room cleaning"}],"permanentAddress":"Dhaka, Bangladesh","age":28,"_type":"booking","notes":"","idNumber":"a104ai89","currentLocation":"","status":"cancelled","bookingDate":"2025-02-21T08:04:04.764Z","nationality":"Bangladeshi","currentProfession":"Studying.........","_id":"drafts.oVMkP0YmhyBGyJroWjHCey","_rev":"c78dc3aa-11a1-4225-9738-09c94a0f8a17","name":"Elias Emon","genre":"Male","_createdAt":"2025-02-21T08:04:06Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"room\":{\"_ref\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_type\":\"reference\"},\"_updatedAt\":\"2025-02-21T08:04:06Z\",\"totalPrice\":2250,\"bookedPeriod\":[{\"services\":\"Weekly room cleaning\",\"_key\":\"409c57a4-2fe6-406c-b3e0-402fac9f8566\",\"year\":\"2024/2025\",\"price\":750,\"semester\":\"2nd Semester\"},{\"_key\":\"1fd204c7-af82-4149-8f02-8db25e3be3a4\",\"year\":\"2025/2026\",\"price\":1500,\"semester\":\"Both Semesters\",\"services\":\"Weekly room cleaning\"}],\"permanentAddress\":\"Dhaka, Bangladesh\",\"age\":28,\"_type\":\"booking\",\"notes\":\"\",\"idNumber\":\"a104ai89\",\"currentLocation\":\"\",\"status\":\"cancelled\",\"bookingDate\":\"2025-02-21T08:04:04.764Z\",\"nationality\":\"Bangladeshi\",\"currentProfession\":\"Studying.........\",\"_id\":\"drafts.oVMkP0YmhyBGyJroWjHCey\",\"_rev\":\"c78dc3aa-11a1-4225-9738-09c94a0f8a17\",\"name\":\"Elias Emon\",\"genre\":\"Male\",\"_createdAt\":\"2025-02-21T08:04:06Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"833","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"yH3jg32X6GzuqJd10P7Oag\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWjHCey","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn5O5w","sanity-transaction-time":"2025-02-21T08:13:35Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"833","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"yH3jg32X6GzuqJd10P7Oag\"","sanity-dataset":"production","sanity-document-id":"drafts.oVMkP0YmhyBGyJroWjHCey","sanity-operation":"delete","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn5O5w","sanity-transaction-time":"2025-02-21T08:13:35Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"833\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"yH3jg32X6GzuqJd10P7Oag\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"drafts.oVMkP0YmhyBGyJroWjHCey\",\"sanity-operation\":\"delete\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvn5O5w\",\"sanity-transaction-time\":\"2025-02-21T08:13:35Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T08:13:37.636Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1297.9483ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1297.9483ms"}}
[debug] [2025-02-21T08:13:37.636Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T08:13:37.636Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:37.636Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:37.636Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:37.451Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:38.077Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:38.077Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:37.451Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:38.077Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:37.451Z","/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:38.077Z"],"workRunningCount":2}
[debug] [2025-02-21T08:13:38.077Z] Accepted request POST /street-lobby/us-central1/handleBookingUpdate --> us-central1-handleBookingUpdate
[debug] [2025-02-21T08:13:38.077Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:38.077Z] [functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/handleBookingUpdate, mapping to path=/"}}
[debug] [2025-02-21T08:13:38.077Z] [worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-handleBookingUpdate)"}}
[info] i  functions: Beginning execution of "us-central1-handleBookingUpdate" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Beginning execution of \"us-central1-handleBookingUpdate\""}}
[debug] [2025-02-21T08:13:38.078Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"} {"user":{"roomId":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","updatedBookedPeriods":[{"_key":"ad7f94703e5c","semester":"1st Semester","year":"2024/2025"},{"_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning","year":"2024/2025"}],"severity":"INFO","message":"Cancelled booking removed:"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"roomId\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"updatedBookedPeriods\":[{\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\",\"year\":\"2024/2025\"},{\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"}],\"severity\":\"INFO\",\"message\":\"Cancelled booking removed:\"}"}}
[info] >  Document drafts.oVMkP0YmhyBGyJroWjHCey deleted from booking {"user":"Document drafts.oVMkP0YmhyBGyJroWjHCey deleted from booking","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document drafts.oVMkP0YmhyBGyJroWjHCey deleted from booking"}}
[debug] [2025-02-21T08:13:38.481Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1028.8442ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1028.8442ms"}}
[debug] [2025-02-21T08:13:38.482Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T08:13:38.482Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:38.482Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:38.482Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:38.077Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:38.820Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:38.820Z"],"queueLength":1,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:38.077Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:38.820Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/handleBookingUpdate-2025-02-21T08:13:38.077Z","/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:38.820Z"],"workRunningCount":2}
[debug] [2025-02-21T08:13:38.820Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T08:13:38.821Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:38.821Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T08:13:38.821Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T08:13:38.821Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"priceWinter":1500,"_rev":"gbwTgqOq53YDSh8fvn5OAX","priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","_type":"room","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","isAvailable":true,"roomType":"Single bed","title":"arroios-room-1","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_updatedAt":"2025-02-21T08:04:08Z","slug":{"_type":"slug","current":"arroios-room-1"},"roomNumber":1,"availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"year":"2024/2025","semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"year":"2025/2026","semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"bookedPeriods":[{"semester":"1st Semester","year":"2024/2025","_key":"ad7f94703e5c"},{"services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a","semester":"2nd Semester","services":"Weekly room cleaning","year":"2024/2025"},{"services":"Weekly room cleaning","year":"2025/2026","_key":"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb","semester":"Both Semesters"}]},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"priceWinter":1500,"_rev":"gbwTgqOq53YDSh8fvn5OAX","priceSummer":399,"_createdAt":"2025-02-19T14:46:30Z","_type":"room","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","isAvailable":true,"roomType":"Single bed","title":"arroios-room-1","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"_updatedAt":"2025-02-21T08:04:08Z","slug":{"_type":"slug","current":"arroios-room-1"},"roomNumber":1,"availableSemesters":[{"semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025"},{"semester":"2nd Semester","_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025"},{"_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025","semester":"Summer"},{"year":"2024/2025","semester":"Both Semesters","_key":"1c62f250e3a1a3514890a15c1d0a98b1"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"year":"2025/2026","semester":"1st Semester","_key":"381749933c8c8cebc0a690a887cf16d4"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"semester":"Full Year","_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027"}],"bookedPeriods":[{"semester":"1st Semester","year":"2024/2025","_key":"ad7f94703e5c"},{"services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer"},{"_key":"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a","semester":"2nd Semester","services":"Weekly room cleaning","year":"2024/2025"},{"services":"Weekly room cleaning","year":"2025/2026","_key":"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb","semester":"Both Semesters"}]},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"priceWinter\":1500,\"_rev\":\"gbwTgqOq53YDSh8fvn5OAX\",\"priceSummer\":399,\"_createdAt\":\"2025-02-19T14:46:30Z\",\"_type\":\"room\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"isAvailable\":true,\"roomType\":\"Single bed\",\"title\":\"arroios-room-1\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"_updatedAt\":\"2025-02-21T08:04:08Z\",\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"roomNumber\":1,\"availableSemesters\":[{\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\"},{\"semester\":\"2nd Semester\",\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\"},{\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\",\"semester\":\"Summer\"},{\"year\":\"2024/2025\",\"semester\":\"Both Semesters\",\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"year\":\"2025/2026\",\"semester\":\"1st Semester\",\"_key\":\"381749933c8c8cebc0a690a887cf16d4\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\"}],\"bookedPeriods\":[{\"semester\":\"1st Semester\",\"year\":\"2024/2025\",\"_key\":\"ad7f94703e5c\"},{\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\",\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\"},{\"_key\":\"oVMkP0YmhyBGyJroWjHCey__^^__a1af79c3-a723-433e-94da-50ea7ee2683a\",\"semester\":\"2nd Semester\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\"},{\"services\":\"Weekly room cleaning\",\"year\":\"2025/2026\",\"_key\":\"oVMkP0YmhyBGyJroWjHCey__^^__96a2c200-accb-4889-bb01-40d21ec027bb\",\"semester\":\"Both Semesters\"}]},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2300","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"e2/msMR7Mc7OYDDinLzyEg\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn5OAX","sanity-transaction-time":"2025-02-21T08:13:35Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"2300","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"e2/msMR7Mc7OYDDinLzyEg\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn5OAX","sanity-transaction-time":"2025-02-21T08:13:35Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"2300\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"e2/msMR7Mc7OYDDinLzyEg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvn5OAX\",\"sanity-transaction-time\":\"2025-02-21T08:13:35Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[debug] [2025-02-21T08:13:39.506Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-handleBookingUpdate" in 1428.9482ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finished \"us-central1-handleBookingUpdate\" in 1428.9482ms"}}
[debug] [2025-02-21T08:13:39.507Z] [worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"[worker-us-central1-handleBookingUpdate-398c5966-8ec2-4acd-850c-491e3c1e61ab]: IDLE"}}
[debug] [2025-02-21T08:13:39.507Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:39.507Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-handleBookingUpdate"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:39.507Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:38.820Z"],"workRunningCount":1}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T08:13:39.548Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 727.0578ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 727.0578ms"}}
[debug] [2025-02-21T08:13:39.548Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T08:13:39.548Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:39.548Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:39.548Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:13:41.148Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:41.148Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:13:41.148Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:41.148Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:41.148Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T08:13:41.149Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:41.149Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T08:13:41.149Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T08:13:41.149Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"title":"arroios-room-1","roomType":"Single bed","isAvailable":true,"availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"year":"2026/2027","semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"slug":{"_type":"slug","current":"arroios-room-1"},"priceWinter":1500,"roomNumber":1,"bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning"}],"_rev":"gbwTgqOq53YDSh8fvn5ODb","_type":"room","priceSummer":399,"property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"},"_updatedAt":"2025-02-21T08:13:38Z","_createdAt":"2025-02-19T14:46:30Z","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"title":"arroios-room-1","roomType":"Single bed","isAvailable":true,"availableSemesters":[{"year":"2024/2025","semester":"1st Semester","_key":"1ada09539f7e4eccd5660879e87eb148"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97","year":"2024/2025"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"semester":"Summer","_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026","semester":"Full Year"},{"_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027","semester":"1st Semester"},{"year":"2026/2027","semester":"2nd Semester","_key":"b13951b0acd54e742a33792b49c92ac6"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"slug":{"_type":"slug","current":"arroios-room-1"},"priceWinter":1500,"roomNumber":1,"bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d","semester":"Summer","services":"Weekly room cleaning"}],"_rev":"gbwTgqOq53YDSh8fvn5ODb","_type":"room","priceSummer":399,"property":{"_type":"reference","_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c"},"_updatedAt":"2025-02-21T08:13:38Z","_createdAt":"2025-02-19T14:46:30Z","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"title\":\"arroios-room-1\",\"roomType\":\"Single bed\",\"isAvailable\":true,\"availableSemesters\":[{\"year\":\"2024/2025\",\"semester\":\"1st Semester\",\"_key\":\"1ada09539f7e4eccd5660879e87eb148\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\",\"year\":\"2024/2025\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"semester\":\"Summer\",\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\",\"semester\":\"Full Year\"},{\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\",\"semester\":\"1st Semester\"},{\"year\":\"2026/2027\",\"semester\":\"2nd Semester\",\"_key\":\"b13951b0acd54e742a33792b49c92ac6\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"priceWinter\":1500,\"roomNumber\":1,\"bookedPeriods\":[{\"year\":\"2024/2025\",\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\"},{\"year\":\"2024/2025\",\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\",\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\"}],\"_rev\":\"gbwTgqOq53YDSh8fvn5ODb\",\"_type\":\"room\",\"priceSummer\":399,\"property\":{\"_type\":\"reference\",\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\"},\"_updatedAt\":\"2025-02-21T08:13:38Z\",\"_createdAt\":\"2025-02-19T14:46:30Z\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"BqQvpbXYKfaL3e7REp8SuQ\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn5ODb","sanity-transaction-time":"2025-02-21T08:13:38Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"BqQvpbXYKfaL3e7REp8SuQ\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"gbwTgqOq53YDSh8fvn5ODb","sanity-transaction-time":"2025-02-21T08:13:38Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1988\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"BqQvpbXYKfaL3e7REp8SuQ\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"gbwTgqOq53YDSh8fvn5ODb\",\"sanity-transaction-time\":\"2025-02-21T08:13:38Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T08:13:41.860Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 710.9048ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 710.9048ms"}}
[debug] [2025-02-21T08:13:41.860Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T08:13:41.860Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:41.860Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:41.860Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:13:42.357Z] [work-queue] {"queuedWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:42.357Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-02-21T08:13:42.357Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/street-lobby/us-central1/sanityWebhook-2025-02-21T08:13:42.357Z"],"workRunningCount":1}
[debug] [2025-02-21T08:13:42.357Z] Accepted request POST /street-lobby/us-central1/sanityWebhook --> us-central1-sanityWebhook
[debug] [2025-02-21T08:13:42.357Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-02-21T08:13:42.357Z] [functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/street-lobby/us-central1/sanityWebhook, mapping to path=/"}}
[debug] [2025-02-21T08:13:42.357Z] [worker-pool] submitRequest(triggerId=us-central1-sanityWebhook) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sanityWebhook)"}}
[info] i  functions: Beginning execution of "us-central1-sanityWebhook" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Beginning execution of \"us-central1-sanityWebhook\""}}
[debug] [2025-02-21T08:13:42.358Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: BUSY"}}
[info] >  {"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"} {"user":{"decoded":{"sub":"1234567890","name":"snaity","admin":true,"iat":1516239022},"severity":"INFO","message":"JWT Verified"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"decoded\":{\"sub\":\"1234567890\",\"name\":\"snaity\",\"admin\":true,\"iat\":1516239022},\"severity\":\"INFO\",\"message\":\"JWT Verified\"}"}}
[info] >  {"data":{"priceSummer":399,"roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_updatedAt":"2025-02-21T08:13:38Z","bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"semester":"Summer","services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d"}],"priceWinter":1500,"slug":{"_type":"slug","current":"arroios-room-1"},"_rev":"oVMkP0YmhyBGyJroWjHzr6","isAvailable":true,"title":"arroios-room-1","roomNumber":1,"_type":"room","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_createdAt":"2025-02-19T14:46:30Z"},"severity":"INFO","message":"Request Body Parsed"} {"user":{"data":{"priceSummer":399,"roomType":"Single bed","property":{"_ref":"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c","_type":"reference"},"availableSemesters":[{"_key":"1ada09539f7e4eccd5660879e87eb148","year":"2024/2025","semester":"1st Semester"},{"_key":"3528c185f01e116a267343dc3869ef20","year":"2024/2025","semester":"2nd Semester"},{"year":"2024/2025","semester":"Summer","_key":"4888b1c70e25ddc802793df264e2ad97"},{"_key":"1c62f250e3a1a3514890a15c1d0a98b1","year":"2024/2025","semester":"Both Semesters"},{"_key":"f007205a3d745514755eda33db5cfcca","year":"2024/2025","semester":"Full Year"},{"_key":"381749933c8c8cebc0a690a887cf16d4","year":"2025/2026","semester":"1st Semester"},{"_key":"9e5a2c3aa1e435cbe228c2adcf54b206","year":"2025/2026","semester":"2nd Semester"},{"_key":"929ece55aa41c06c8c5eae6557d972b8","year":"2025/2026","semester":"Summer"},{"_key":"57ca5240b671920685e30da04c5b4d9c","year":"2025/2026","semester":"Both Semesters"},{"semester":"Full Year","_key":"f0642978f54d5c81811901bb7d03ec86","year":"2025/2026"},{"semester":"1st Semester","_key":"2d7fc3516c0623a020c163d2403d1dca","year":"2026/2027"},{"_key":"b13951b0acd54e742a33792b49c92ac6","year":"2026/2027","semester":"2nd Semester"},{"_key":"6e23bc8ff8752ac846a7d78fed82f10f","year":"2026/2027","semester":"Summer"},{"_key":"5b0a1a3300e1b3a23b0402f40d320fa1","year":"2026/2027","semester":"Both Semesters"},{"_key":"ddca027cf14499dc5132fa7d0bb1d99c","year":"2026/2027","semester":"Full Year"}],"_updatedAt":"2025-02-21T08:13:38Z","bookedPeriods":[{"year":"2024/2025","_key":"ad7f94703e5c","semester":"1st Semester"},{"semester":"Summer","services":"Weekly room cleaning","year":"2024/2025","_key":"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d"}],"priceWinter":1500,"slug":{"_type":"slug","current":"arroios-room-1"},"_rev":"oVMkP0YmhyBGyJroWjHzr6","isAvailable":true,"title":"arroios-room-1","roomNumber":1,"_type":"room","_id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","_createdAt":"2025-02-19T14:46:30Z"},"severity":"INFO","message":"Request Body Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"data\":{\"priceSummer\":399,\"roomType\":\"Single bed\",\"property\":{\"_ref\":\"bcba41de-dfc2-4d09-b40c-0d1c6ab5b80c\",\"_type\":\"reference\"},\"availableSemesters\":[{\"_key\":\"1ada09539f7e4eccd5660879e87eb148\",\"year\":\"2024/2025\",\"semester\":\"1st Semester\"},{\"_key\":\"3528c185f01e116a267343dc3869ef20\",\"year\":\"2024/2025\",\"semester\":\"2nd Semester\"},{\"year\":\"2024/2025\",\"semester\":\"Summer\",\"_key\":\"4888b1c70e25ddc802793df264e2ad97\"},{\"_key\":\"1c62f250e3a1a3514890a15c1d0a98b1\",\"year\":\"2024/2025\",\"semester\":\"Both Semesters\"},{\"_key\":\"f007205a3d745514755eda33db5cfcca\",\"year\":\"2024/2025\",\"semester\":\"Full Year\"},{\"_key\":\"381749933c8c8cebc0a690a887cf16d4\",\"year\":\"2025/2026\",\"semester\":\"1st Semester\"},{\"_key\":\"9e5a2c3aa1e435cbe228c2adcf54b206\",\"year\":\"2025/2026\",\"semester\":\"2nd Semester\"},{\"_key\":\"929ece55aa41c06c8c5eae6557d972b8\",\"year\":\"2025/2026\",\"semester\":\"Summer\"},{\"_key\":\"57ca5240b671920685e30da04c5b4d9c\",\"year\":\"2025/2026\",\"semester\":\"Both Semesters\"},{\"semester\":\"Full Year\",\"_key\":\"f0642978f54d5c81811901bb7d03ec86\",\"year\":\"2025/2026\"},{\"semester\":\"1st Semester\",\"_key\":\"2d7fc3516c0623a020c163d2403d1dca\",\"year\":\"2026/2027\"},{\"_key\":\"b13951b0acd54e742a33792b49c92ac6\",\"year\":\"2026/2027\",\"semester\":\"2nd Semester\"},{\"_key\":\"6e23bc8ff8752ac846a7d78fed82f10f\",\"year\":\"2026/2027\",\"semester\":\"Summer\"},{\"_key\":\"5b0a1a3300e1b3a23b0402f40d320fa1\",\"year\":\"2026/2027\",\"semester\":\"Both Semesters\"},{\"_key\":\"ddca027cf14499dc5132fa7d0bb1d99c\",\"year\":\"2026/2027\",\"semester\":\"Full Year\"}],\"_updatedAt\":\"2025-02-21T08:13:38Z\",\"bookedPeriods\":[{\"year\":\"2024/2025\",\"_key\":\"ad7f94703e5c\",\"semester\":\"1st Semester\"},{\"semester\":\"Summer\",\"services\":\"Weekly room cleaning\",\"year\":\"2024/2025\",\"_key\":\"gbwTgqOq53YDSh8fvn0KyE__^^__7012efa1-7e7a-4353-9a9f-56b3fbc7be8d\"}],\"priceWinter\":1500,\"slug\":{\"_type\":\"slug\",\"current\":\"arroios-room-1\"},\"_rev\":\"oVMkP0YmhyBGyJroWjHzr6\",\"isAvailable\":true,\"title\":\"arroios-room-1\",\"roomNumber\":1,\"_type\":\"room\",\"_id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"_createdAt\":\"2025-02-19T14:46:30Z\"},\"severity\":\"INFO\",\"message\":\"Request Body Parsed\"}"}}
[info] >  {"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"2d5cwexzHJbJor8kcxm2zg\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjHzr6","sanity-transaction-time":"2025-02-21T08:13:39Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"} {"user":{"headers":{"host":"39ff-103-153-66-53.ngrok-free.app","user-agent":"Sanity.io webhook delivery","content-length":"1988","accept-encoding":"gzip","authorization":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo","content-type":"application/json","idempotency-key":"\"2d5cwexzHJbJor8kcxm2zg\"","sanity-dataset":"production","sanity-document-id":"221e3097-7d28-45b3-b2b3-3bb55c123ba6","sanity-operation":"update","sanity-project-id":"pkg5i4cw","sanity-transaction-id":"oVMkP0YmhyBGyJroWjHzr6","sanity-transaction-time":"2025-02-21T08:13:39Z","sanity-webhook-id":"j3UXNvmUOEP67JR7","x-forwarded-for":"35.205.99.116","x-forwarded-host":"39ff-103-153-66-53.ngrok-free.app","x-forwarded-proto":"https","connection":"keep-alive"},"severity":"INFO","message":"Request Headers Parsed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"host\":\"39ff-103-153-66-53.ngrok-free.app\",\"user-agent\":\"Sanity.io webhook delivery\",\"content-length\":\"1988\",\"accept-encoding\":\"gzip\",\"authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNuYWl0eSIsImFkbWluIjp0cnVlLCJpYXQiOjE1MTYyMzkwMjJ9.eahQYWB23dfDJ7aFTAzV_bR8UScxora9RYPane1jYbo\",\"content-type\":\"application/json\",\"idempotency-key\":\"\\\"2d5cwexzHJbJor8kcxm2zg\\\"\",\"sanity-dataset\":\"production\",\"sanity-document-id\":\"221e3097-7d28-45b3-b2b3-3bb55c123ba6\",\"sanity-operation\":\"update\",\"sanity-project-id\":\"pkg5i4cw\",\"sanity-transaction-id\":\"oVMkP0YmhyBGyJroWjHzr6\",\"sanity-transaction-time\":\"2025-02-21T08:13:39Z\",\"sanity-webhook-id\":\"j3UXNvmUOEP67JR7\",\"x-forwarded-for\":\"35.205.99.116\",\"x-forwarded-host\":\"39ff-103-153-66-53.ngrok-free.app\",\"x-forwarded-proto\":\"https\",\"connection\":\"keep-alive\"},\"severity\":\"INFO\",\"message\":\"Request Headers Parsed\"}"}}
[info] >  Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room {"user":"Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"\u001b[90m> \u001b[39m Document 221e3097-7d28-45b3-b2b3-3bb55c123ba6 updated in room"}}
[debug] [2025-02-21T08:13:43.490Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sanityWebhook" in 1132.8108ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finished \"us-central1-sanityWebhook\" in 1132.8108ms"}}
[debug] [2025-02-21T08:13:43.491Z] [worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"[worker-us-central1-sanityWebhook-277c87ec-fa27-412c-bb53-4faade10e8d8]: IDLE"}}
[debug] [2025-02-21T08:13:43.491Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-02-21T08:13:43.491Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sanityWebhook"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-02-21T08:13:43.491Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
